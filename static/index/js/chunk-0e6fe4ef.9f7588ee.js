(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e6fe4ef"],{"0c2e":function(e,t,l){"use strict";l.r(t);var o=l("7a23");const a=Object(o["createVNode"])("h3",null,"SSL证书管理",-1),s=Object(o["createVNode"])("div",{class:"margin-4x"},null,-1),i={class:"ssl-search-input"},c=Object(o["createTextVNode"])("添加SSL证书"),r={class:"demo-block"},d=Object(o["createTextVNode"])("编辑"),n=Object(o["createVNode"])("p",null,"确定删除吗？",-1),b={style:{"text-align":"right",margin:"0"}},m=Object(o["createTextVNode"])("取消"),u=Object(o["createTextVNode"])("确定 "),p=Object(o["createTextVNode"])("删除"),j=Object(o["createTextVNode"])("取消"),O=Object(o["createTextVNode"])("确定");function V(e,t,l,V,_,g){const w=Object(o["resolveComponent"])("el-col"),f=Object(o["resolveComponent"])("el-row"),h=Object(o["resolveComponent"])("el-input"),C=Object(o["resolveComponent"])("el-button"),k=Object(o["resolveComponent"])("el-table-column"),y=Object(o["resolveComponent"])("el-popover"),x=Object(o["resolveComponent"])("el-table"),N=Object(o["resolveComponent"])("el-form-item"),v=Object(o["resolveComponent"])("el-form"),F=Object(o["resolveComponent"])("el-dialog"),S=Object(o["resolveDirective"])("loading");return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(f,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(w,{span:24},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(f,{type:"flex",class:"row-bg",justify:"space-between"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(w,{span:12},{default:Object(o["withCtx"])(()=>[a]),_:1}),Object(o["createVNode"])(w,{span:12,class:"text-align-right"})]),_:1}),s,Object(o["createVNode"])(f,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(w,{span:24},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(f,{class:"text-align-right"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])("div",i,[Object(o["createVNode"])(h,{placeholder:"请输入名称进行搜索","prefix-icon":"el-icon-search",modelValue:_.sslSearch,"onUpdate:modelValue":t[1]||(t[1]=e=>_.sslSearch=e)},null,8,["modelValue"])]),Object(o["createVNode"])(C,{type:"primary",onClick:t[2]||(t[2]=e=>g.onClickCreateSSL())},{default:Object(o["withCtx"])(()=>[c]),_:1})]),_:1}),Object(o["createVNode"])("div",r,[Object(o["createVNode"])(x,{data:_.tableData.filter(e=>!_.sslSearch||e.ssl.toLowerCase().includes(_.sslSearch.toLowerCase())),style:{width:"100%"}},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(k,{prop:"ssl_domain",label:"SSL证书域名"}),Object(o["createVNode"])(k,{prop:"",label:"关联网站"},{default:Object(o["withCtx"])(e=>[Object(o["createVNode"])("p",null," 网站："+Object(o["toDisplayString"])(e.row.waf_domain_count),1),Object(o["createVNode"])("p",null," 网站分组："+Object(o["toDisplayString"])(e.row.waf_group_domain_count),1)]),_:1}),Object(o["createVNode"])(k,{prop:"update_time",label:"更新时间"}),Object(o["createVNode"])(k,{label:"操作",align:"right"},{default:Object(o["withCtx"])(e=>[Object(o["createVNode"])(C,{size:"mini",onClick:t=>g.handleEdit(e.row),class:"button-block",type:"text"},{default:Object(o["withCtx"])(()=>[d]),_:2},1032,["onClick"]),Object(o["createVNode"])(y,{placement:"top",width:"160",modelValue:e.row.isVisiblePopover,"onUpdate:modelValue":t=>e.row.isVisiblePopover=t},{reference:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{type:"text",size:"mini",onClick:t=>e.row.isVisiblePopover=!0},{default:Object(o["withCtx"])(()=>[p]),_:2},1032,["onClick"])]),default:Object(o["withCtx"])(()=>[n,Object(o["createVNode"])("div",b,[Object(o["createVNode"])(C,{size:"mini",type:"text",onClick:t=>e.row.isVisiblePopover=!1},{default:Object(o["withCtx"])(()=>[m]),_:2},1032,["onClick"]),Object(o["createVNode"])(C,{type:"primary",size:"mini",onClick:t=>g.handleDelete(e.row),loading:_.loading},{default:Object(o["withCtx"])(()=>[u]),_:2},1032,["onClick","loading"])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(F,{title:_.sslTitle,modelValue:_.dialogsslFormVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>_.dialogsslFormVisible=e),width:"520px","close-on-click-modal":!1,onClose:g.dialogClose},{footer:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{onClick:t[7]||(t[7]=e=>_.dialogsslFormVisible=!1)},{default:Object(o["withCtx"])(()=>[j]),_:1}),Object(o["createVNode"])(C,{type:"primary",onClick:t[8]||(t[8]=e=>g.onClicksslSubmit("sslForm")),loading:_.loading},{default:Object(o["withCtx"])(()=>[O]),_:1},8,["loading"])]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(v,{class:"form-tag-dialog",model:_.sslForm,size:"mini","label-position":"left","label-width":"130px",rules:g.rules,ref:"sslForm"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(N,{label:"SSL证书域名",prop:"ssl_domain",key:"1"},{default:Object(o["withCtx"])(()=>["new"==_.sslType?(Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:0,modelValue:_.sslForm.ssl_domain,"onUpdate:modelValue":t[3]||(t[3]=e=>_.sslForm.ssl_domain=e),placeholder:"支持通配符，且为小写，例如 www.jxwaf.com"},null,8,["modelValue"])):Object(o["createCommentVNode"])("",!0),"edit"==_.sslType?(Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:1,modelValue:_.sslForm.ssl_domain,"onUpdate:modelValue":t[4]||(t[4]=e=>_.sslForm.ssl_domain=e),disabled:"disabled"},null,8,["modelValue"])):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(N,{label:"公钥",prop:"public_key",key:"23"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(h,{modelValue:_.sslForm.public_key,"onUpdate:modelValue":t[5]||(t[5]=e=>_.sslForm.public_key=e),placeholder:"需包含证书链",type:"textarea",rows:4},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(N,{label:"私钥",prop:"private_key",key:"3"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(h,{modelValue:_.sslForm.private_key,"onUpdate:modelValue":t[6]||(t[6]=e=>_.sslForm.private_key=e),type:"textarea",rows:4},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"])]),_:1},512)),[[S,_.loadingPage,void 0,{fullscreen:!0,lock:!0}]])}var _=l("362c"),g={mixins:[_["b"]],data(){return{sslTitle:"添加证书",sslType:"new",sslSearch:"",loadingPage:!1,dialogsslFormVisible:!1,loading:!1,sslForm:{ssl_domain:"",private_key:"",public_key:""},tableData:[]}},computed:{rules(){return{ssl_domain:[{required:!0,message:"请输入证书名",trigger:["blur","change"]}],public_key:[{required:!0,message:"请输入公钥",trigger:"blur"}],private_key:[{required:!0,message:"请输入私钥",trigger:"blur"}]}}},mounted(){this.getData()},methods:{getData(){var e=this;Object(_["a"])("get","/waf/waf_get_sys_ssl_manage_list",{},(function(t){e.loadingPage=!1,e.tableData=t.data.message,e.tableData.forEach(e=>{e.isVisiblePopover=!1})}),(function(){e.loadingPage=!1}))},dialogClose(){this.sslForm={ssl_domain:"",public_key:"",private_key:""},this.$refs["sslForm"].resetFields()},onClicksslSubmit(e){var t=this,l="/waf/waf_create_sys_ssl_manage";"edit"==t.sslType&&(l="/waf/waf_edit_sys_ssl_manage"),this.$refs[e].validate(e=>{e&&(t.loading=!0,Object(_["a"])("post",l,t.sslForm,(function(e){t.loading=!1,t.dialogsslFormVisible=!1,t.getData()}),(function(){t.loading=!1})))})},onClickCreateSSL(){var e=this;e.sslTitle="添加证书",e.sslType="new",e.dialogsslFormVisible=!0},handleEdit(e){var t=this;t.sslForm.ssl_domain=e.ssl_domain,t.sslForm.private_key=e.private_key,t.sslForm.public_key=e.public_key,t.sslForm.isVisiblePopover=!1,t.sslTitle="编辑证书",t.sslType="edit",t.dialogsslFormVisible=!0},handleDelete(e){var t=this;t.loading=!0,Object(_["a"])("post","/waf/waf_del_sys_ssl_manage",{ssl_domain:e.ssl_domain},(function(l){e.isVisiblePopover=!1,t.loading=!1,t.getData()}),(function(){t.loading=!1}))}}},w=(l("fe8e"),l("d959")),f=l.n(w);const h=f()(g,[["render",V]]);t["default"]=h},b6dd:function(e,t,l){},fe8e:function(e,t,l){"use strict";l("b6dd")}}]);
//# sourceMappingURL=chunk-0e6fe4ef.9f7588ee.js.map