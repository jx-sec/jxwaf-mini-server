(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dba4f6de"],{"1dde":function(e,t,a){var n=a("d039"),o=a("b622"),r=a("2d00"),c=o("species");e.exports=function(e){return r>=51||!n((function(){var t=[],a=t.constructor={};return a[c]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2532:function(e,t,a){"use strict";var n=a("23e7"),o=a("5a34"),r=a("1d80"),c=a("577e"),i=a("ab13");n({target:"String",proto:!0,forced:!i("includes")},{includes:function(e){return!!~c(r(this)).indexOf(c(o(e)),arguments.length>1?arguments[1]:void 0)}})},"466d":function(e,t,a){"use strict";var n=a("d784"),o=a("825a"),r=a("50c4"),c=a("577e"),i=a("1d80"),l=a("8aa5"),d=a("14c3");n("match",(function(e,t,a){return[function(t){var a=i(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,a):new RegExp(t)[e](c(a))},function(e){var n=o(this),i=c(e),s=a(t,n,i);if(s.done)return s.value;if(!n.global)return d(n,i);var u=n.unicode;n.lastIndex=0;var b,f=[],m=0;while(null!==(b=d(n,i))){var p=c(b[0]);f[m]=p,""===p&&(n.lastIndex=l(i,r(n.lastIndex),u)),m++}return 0===m?null:f}]}))},"4de4":function(e,t,a){"use strict";var n=a("23e7"),o=a("b727").filter,r=a("1dde"),c=r("filter");n({target:"Array",proto:!0,forced:!c},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"4e98":function(e,t,a){"use strict";a.r(t);a("4de4"),a("caad"),a("2532"),a("b0c0"),a("ac1f"),a("466d");var n=a("7a23"),o=Object(n["createVNode"])("h3",null,"响应替换配置",-1),r={class:"domain-search-input"},c=Object(n["createTextVNode"])("新增"),i={class:"demo-block"},l={key:0},d=Object(n["createVNode"])("i",{class:"el-icon-circle-check icon-success"},null,-1),s=Object(n["createTextVNode"])("已开启 "),u={key:1},b=Object(n["createVNode"])("i",{class:"el-icon-circle-close icon-error"},null,-1),f=Object(n["createTextVNode"])("已关闭 "),m={key:0},p=Object(n["createVNode"])("i",{class:"el-icon-circle-check icon-success"},null,-1),h=Object(n["createTextVNode"])("已开启 "),O={key:1},_=Object(n["createVNode"])("i",{class:"el-icon-circle-close icon-error"},null,-1),j=Object(n["createTextVNode"])("已关闭 "),V=Object(n["createTextVNode"])("编辑"),y=Object(n["createVNode"])("p",null,"确定删除吗？",-1),g={style:{"text-align":"right",margin:"0"}},C=Object(n["createTextVNode"])("取消"),v=Object(n["createTextVNode"])("确定 "),w=Object(n["createTextVNode"])("删除"),N={key:0},k=Object(n["createVNode"])("div",{class:"match-title"},[Object(n["createVNode"])("p",null,"Header头"),Object(n["createVNode"])("p",null,"正则匹配"),Object(n["createVNode"])("p",null,"替换内容")],-1),x={class:"match-key-item"},F={class:"match-key-item"},T={class:"match-key-item"},B=Object(n["createTextVNode"])("删除"),M=Object(n["createTextVNode"])("新增"),U={key:1},I=Object(n["createTextVNode"])("取消"),D=Object(n["createTextVNode"])("确定");function S(e,t){var a=Object(n["resolveComponent"])("el-col"),S=Object(n["resolveComponent"])("el-row"),E=Object(n["resolveComponent"])("el-divider"),P=Object(n["resolveComponent"])("el-input"),z=Object(n["resolveComponent"])("el-button"),A=Object(n["resolveComponent"])("el-table-column"),J=Object(n["resolveComponent"])("el-popover"),L=Object(n["resolveComponent"])("el-table"),$=Object(n["resolveComponent"])("el-form-item"),q=Object(n["resolveComponent"])("el-switch"),H=Object(n["resolveComponent"])("el-form"),R=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])(S,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(a,{span:24},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(S,{type:"flex",class:"row-bg",justify:"space-between"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(a,{span:24},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(S,{type:"flex",class:"row-bg",justify:"space-between"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(a,{span:12},{default:Object(n["withCtx"])((function(){return[o]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(E),Object(n["createVNode"])(S,{class:"text-align-right"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",r,[Object(n["createVNode"])(P,{placeholder:"请输入名称进行搜索","prefix-icon":"el-icon-search",modelValue:e.domainSearch,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.domainSearch=t})},null,8,["modelValue"])]),Object(n["createVNode"])(z,{type:"primary",onClick:t[2]||(t[2]=function(t){return e.onClickCreateIdentity()})},{default:Object(n["withCtx"])((function(){return[c]})),_:1})]})),_:1}),Object(n["createVNode"])("div",i,[Object(n["createVNode"])(L,{data:e.tableData.filter((function(t){return!e.domainSearch||t.name.toLowerCase().includes(e.domainSearch.toLowerCase())})),style:{width:"100%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(A,{prop:"name",label:"名称"}),Object(n["createVNode"])(A,{prop:"detail",label:"详情"}),Object(n["createVNode"])(A,{prop:"status",label:"响应头替换"},{default:Object(n["withCtx"])((function(e){return["true"==e.row.response_header_status?(Object(n["openBlock"])(),Object(n["createBlock"])("span",l,[d,s])):Object(n["createCommentVNode"])("",!0),"false"==e.row.response_header_status?(Object(n["openBlock"])(),Object(n["createBlock"])("span",u,[b,f])):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])(A,{prop:"status",label:"响应体替换"},{default:Object(n["withCtx"])((function(e){return["true"==e.row.response_data_status?(Object(n["openBlock"])(),Object(n["createBlock"])("span",m,[p,h])):Object(n["createCommentVNode"])("",!0),"false"==e.row.response_data_status?(Object(n["openBlock"])(),Object(n["createBlock"])("span",O,[_,j])):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])(A,{label:"操作",align:"right"},{default:Object(n["withCtx"])((function(t){return[Object(n["createVNode"])(z,{size:"mini",onClick:function(a){return e.handleEdit(t.row)},class:"button-block",type:"text",loading:t.row.loading},{default:Object(n["withCtx"])((function(){return[V]})),_:2},1032,["onClick","loading"]),Object(n["createVNode"])(J,{placement:"top",width:"160",visible:t.row.isVisiblePopover,"onUpdate:visible":function(e){return t.row.isVisiblePopover=e}},{reference:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{type:"text",size:"mini",onClick:function(e){return t.row.isVisiblePopover=!0}},{default:Object(n["withCtx"])((function(){return[w]})),_:2},1032,["onClick"])]})),default:Object(n["withCtx"])((function(){return[y,Object(n["createVNode"])("div",g,[Object(n["createVNode"])(z,{size:"mini",type:"text",onClick:function(e){return t.row.isVisiblePopover=!1}},{default:Object(n["withCtx"])((function(){return[C]})),_:2},1032,["onClick"]),Object(n["createVNode"])(z,{type:"primary",size:"mini",onClick:function(a){return e.handleDelete(t.row)},loading:e.loading},{default:Object(n["withCtx"])((function(){return[v]})),_:2},1032,["onClick","loading"])])]})),_:2},1032,["visible","onUpdate:visible"])]})),_:1})]})),_:1},8,["data"])])]})),_:1}),Object(n["createVNode"])(R,{title:e.domainTitle,modelValue:e.dialogIdentityFormVisible,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.dialogIdentityFormVisible=t}),width:"820px","close-on-click-modal":!1,onClosed:e.dialogClose},{footer:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{onClick:t[11]||(t[11]=function(t){return e.dialogIdentityFormVisible=!1})},{default:Object(n["withCtx"])((function(){return[I]})),_:1}),Object(n["createVNode"])(z,{type:"primary",onClick:t[12]||(t[12]=function(t){return e.onClickIdentitySubmit("identityForm")}),loading:e.loading},{default:Object(n["withCtx"])((function(){return[D]})),_:1},8,["loading"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(H,{class:"form-tag-dialog identity-edit-form ",model:e.identityForm,size:"mini","label-position":"left","label-width":"130px",rules:e.rules,ref:"identityForm"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])($,{label:"名称",prop:"name",key:"1"},{default:Object(n["withCtx"])((function(){return["new"==e.domainType?(Object(n["openBlock"])(),Object(n["createBlock"])(P,{key:0,modelValue:e.identityForm.name,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.identityForm.name=t}),placeholder:"请输入字母开头，只包含字母、数字、下划线“_”、中横线“-”"},null,8,["modelValue"])):Object(n["createCommentVNode"])("",!0),"edit"==e.domainType?(Object(n["openBlock"])(),Object(n["createBlock"])(P,{key:1,modelValue:e.identityForm.name,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.identityForm.name=t}),disabled:"disabled"},null,8,["modelValue"])):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])($,{label:"详情",key:"2"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(P,{modelValue:e.identityForm.detail,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.identityForm.detail=t}),placeholder:"请输入详情"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])($,{label:"响应头替换",key:"9"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(q,{modelValue:e.identityForm.response_header_status,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.identityForm.response_header_status=t}),"active-value":"true","inactive-value":"false"},null,8,["modelValue"])]})),_:1}),"true"==e.identityForm.response_header_status?(Object(n["openBlock"])(),Object(n["createBlock"])("div",N,[Object(n["createVNode"])($,{label:"响应头替换配置",key:"10"},{default:Object(n["withCtx"])((function(){return[k,(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.ruleConfigMatchs,(function(t,a){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"match-box",key:"matchs"+a},[Object(n["createVNode"])("div",x,[Object(n["createVNode"])(P,{modelValue:t.key,"onUpdate:modelValue":function(e){return t.key=e}},null,8,["modelValue","onUpdate:modelValue"])]),Object(n["createVNode"])("div",F,[Object(n["createVNode"])(P,{modelValue:t.match,"onUpdate:modelValue":function(e){return t.match=e}},null,8,["modelValue","onUpdate:modelValue"])]),Object(n["createVNode"])("div",T,[Object(n["createVNode"])(P,{modelValue:t.data,"onUpdate:modelValue":function(e){return t.data=e}},null,8,["modelValue","onUpdate:modelValue"])]),Object(n["createVNode"])(z,{onClick:Object(n["withModifiers"])((function(a){return e.removeConfigMatchs(t,e.bigIndex)}),["prevent"])},{default:Object(n["withCtx"])((function(){return[B]})),_:2},1032,["onClick"])])})),128)),Object(n["createVNode"])(z,{onClick:t[7]||(t[7]=function(t){return e.addConfigMatchs(e.bigIndex)}),plain:"",type:"primary",class:"button-new"},{default:Object(n["withCtx"])((function(){return[M]})),_:1})]})),_:1})])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])($,{label:"响应体替换",key:"6"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(q,{modelValue:e.identityForm.response_data_status,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.identityForm.response_data_status=t}),"active-value":"true","inactive-value":"false"},null,8,["modelValue"])]})),_:1}),"true"==e.identityForm.response_data_status?(Object(n["openBlock"])(),Object(n["createBlock"])("div",U,[Object(n["createVNode"])($,{label:"响应体匹配正则",key:"7"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(P,{modelValue:e.identityForm.response_data_replace_match,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.identityForm.response_data_replace_match=t}),placeholder:"请输入"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])($,{label:"响应体替换内容",key:"8"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(P,{modelValue:e.identityForm.response_data_replace_data,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.identityForm.response_data_replace_data=t}),placeholder:"请输入"},null,8,["modelValue"])]})),_:1})])):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["model","rules"])]})),_:1},8,["title","modelValue","onClosed"])]})),_:1})}a("159b"),a("a434");var E=a("362c"),P={mixins:[E["b"]],data:function(){return{domainTitle:"新增",domainType:"new",domainSearch:"",dialogIdentityFormVisible:!1,loading:!1,identityForm:{name:"",detail:"",response_header_status:"false",response_header_replace_data:"",response_data_status:"false",response_data_replace_match:"",response_data_replace_data:""},tableData:[],ruleConfigMatchs:[{key:"",match:"",data:""}]}},computed:{rules:function(){return{name:[{required:!0,message:"请输入字母开头，只包含字母、数字、下划线“_”、中横线“-”",trigger:["blur","change"]},{validator:E["h"],trigger:["blur","change"]}]}}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;Object(E["a"])("get","/waf/waf_get_sys_response_replace_list",{},(function(t){e.tableData=t.data.message,e.tableData.forEach((function(e){e.isVisiblePopover=!1}))}),(function(){}))},dialogClose:function(){this.identityForm={name:"",detail:"",response_header_status:"false",response_header_replace_data:"",response_data_status:"false",response_data_replace_match:"",response_data_replace_data:""},this.ruleConfigMatchs=[{key:"",match:"",data:""}],this.$refs["identityForm"].resetFields()},onClickIdentitySubmit:function(e){var t=this,a="/waf/waf_create_sys_response_replace";"edit"==t.domainType&&(a="/waf/waf_edit_sys_response_replace");var n="";if("true"==t.identityForm.response_header_status){if(0==t.ruleConfigMatchs.length)return t.$message({message:"请对自定义header头进行配置",type:"error"}),!1;for(var o in t.ruleConfigMatchs){var r=t.ruleConfigMatchs[o];n=0==o?n+'"'+r.key+'":{"replace_match":"'+r.match+'","replace_data":"'+r.data+'"}':n+',"'+r.key+'":{"replace_match":"'+r.match+'","replace_data":"'+r.data+'"}'}n="{"+n+"}"}t.identityForm.response_header_replace_data=n,this.$refs[e].validate((function(e){e&&(t.loading=!0,Object(E["a"])("post",a,t.identityForm,(function(e){t.loading=!1,t.dialogIdentityFormVisible=!1,t.getData()}),(function(){t.loading=!1})))}))},onClickCreateIdentity:function(){var e=this;e.domainTitle="新增",e.domainType="new",e.dialogIdentityFormVisible=!0},handleEdit:function(e){var t=this;e.loading=!0,Object(E["a"])("post","/waf/waf_get_sys_response_replace",{name:e.name},(function(a){e.loading=!1;var n=a.data.message;if(t.identityForm.name=n.name,t.identityForm.detail=n.detail,t.identityForm.response_header_status=n.response_header_status,t.identityForm.response_header_replace_data=n.response_header_replace_data,t.identityForm.response_data_status=n.response_data_status,t.identityForm.response_data_replace_match=n.response_data_replace_match,t.identityForm.response_data_replace_data=n.response_data_replace_data,"true"==t.identityForm.response_header_status){var o=JSON.parse(t.identityForm.response_header_replace_data),r=[];for(var c in o){var i=o[c].replace_match,l=o[c].replace_data;r.push({key:c,match:i,data:l})}t.ruleConfigMatchs=r}t.domainTitle="编辑",t.domainType="edit",t.dialogIdentityFormVisible=!0}),(function(){e.loading=!1}),"no-message")},handleDelete:function(e){var t=this;t.loading=!0,Object(E["a"])("post","/waf/waf_del_sys_response_replace",{name:e.name},(function(a){e.isVisiblePopover=!1,t.loading=!1,t.getData()}),(function(){t.loading=!1}))},removeConfigMatchs:function(e){var t=this.ruleConfigMatchs.indexOf(e);t>0&&this.ruleConfigMatchs.splice(t,1)},addConfigMatchs:function(){this.ruleConfigMatchs.push({key:"",match:"",data:""})}}};a("b9e8");P.render=S;t["default"]=P},"5a34":function(e,t,a){var n=a("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},8418:function(e,t,a){"use strict";var n=a("a04b"),o=a("9bf2"),r=a("5c6c");e.exports=function(e,t,a){var c=n(t);c in e?o.f(e,c,r(0,a)):e[c]=a}},"94bc":function(e,t,a){},a434:function(e,t,a){"use strict";var n=a("23e7"),o=a("23cb"),r=a("a691"),c=a("50c4"),i=a("7b0b"),l=a("65f0"),d=a("8418"),s=a("1dde"),u=s("splice"),b=Math.max,f=Math.min,m=9007199254740991,p="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var a,n,s,u,h,O,_=i(this),j=c(_.length),V=o(e,j),y=arguments.length;if(0===y?a=n=0:1===y?(a=0,n=j-V):(a=y-2,n=f(b(r(t),0),j-V)),j+a-n>m)throw TypeError(p);for(s=l(_,n),u=0;u<n;u++)h=V+u,h in _&&d(s,u,_[h]);if(s.length=n,a<n){for(u=V;u<j-n;u++)h=u+n,O=u+a,h in _?_[O]=_[h]:delete _[O];for(u=j;u>j-n+a;u--)delete _[u-1]}else if(a>n)for(u=j-n;u>V;u--)h=u+n-1,O=u+a-1,h in _?_[O]=_[h]:delete _[O];for(u=0;u<a;u++)_[u+V]=arguments[u+2];return _.length=j-n+a,s}})},ab13:function(e,t,a){var n=a("b622"),o=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[o]=!1,"/./"[e](t)}catch(n){}}return!1}},b9e8:function(e,t,a){"use strict";a("94bc")},caad:function(e,t,a){"use strict";var n=a("23e7"),o=a("4d64").includes,r=a("44d2");n({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")}}]);
//# sourceMappingURL=chunk-dba4f6de.5d0282f7.js.map