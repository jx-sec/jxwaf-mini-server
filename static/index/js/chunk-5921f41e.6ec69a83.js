(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5921f41e"],{"1b92":function(e,t,a){},"50af":function(e,t,a){"use strict";a("1b92")},7952:function(e,t,a){"use strict";a.r(t);var o=a("7a23");const l=Object(o["createVNode"])("h3",null,"自定义响应配置",-1),r={class:"domain-search-input"},i=Object(o["createTextVNode"])("新增"),c={class:"demo-block"},d={key:0},n=Object(o["createVNode"])("i",{class:"el-icon-circle-check icon-success"},null,-1),s=Object(o["createTextVNode"])("已开启 "),u={key:1},b=Object(o["createVNode"])("i",{class:"el-icon-circle-close icon-error"},null,-1),m=Object(o["createTextVNode"])("已关闭 "),h=Object(o["createTextVNode"])("编辑"),O=Object(o["createVNode"])("p",null,"确定删除吗？",-1),j={style:{"text-align":"right",margin:"0"}},_=Object(o["createTextVNode"])("取消"),p=Object(o["createTextVNode"])("确定 "),V=Object(o["createTextVNode"])("删除"),f={key:0},y={class:"match_key_title"},C={class:"match-box-content"},g=Object(o["createTextVNode"])("删除"),w=Object(o["createTextVNode"])("新增"),v=Object(o["createTextVNode"])("无响应内容"),N=Object(o["createTextVNode"])("HTML响应内容"),x=Object(o["createTextVNode"])("取消"),k=Object(o["createTextVNode"])("确定");function F(e,t,a,F,T,B){const M=Object(o["resolveComponent"])("el-col"),U=Object(o["resolveComponent"])("el-row"),I=Object(o["resolveComponent"])("el-divider"),D=Object(o["resolveComponent"])("el-input"),S=Object(o["resolveComponent"])("el-button"),P=Object(o["resolveComponent"])("el-table-column"),z=Object(o["resolveComponent"])("el-popover"),H=Object(o["resolveComponent"])("el-table"),J=Object(o["resolveComponent"])("el-form-item"),L=Object(o["resolveComponent"])("el-switch"),E=Object(o["resolveComponent"])("el-radio"),$=Object(o["resolveComponent"])("el-radio-group"),q=Object(o["resolveComponent"])("el-form"),R=Object(o["resolveComponent"])("el-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])(U,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(M,{span:24},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(U,{type:"flex",class:"row-bg",justify:"space-between"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(M,{span:24},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(U,{type:"flex",class:"row-bg",justify:"space-between"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(M,{span:12},{default:Object(o["withCtx"])(()=>[l]),_:1})]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(I),Object(o["createVNode"])(U,{class:"text-align-right"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])("div",r,[Object(o["createVNode"])(D,{placeholder:"请输入名称进行搜索","prefix-icon":"el-icon-search",modelValue:T.domainSearch,"onUpdate:modelValue":t[1]||(t[1]=e=>T.domainSearch=e)},null,8,["modelValue"])]),Object(o["createVNode"])(S,{type:"primary",onClick:t[2]||(t[2]=e=>B.onClickCreateIdentity())},{default:Object(o["withCtx"])(()=>[i]),_:1})]),_:1}),Object(o["createVNode"])("div",c,[Object(o["createVNode"])(H,{data:T.tableData.filter(e=>!T.domainSearch||e.name.toLowerCase().includes(T.domainSearch.toLowerCase())),style:{width:"100%"}},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(P,{prop:"name",label:"名称"}),Object(o["createVNode"])(P,{prop:"detail",label:"详情"}),Object(o["createVNode"])(P,{prop:"status",label:"自定义响应头"},{default:Object(o["withCtx"])(e=>["true"==e.row.set_return_header_status?(Object(o["openBlock"])(),Object(o["createBlock"])("span",d,[n,s])):Object(o["createCommentVNode"])("",!0),"false"==e.row.set_return_header_status?(Object(o["openBlock"])(),Object(o["createBlock"])("span",u,[b,m])):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(P,{label:"操作",align:"right"},{default:Object(o["withCtx"])(e=>[Object(o["createVNode"])(S,{size:"mini",onClick:t=>B.handleEdit(e.row),class:"button-block",type:"text",loading:e.row.loading},{default:Object(o["withCtx"])(()=>[h]),_:2},1032,["onClick","loading"]),Object(o["createVNode"])(z,{placement:"top",width:"160",visible:e.row.isVisiblePopover,"onUpdate:visible":t=>e.row.isVisiblePopover=t},{reference:Object(o["withCtx"])(()=>[Object(o["createVNode"])(S,{type:"text",size:"mini",onClick:t=>e.row.isVisiblePopover=!0},{default:Object(o["withCtx"])(()=>[V]),_:2},1032,["onClick"])]),default:Object(o["withCtx"])(()=>[O,Object(o["createVNode"])("div",j,[Object(o["createVNode"])(S,{size:"mini",type:"text",onClick:t=>e.row.isVisiblePopover=!1},{default:Object(o["withCtx"])(()=>[_]),_:2},1032,["onClick"]),Object(o["createVNode"])(S,{type:"primary",size:"mini",onClick:t=>B.handleDelete(e.row),loading:T.loading},{default:Object(o["withCtx"])(()=>[p]),_:2},1032,["onClick","loading"])])]),_:2},1032,["visible","onUpdate:visible"])]),_:1})]),_:1},8,["data"])])]),_:1}),Object(o["createVNode"])(R,{title:T.domainTitle,modelValue:T.dialogIdentityFormVisible,"onUpdate:modelValue":t[13]||(t[13]=e=>T.dialogIdentityFormVisible=e),width:"520px","close-on-click-modal":!1,onClosed:B.dialogClose},{footer:Object(o["withCtx"])(()=>[Object(o["createVNode"])(S,{onClick:t[11]||(t[11]=e=>T.dialogIdentityFormVisible=!1)},{default:Object(o["withCtx"])(()=>[x]),_:1}),Object(o["createVNode"])(S,{type:"primary",onClick:t[12]||(t[12]=e=>B.onClickIdentitySubmit("identityForm")),loading:T.loading},{default:Object(o["withCtx"])(()=>[k]),_:1},8,["loading"])]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(q,{class:"form-tag-dialog identity-edit-form ",model:T.identityForm,size:"mini","label-position":"left","label-width":"130px",rules:B.rules,ref:"identityForm"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(J,{label:"名称",prop:"name",key:"1"},{default:Object(o["withCtx"])(()=>["new"==T.domainType?(Object(o["openBlock"])(),Object(o["createBlock"])(D,{key:0,modelValue:T.identityForm.name,"onUpdate:modelValue":t[3]||(t[3]=e=>T.identityForm.name=e),placeholder:"请输入字母开头，只包含字母、数字、下划线“_”、中横线“-”"},null,8,["modelValue"])):Object(o["createCommentVNode"])("",!0),"edit"==T.domainType?(Object(o["openBlock"])(),Object(o["createBlock"])(D,{key:1,modelValue:T.identityForm.name,"onUpdate:modelValue":t[4]||(t[4]=e=>T.identityForm.name=e),disabled:"disabled"},null,8,["modelValue"])):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(J,{label:"详情",key:"2"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(D,{modelValue:T.identityForm.detail,"onUpdate:modelValue":t[5]||(t[5]=e=>T.identityForm.detail=e),placeholder:"请输入详情"},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(J,{label:"自定义header头",key:"3"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(L,{modelValue:T.identityForm.set_return_header_status,"onUpdate:modelValue":t[6]||(t[6]=e=>T.identityForm.set_return_header_status=e),"active-value":"true","inactive-value":"false"},null,8,["modelValue"])]),_:1}),"true"==T.identityForm.set_return_header_status?(Object(o["openBlock"])(),Object(o["createBlock"])("div",f,[Object(o["createVNode"])(J,{label:"响应头配置",class:"longer-cascader"},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(T.ruleConfigMatchs,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"match-box",key:"matchs"+a},[Object(o["createVNode"])("div",y,[Object(o["createVNode"])(D,{modelValue:t.key,"onUpdate:modelValue":e=>t.key=e,placeholder:"key"},null,8,["modelValue","onUpdate:modelValue"])]),Object(o["createVNode"])("div",C,[Object(o["createVNode"])(D,{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,placeholder:"value"},null,8,["modelValue","onUpdate:modelValue"])]),Object(o["createVNode"])(S,{onClick:Object(o["withModifiers"])(a=>B.removeConfigMatchs(t,e.bigIndex),["prevent"])},{default:Object(o["withCtx"])(()=>[g]),_:2},1032,["onClick"])]))),128)),Object(o["createVNode"])(S,{onClick:t[7]||(t[7]=t=>B.addConfigMatchs(e.bigIndex)),plain:"",type:"primary",class:"button-new"},{default:Object(o["withCtx"])(()=>[w]),_:1})]),_:1})])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(J,{label:"HTTP响应码",key:"4",prop:"return_code"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(D,{modelValue:T.identityForm.return_code,"onUpdate:modelValue":t[8]||(t[8]=e=>T.identityForm.return_code=e),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(J,{label:"HTTP响应内容",key:"5"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])($,{modelValue:T.return_html,"onUpdate:modelValue":t[9]||(t[9]=e=>T.return_html=e)},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(E,{label:0},{default:Object(o["withCtx"])(()=>[v]),_:1}),Object(o["createVNode"])(E,{label:1},{default:Object(o["withCtx"])(()=>[N]),_:1})]),_:1},8,["modelValue"])]),_:1}),Object(o["withDirectives"])(Object(o["createVNode"])(J,{key:"6"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(D,{modelValue:T.identityForm.return_html,"onUpdate:modelValue":t[10]||(t[10]=e=>T.identityForm.return_html=e),type:"textarea",autosize:{minRows:10}},null,8,["modelValue"])]),_:1},512),[[o["vShow"],1==T.return_html]])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClosed"])]),_:1})}var T=a("362c"),B={mixins:[T["b"]],data(){return{domainTitle:"新增",domainType:"new",domainSearch:"",dialogIdentityFormVisible:!1,loading:!1,identityForm:{name:"",detail:"",set_return_header_status:"false",set_return_header_value:"",return_code:"200",return_html:""},return_html:0,tableData:[],ruleConfigMatchs:[{key:"",value:""}]}},computed:{rules(){return{name:[{required:!0,message:"请输入字母开头，只包含字母、数字、下划线“_”、中横线“-”",trigger:["blur","change"]},{validator:T["h"],trigger:["blur","change"]}],return_code:[{required:!0,message:"请输入HTTP响应码",trigger:["blur","change"]},{validator:T["validateReturnCode"],trigger:["blur","change"]}]}}},mounted(){this.getData()},methods:{getData(){var e=this;Object(T["a"])("get","/waf/waf_get_sys_custom_response_list",{},(function(t){e.tableData=t.data.message,e.tableData.forEach(e=>{e.isVisiblePopover=!1})}),(function(){}))},dialogClose(){this.identityForm={name:"",detail:"",set_return_header_status:"false",set_return_header_value:"",return_code:"200",return_html:""},this.return_html=0,this.ruleConfigMatchs=[{key:"",value:""}],this.$refs["identityForm"].resetFields()},onClickIdentitySubmit(e){var t=this,a="/waf/waf_create_sys_custom_response";if("edit"==t.domainType&&(a="/waf/waf_edit_sys_custom_response"),0==t.return_html&&(t.identityForm.return_html=""),"true"==t.identityForm.set_return_header_status&&0==t.ruleConfigMatchs.length)return t.$message({message:"请对自定义header头进行配置",type:"error"}),!1;t.identityForm.set_return_header_value=JSON.stringify(t.ruleConfigMatchs),this.$refs[e].validate(e=>{e&&(t.loading=!0,Object(T["a"])("post",a,t.identityForm,(function(e){t.loading=!1,t.dialogIdentityFormVisible=!1,t.getData()}),(function(){t.loading=!1})))})},onClickCreateIdentity(){var e=this;e.domainTitle="新增",e.domainType="new",e.dialogIdentityFormVisible=!0},handleEdit(e){var t=this;e.loading=!0,Object(T["a"])("post","/waf/waf_get_sys_custom_response",{name:e.name},(function(a){e.loading=!1;var o=a.data.message;if(t.identityForm.name=o.name,t.identityForm.detail=o.detail,t.identityForm.set_return_header_status=o.set_return_header_status,t.identityForm.set_return_header_value=o.set_return_header_value,t.identityForm.return_code=o.return_code,t.identityForm.return_html=o.return_html,""==t.identityForm.return_html?t.return_html=0:t.return_html=1,"true"==t.identityForm.set_return_header_status){var l=JSON.parse(t.identityForm.set_return_header_value),r=[];for(var i in l){var c=l[i];r.push({key:c.key,value:c.value})}t.ruleConfigMatchs=r}t.domainTitle="编辑",t.domainType="edit",t.dialogIdentityFormVisible=!0}),(function(){e.loading=!1}),"no-message")},handleDelete(e){var t=this;t.loading=!0,Object(T["a"])("post","/waf/waf_del_sys_custom_response",{name:e.name},(function(a){e.isVisiblePopover=!1,t.loading=!1,t.getData()}),(function(){t.loading=!1}))},removeConfigMatchs(e){var t=this.ruleConfigMatchs.indexOf(e);t>0&&this.ruleConfigMatchs.splice(t,1)},addConfigMatchs(){this.ruleConfigMatchs.push({key:"",value:""})}}},M=(a("50af"),a("d959")),U=a.n(M);const I=U()(B,[["render",F]]);t["default"]=I}}]);
//# sourceMappingURL=chunk-5921f41e.6ec69a83.js.map