(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ad3a15c"],{"2b8e":function(e,t,o){},b81e:function(e,t,o){"use strict";o.r(t);var a=o("7a23");const c={class:"echart-container"},i=Object(a["createTextVNode"])("运营中心"),n=Object(a["createTextVNode"])("流量安全报表"),r={class:"container-style"},d={class:"echart-select"},l=Object(a["createVNode"])("div",{class:"card-header"},[Object(a["createVNode"])("span",null,"Web攻击次数")],-1),s={class:"card-text"},b=Object(a["createVNode"])("div",{class:"card-header"},[Object(a["createVNode"])("span",null,"Web攻击接口数")],-1),p={class:"card-text"},u=Object(a["createVNode"])("div",{class:"card-header"},[Object(a["createVNode"])("span",null,"Web攻击IP数")],-1),m={class:"card-text"},h=Object(a["createVNode"])("div",{class:"card-header"},[Object(a["createVNode"])("span",null,"Web攻击来源区域数量")],-1),O={class:"card-text"},g=Object(a["createVNode"])("div",{class:"card-header",style:{color:"rgb(91 92 110)"}},[Object(a["createVNode"])("span",null,"Web攻击来源地区")],-1),j=Object(a["createVNode"])("div",{id:"attack-geoip"},null,-1),f=Object(a["createVNode"])("div",{class:"card-header",style:{color:"rgb(91 92 110)"}},[Object(a["createVNode"])("span",null,"Web攻击趋势")],-1),_={key:0,class:"empty-box"},C=Object(a["createVNode"])("div",{id:"count-trend"},null,-1),T=Object(a["createVNode"])("div",{class:"card-header",style:{color:"rgb(91 92 110)"}},[Object(a["createVNode"])("span",null,"Web攻击来源区域 TOP 5")],-1),v={key:0,class:"empty-box"},w=Object(a["createVNode"])("div",{id:"isocode-top"},null,-1),y=Object(a["createVNode"])("div",{class:"card-header",style:{color:"rgb(91 92 110)"}},[Object(a["createVNode"])("span",null,"Web攻击防护策略 TOP 5")],-1),N={key:0,class:"empty-box"},x=Object(a["createVNode"])("div",{id:"type-top"},null,-1),V=Object(a["createVNode"])("div",{class:"card-header",style:{color:"rgb(91 92 110)"}},[Object(a["createVNode"])("span",null,"Web攻击接口 TOP 5")],-1),k={key:0,class:"empty-box"},D=Object(a["createVNode"])("div",{id:"api-top"},null,-1),B=Object(a["createVNode"])("div",{class:"card-header",style:{color:"rgb(91 92 110)"}},[Object(a["createVNode"])("span",null,"Web攻击IP TOP 5")],-1),z={key:0,class:"empty-box"},L=Object(a["createVNode"])("div",{id:"ip-top"},null,-1);function Z(e,t,o,Z,A,I){const S=Object(a["resolveComponent"])("el-breadcrumb-item"),W=Object(a["resolveComponent"])("el-breadcrumb"),P=Object(a["resolveComponent"])("el-row"),M=Object(a["resolveComponent"])("el-option"),G=Object(a["resolveComponent"])("el-select"),E=Object(a["resolveComponent"])("el-col"),q=Object(a["resolveComponent"])("el-card"),H=Object(a["resolveComponent"])("el-empty"),R=Object(a["resolveDirective"])("loading");return Object(a["openBlock"])(),Object(a["createBlock"])("div",c,[Object(a["createVNode"])(P,{class:"breadcrumb-style"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(W,{separator:"/"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(S,{to:{path:"/soc-flow-report"}},{default:Object(a["withCtx"])(()=>[i]),_:1}),Object(a["createVNode"])(S,null,{default:Object(a["withCtx"])(()=>[n]),_:1})]),_:1})]),_:1}),Object(a["withDirectives"])(Object(a["createVNode"])("div",r,[Object(a["createVNode"])(P,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(E,{span:24,style:{"margin-bottom":"15px"}},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])("div",d,[Object(a["createVNode"])(G,{modelValue:A.domain,"onUpdate:modelValue":t[1]||(t[1]=e=>A.domain=e),placeholder:"请选择",onChange:I.onChangeDomain,size:"small",style:{"margin-right":"10px"}},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(A.domainList,e=>(Object(a["openBlock"])(),Object(a["createBlock"])(M,{key:e.domain,label:e.domain,value:e.domain},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),Object(a["createVNode"])(G,{modelValue:A.timeZone,"onUpdate:modelValue":t[2]||(t[2]=e=>A.timeZone=e),placeholder:"请选择",onChange:I.onChangeTime,size:"small"},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(A.timeList,e=>(Object(a["openBlock"])(),Object(a["createBlock"])(M,{key:e.key,label:e.value,value:e.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),_:1})]),_:1}),Object(a["createVNode"])(P,{gutter:15},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(E,{span:6},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])(q,{class:"box-card",shadow:"never",style:{"background-color":"#fc8452"}},{header:Object(a["withCtx"])(()=>[l]),default:Object(a["withCtx"])(()=>[Object(a["createVNode"])("div",s,[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(A.countTotle),1)])]),_:1},512),[[R,A.loading.countTotle]])]),_:1}),Object(a["createVNode"])(E,{span:6},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])(q,{class:"box-card",shadow:"never",style:{"background-color":"#fac858"}},{header:Object(a["withCtx"])(()=>[b]),default:Object(a["withCtx"])(()=>[Object(a["createVNode"])("div",p,[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(A.apiCountTotle),1)])]),_:1},512),[[R,A.loading.apiCountTotle]])]),_:1}),Object(a["createVNode"])(E,{span:6},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])(q,{class:"box-card",shadow:"never",style:{"background-color":"#91cc75"}},{header:Object(a["withCtx"])(()=>[u]),default:Object(a["withCtx"])(()=>[Object(a["createVNode"])("div",m,[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(A.ipCountTotle),1)])]),_:1},512),[[R,A.loading.ipCountTotle]])]),_:1}),Object(a["createVNode"])(E,{span:6},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])(q,{class:"box-card",shadow:"never",style:{"background-color":"#73c0de"}},{header:Object(a["withCtx"])(()=>[h]),default:Object(a["withCtx"])(()=>[Object(a["createVNode"])("div",O,[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(A.isocodeCountTotle),1)])]),_:1},512),[[R,A.loading.isocodeCountTotle]])]),_:1})]),_:1}),Object(a["createVNode"])(P,{gutter:15,style:{"margin-top":"15px"}},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(E,{span:12},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(q,{class:"box-card",shadow:"never",style:{"background-color":"#d2f3f7"}},{header:Object(a["withCtx"])(()=>[g]),default:Object(a["withCtx"])(()=>[j]),_:1})]),_:1}),Object(a["createVNode"])(E,{span:12},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])(q,{class:"box-card-empty",shadow:"never",style:{"background-color":"#ffeaea"}},{header:Object(a["withCtx"])(()=>[f]),default:Object(a["withCtx"])(()=>[0==A.countTrend.length?(Object(a["openBlock"])(),Object(a["createBlock"])("div",_,[Object(a["createVNode"])(H,{description:"NO DATA"})])):Object(a["createCommentVNode"])("",!0),C]),_:1},512),[[R,A.loading.countTrend]])]),_:1})]),_:1}),Object(a["createVNode"])(P,{gutter:15,style:{"margin-top":"15px"}},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(E,{span:12},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])(q,{class:"box-card-empty",shadow:"never",style:{"background-color":"rgb(252 132 82 / 20%)"}},{header:Object(a["withCtx"])(()=>[T]),default:Object(a["withCtx"])(()=>[0==A.isocodeTop.length?(Object(a["openBlock"])(),Object(a["createBlock"])("div",v,[Object(a["createVNode"])(H,{description:"NO DATA"})])):Object(a["createCommentVNode"])("",!0),w]),_:1},512),[[R,A.loading.isocodeTop]])]),_:1}),Object(a["createVNode"])(E,{span:12},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])(q,{class:"box-card-empty",shadow:"never",style:{"background-color":"rgb(250 200 88 / 20%)"}},{header:Object(a["withCtx"])(()=>[y]),default:Object(a["withCtx"])(()=>[0==A.typeTop.length?(Object(a["openBlock"])(),Object(a["createBlock"])("div",N,[Object(a["createVNode"])(H,{description:"NO DATA"})])):Object(a["createCommentVNode"])("",!0),x]),_:1},512),[[R,A.loading.typeTop]])]),_:1})]),_:1}),Object(a["createVNode"])(P,{gutter:15,style:{"margin-top":"15px"}},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(E,{span:12},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])(q,{class:"box-card-empty",shadow:"never",style:{"background-color":"rgb(145 204 117 / 20%)"}},{header:Object(a["withCtx"])(()=>[V]),default:Object(a["withCtx"])(()=>[0==A.apiTop.length?(Object(a["openBlock"])(),Object(a["createBlock"])("div",k,[Object(a["createVNode"])(H,{description:"NO DATA"})])):Object(a["createCommentVNode"])("",!0),D]),_:1},512),[[R,A.loading.apiTop]])]),_:1}),Object(a["createVNode"])(E,{span:12},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])(q,{class:"box-card-empty",shadow:"never",style:{"background-color":"rgb(115 192 222 / 20%)"}},{header:Object(a["withCtx"])(()=>[B]),default:Object(a["withCtx"])(()=>[0==A.ipTop.length?(Object(a["openBlock"])(),Object(a["createBlock"])("div",z,[Object(a["createVNode"])(H,{description:"NO DATA"})])):Object(a["createCommentVNode"])("",!0),L]),_:1},512),[[R,A.loading.ipTop]])]),_:1})]),_:1})],512),[[R,A.loadingPage,void 0,{fullscreen:!0,lock:!0}]])])}var A=o("87b8"),I=o("e6ed"),S=o("362c");const W=o("6680");var P={mixins:[S["c"]],data(){return{loadingPage:!1,logSource:"",domainList:[],domain:"",timeZone:"7day",timeList:[{key:"7day",value:"7天"},{key:"30day",value:"30天"},{key:"24hour",value:"24小时"},{key:"1hour",value:"1小时"}],loading:{countTotle:!0,apiCountTotle:!0,ipCountTotle:!0,isocodeCountTotle:!0,countTrend:!0,apiTop:!0,typeTop:!0,ipTop:!0,isocodeTop:!0},countTotle:"0",apiCountTotle:"0",ipCountTotle:"0",isocodeCountTotle:"0",countTrend:[],apiTop:[],typeTop:[],ipTop:[],isocodeTop:[]}},created(){-1==location.href.indexOf("#reloaded")&&(location.href=location.href+"#reloaded",location.reload())},mounted(){this.getdomainListData(),this.getDataConf()},methods:{getdomainListData(){var e=this;Object(S["a"])("get","/waf/waf_get_domain_list",{},(function(t){e.loadingPage=!1,e.domainList=t.data.message}),(function(){e.loadingPage=!1}))},getDataConf(){var e=this;Object(S["a"])("get","/waf/waf_get_sys_log_conf",{},(function(t){e.loadingPage=!1,e.logSource=t.data.message.log_conf_remote,"false"==e.logSource?e.$message({duration:0,showClose:!0,message:"报表配置未设置日志数据来源，<a href='/#/sys-log-conf' class='error-message-btn'>请前往配置</a>",type:"warning",dangerouslyUseHTMLString:!0}):e.getData()}),(function(){e.loadingPage=!1}))},getData(){this.gatAttackGeoip(),this.getCountTotle(),this.getApiCountTotle(),this.getIsocodeCountTotle(),this.getIpCountTotle(),this.getCountTrend(),this.getApiTop(),this.getTypeTop(),this.getIpTop(),this.getIsocodeTop()},formatterIsoCode(e,t){var o=[],a=0,c=t||"default";return e&&e.length>0&&(e.forEach(e=>{for(var t=0;t<W.length;t++)e.iso_code==W[t].code&&("CN"==e.iso_code||"HK"==e.iso_code||"MO"==e.iso_code||"TW"==e.iso_code?a+=e.attack_count:o.push({name:W[t].cnName,value:e.attack_count})),e.IsoCode==W[t].code&&("CN"==e.IsoCode||"HK"==e.IsoCode||"MO"==e.IsoCode||"TW"==e.IsoCode?a+=e.attack_count:o.push({name:W[t].cnName,attack_count:e.attack_count}))}),0!=a&&"default"==c&&o.push({name:"中国",value:a}),0!=a&&"attack_count"==c&&o.push({name:"中国",attack_count:a})),o},gatAttackGeoip(){var e=this,t={time_zone:e.timeZone,domain:e.domain},o=[];""==e.domain&&(t={time_zone:e.timeZone}),Object(S["a"])("post","/soc/soc_flow_report_attack_geoip",t,(function(t){o=e.formatterIsoCode(t.data.message),e.initMap("attack-geoip",o)}),(function(){e.loading.requestCountTotle=!1}),"no-message")},initMap(e,t){A["a"].registerMap("world",I);var o={tooltip:{trigger:"item",formatter:function(e){if(e.name)return e.name+" : "+(isNaN(e.value)?0:parseInt(e.value))}},backgroundColor:"#d2f3f7",visualMap:{type:"continuous",show:!0,textStyle:{fontSize:14,color:"rgb(91 92 110)"},realtime:!1,calculable:!1,inRange:{color:["#bae7a5","rgb(247, 244, 148)","rgb(255, 178, 72)","rgb(252, 151, 175)"]}},series:[{name:"Web攻击来源地区",type:"map",map:"world",roam:!1,zoom:1.2,itemStyle:{areaColor:"rgb(114, 204, 255)",borderWidth:.5,borderColor:"#fff",borderType:"solid"},emphasis:{itemStyle:{areaColor:"#ff5722",label:{show:!0}}},label:{show:!1},data:t,nameMap:S["d"]}]};this.buildChart(e,o)},getCountTotle(){var e=this;e.loading.countTotle=!0;var t="/soc/soc_flow_report_attack_count_total",o={time_zone:e.timeZone,domain:e.domain};""==e.domain&&(o={time_zone:e.timeZone}),Object(S["a"])("post",t,o,(function(t){e.countTotle=t.data.attack_count,e.loading.countTotle=!1}),(function(){e.loading.countTotle=!1}),"no-message")},getApiCountTotle(){var e=this;e.loading.apiCountTotle=!0;var t="/soc/soc_flow_report_attack_api_count_total",o={time_zone:e.timeZone,domain:e.domain};""==e.domain&&(o={time_zone:e.timeZone}),Object(S["a"])("post",t,o,(function(t){e.apiCountTotle=t.data.attack_count,e.loading.apiCountTotle=!1}),(function(){e.loading.apiCountTotle=!1}),"no-message")},getIsocodeCountTotle(){var e=this;e.loading.isocodeCountTotle=!0;var t="/soc/soc_flow_report_attack_isocode_count_total",o={time_zone:e.timeZone,domain:e.domain};""==e.domain&&(o={time_zone:e.timeZone}),Object(S["a"])("post",t,o,(function(t){e.isocodeCountTotle=t.data.attack_count,e.loading.isocodeCountTotle=!1}),(function(){e.loading.isocodeCountTotle=!1}),"no-message")},getIpCountTotle(){var e=this;e.loading.ipCountTotle=!0;var t="/soc/soc_flow_report_attack_ip_count_total",o={time_zone:e.timeZone,domain:e.domain};""==e.domain&&(o={time_zone:e.timeZone}),Object(S["a"])("post",t,o,(function(t){e.ipCountTotle=t.data.attack_count,e.loading.ipCountTotle=!1}),(function(){e.loading.ipCountTotle=!1}),"no-message")},getCountTrend(){var e=this;e.loading.requestCountTrend=!0;var t="/soc/soc_flow_report_attack_count_trend",o={time_zone:e.timeZone,domain:e.domain};""==e.domain&&(o={time_zone:e.timeZone}),Object(S["a"])("post",t,o,(function(t){e.countTrend=t.data.attack_trend,e.loading.countTrend=!1,e.initLineChart(e.countTrend,"count-trend")}),(function(){e.loading.countTrend=!1}),"no-message")},getApiTop(){var e=this;e.loading.apiTop=!0;var t="/soc/soc_flow_report_attack_api_top",o={time_zone:e.timeZone,domain:e.domain};""==e.domain&&(o={time_zone:e.timeZone}),Object(S["a"])("post",t,o,(function(t){e.loading.apiTop=!1,e.apiTop=t.data.result,e.initBarChart(e.apiTop,"api-top","api")}),(function(){e.loading.apiTop=!1}),"no-message")},getTypeTop(){var e=this;e.loading.typeTop=!0;var t="/soc/soc_flow_report_attack_type_top",o={time_zone:e.timeZone,domain:e.domain};""==e.domain&&(o={time_zone:e.timeZone}),Object(S["a"])("post",t,o,(function(t){e.loading.typeTop=!1,e.typeTop=t.data.result,e.initBarChart(e.typeTop,"type-top","WafPolicy")}),(function(){e.loading.typeTop=!1}),"no-message")},getIpTop(){var e=this;e.loading.ipTop=!0;var t="/soc/soc_flow_report_attack_ip_top",o={time_zone:e.timeZone,domain:e.domain};""==e.domain&&(o={time_zone:e.timeZone}),Object(S["a"])("post",t,o,(function(t){e.loading.ipTop=!1,e.ipTop=t.data.result,e.initBarChart(e.ipTop,"ip-top","SrcIP")}),(function(){e.loading.ipTop=!1}),"no-message")},getIsocodeTop(){var e=this;e.loading.isocodeTop=!0;var t="/soc/soc_flow_report_attack_isocode_top",o={time_zone:e.timeZone,domain:e.domain};""==e.domain&&(o={time_zone:e.timeZone}),Object(S["a"])("post",t,o,(function(t){e.loading.isocodeTop=!1,e.isocodeTop=e.formatterIsoCode(t.data.result,"attack_count"),e.initBarChart(e.isocodeTop,"isocode-top","name")}),(function(){e.loading.isocodeTop=!1}),"no-message")},onChangeDomain(e){var t={};t=this.domainList.find(t=>t.domain===e),this.domain=t.domain,this.getData()},onChangeTime(e){var t={};t=this.timeList.find(t=>t.key===e),this.timeZone=t.key,this.getData()},initLineChart(e,t){var o=[],a=[];e.forEach(e=>{a.push(e.attack_count),o.push(e.time_slot)});var c={color:["#73c0de"],tooltip:{trigger:"axis"},xAxis:{type:"category",data:o,show:!1,boundaryGap:!1,axisLabel:{formatter:function(e){return e.length>20?e.slice(0,20)+"...":e}}},yAxis:{type:"value"},series:[{data:a,type:"line",smooth:!0,areaStyle:{color:new A["a"].graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#73c0de"},{offset:.5,color:"#9fd8ef"},{offset:1,color:"#ffeaea"}])}}]};this.buildChart(t,c)},initBarChart(e,t,o){var a=[],c=[];e.forEach(e=>{c.push(e.attack_count),a.push(e[o])});var i={color:["#73c0de"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:"2%",left:"3%",right:"8%",bottom:"3%",containLabel:!0},xAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},yAxis:{type:"category",data:a,inverse:!0,splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},barGap:50,axisLabel:{show:!0,inside:!0,interval:0,color:"#ababab",verticalAlign:"bottom",fontSize:14,align:"left",padding:[0,0,10,-5]}},series:[{data:c,type:"bar",realtimeSort:!0,barWidth:10,barGap:50,smooth:!0,valueAnimation:!0,showBackground:!0,label:{interval:0,show:!0,position:"right",valueAnimation:!0,color:"#177ed0",fontSize:12},emphasis:{itemStyle:{borderRadius:7}},itemStyle:{borderRadius:7,color:new A["a"].graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#177ed0"},{offset:1,color:"#6cd1ff"}])}}]};this.buildChart(t,i)},buildChart(e,t){if(document.querySelector("#"+e)){var o=t||[],a=A["a"].init(document.getElementById(e));o&&"object"===typeof o&&a.setOption(o,!0)}}}},M=(o("e9e5"),o("d959")),G=o.n(M);const E=G()(P,[["render",Z]]);t["default"]=E},e9e5:function(e,t,o){"use strict";o("2b8e")}}]);
//# sourceMappingURL=chunk-7ad3a15c.a5a5d024.js.map