{"version":3,"sources":["webpack:///./src/components/flow-ip-region-block.vue?de50","webpack:///./src/components/flow-ip-region-block.vue","webpack:///./src/components/flow-ip-region-block.vue?d7e3"],"names":["class","_createVNode","_createBlock","_hoisted_1","_component_el_row","_component_el_breadcrumb","separator","_component_el_breadcrumb_item","to","path","$data","domain","_component_el_col","span","_component_el_form","model","flowIpRegionBlockForm","rules","$options","ref","label-width","label-position","_component_el_form_item","label","_component_el_switch","ip_region_block","$event","active-text","inactive-text","active-value","inactive-value","_component_el_checkbox","checkAll","onChange","handleCheckAllChange","_component_el_tabs","activeName","_Fragment","_renderList","countries","item","kinds","_component_el_tab_pane","name","key","couns","kind","_toDisplayString","country","code","selectCountry","checked","blackCountryList","tag","_component_el_tag","closable","onClose","handleClose","length","prop","_component_el_select","block_action","placeholder","_cache","onChangeRuleAction","ruleAction","_component_el_option","value","action_value","optionsBotCheck","_hoisted_6","type","justify","href","_component_el_button","onClick","onClickflowIpRegionBlockFormSubmit","loading","loadingPage","data","require","REGEXP","0","1","2","3","4","5","6","7","8","mixins","mixin","this","$route","params","geoipForm","computed","required","message","trigger","mounted","route","useRoute","getData","formatCountry","methods","t","getUrl","oData","JXAjax","response","stringToArr","region_white_list","postUrl","jsonToArr","$refs","validate","valid","window","location","ABC","DEF","GHI","JKL","MN","OPQ","RST","UVW","XYZ","keys","Object","initial","forEach","index","getInitial","i","test","pushCountries","cnSpell","substr","arr","push","cnName","event","splice","scrollTop","scrollY","document","querySelector","click","scrollTo","handleAdd","arrToString","countriesString","arrStr","__exports__","render"],"mappings":"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","file":"static/index/js/chunk-2d870016.c9db6a07.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./flow-ip-region-block.vue?vue&type=style&index=0&id=5db34e5f&lang=css\"","<template>\r\n  <div class=\"page-owasp-wrap\">\r\n    <el-row class=\"breadcrumb-style\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item :to=\"{ path: '/' }\">网站防护</el-breadcrumb-item>\r\n        <el-breadcrumb-item :to=\"{ path: '/protection/' + domain }\">防护配置</el-breadcrumb-item>\r\n        <el-breadcrumb-item>IP区域封禁</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </el-row>\r\n\r\n    <el-row class=\"container-style\">\r\n      <el-col :span=\"24\" v-loading.fullscreen.lock=\"loadingPage\">\r\n        <div>\r\n          <el-form :model=\"flowIpRegionBlockForm\" :rules=\"rules\" ref=\"flowIpRegionBlockForm\" label-width=\"180px\"\r\n            class=\"flow-ip-region-block-form\" label-position=\"left\">\r\n            <el-form-item label=\"IP区域封禁状态\">\r\n              <el-switch v-model=\"flowIpRegionBlockForm.ip_region_block\" active-text=\"开启\" inactive-text=\"关闭\"\r\n                active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n            </el-form-item>\r\n            <div v-show=\"flowIpRegionBlockForm.ip_region_block == 'true'\">\r\n\r\n              <el-form-item label=\"白名单区域\">\r\n                <el-checkbox v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>\r\n                <el-tabs v-model=\"activeName\" class=\"geoip-select-country\">\r\n                  <el-tab-pane v-for=\"(item, kinds) in countries\" :label=\"kinds\" :name=\"kinds\" :key=\"kinds\">\r\n                    <dl v-for=\"(couns, kind) in item\" :key=\"kind\">\r\n                      <dt>{{ kind }}</dt>\r\n                      <dd>\r\n                        <el-checkbox v-for=\"country in couns\" :label=\"country.name\" :key=\"country.code\"\r\n                          @change=\"selectCountry($event, country)\" v-model=\"country.checked\"\r\n                          :class=\"'country-' + country.code\">{{ country.name }}</el-checkbox>\r\n                      </dd>\r\n                    </dl>\r\n                  </el-tab-pane>\r\n                </el-tabs>\r\n              </el-form-item>\r\n              <el-form-item label=\"白名单区域\" v-show=\"blackCountryList.length > 0\">\r\n                <el-tag v-for=\"tag in blackCountryList\" :key=\"tag.code\" closable @close=\"handleClose(tag)\">{{ tag.name\r\n                  }}</el-tag>\r\n              </el-form-item>\r\n            </div>\r\n            <el-form-item label=\"执行动作\" prop=\"block_action\">\r\n              <el-select v-model=\"flowIpRegionBlockForm.block_action\" placeholder=\"请选择\" @change=\"onChangeRuleAction()\">\r\n                <el-option v-for=\"item in ruleAction\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item v-if=\"flowIpRegionBlockForm.block_action == 'bot_check'\">\r\n              <el-select v-model=\"action_value\" placeholder=\"请选择\">\r\n                <el-option v-for=\"item in optionsBotCheck\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n                </el-option>\r\n              </el-select>\r\n              <p class=\"form-info-color\">\r\n                说明：标准模式无需人机交互\r\n              </p>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n\r\n        <el-row type=\"flex\" class=\"margin-border\" justify=\"space-between\">\r\n          <el-col :span=\"12\">\r\n            <a class=\"el-button el-button--primary is-plain\" :href=\"'/#/protection/' + domain\">返回</a>\r\n          </el-col>\r\n          <el-col :span=\"12\" class=\"text-align-right\">\r\n            <el-button type=\"primary\" @click=\"onClickflowIpRegionBlockFormSubmit('flowIpRegionBlockForm')\"\r\n              :loading=\"loading\">保存</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mixin, JXAjax } from \"../assets/scripts/common\";\r\nimport { useRoute } from 'vue-router'\r\nconst data = require('../assets/scripts/country.json');\r\nconst REGEXP = {\r\n  0: /^[A-C]$/i,\r\n  1: /^[D-F]$/i,\r\n  2: /^[G-I]$/i,\r\n  3: /^[J-L]$/i,\r\n  4: /^[M-N]$/i,\r\n  5: /^[O-Q]$/i,\r\n  6: /^[R-T]$/i,\r\n  7: /^[U-W]$/i,\r\n  8: /^[X-Z]$/i\r\n};\r\n\r\nexport default {\r\n  mixins: [mixin],\r\n  data() {\r\n    return {\r\n      loadingPage: false,\r\n      loading: false,\r\n      domain: this.$route.params.domain,\r\n      flowIpRegionBlockForm: {},\r\n      ruleAction: [\r\n        { value: \"block\", label: \"阻断请求\" },\r\n        { value: \"reject_response\", label: \"拒绝响应\" },\r\n        { value: \"watch\", label: \"观察模式\" },\r\n        { value: \"bot_check\", label: \"人机识别\" },\r\n      ],\r\n      optionsBotCheck: [\r\n        { value: \"standard\", label: \"标准\" },\r\n        { value: \"slipper\", label: \"滑块\" },\r\n        { value: \"image\", label: \"图片验证码\" },\r\n      ],\r\n      data: data,\r\n      countries: {},\r\n      activeName: 'ABC',\r\n      blackCountryList: [],\r\n      geoipForm: {\r\n       \r\n      },\r\n      action_value:\"\",\r\n      checkAll: false,\r\n    };\r\n  },\r\n  computed: {\r\n    rules() {\r\n      return {\r\n        action_value: [\r\n          {\r\n            required: true, message: '请选择', trigger: 'change'\r\n          }\r\n        ],\r\n        block_action: [\r\n          {\r\n            required: true,\r\n            message: '请选择执行动作',\r\n            trigger: 'change'\r\n          },\r\n        ],\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    const route = useRoute()\r\n    this.domain = route.params.domain;\r\n    this.getData();\r\n    this.formatCountry();\r\n  },\r\n  methods: {\r\n    getData() {\r\n      var t = this;\r\n      var getUrl = \"/waf/waf_get_flow_ip_region_block\";\r\n      var oData = { domain: t.domain };\r\n      t.blackCountryList = [];\r\n      JXAjax(\r\n        \"post\",\r\n        getUrl,\r\n        oData,\r\n        function (response) {\r\n          t.loadingPage = false;\r\n          t.flowIpRegionBlockForm = response.data.message;\r\n\r\n          //执行动作\r\n          if (t.flowIpRegionBlockForm.block_action == \"bot_check\") {\r\n            t.action_value = t.flowIpRegionBlockForm.action_value;\r\n          }\r\n          //白名单区域\r\n          t.stringToArr(t.flowIpRegionBlockForm.region_white_list)\r\n        },\r\n        function () {\r\n          t.loadingPage = false;\r\n        },\r\n        \"no-message\"\r\n      );\r\n    },\r\n    onChangeRuleAction() {\r\n      var t = this;\r\n      t.action_value = \"\";\r\n    },\r\n    onClickflowIpRegionBlockFormSubmit(flowIpRegionBlockForm) {\r\n      var t = this;\r\n      var postUrl = \"/waf/waf_edit_flow_ip_region_block\";\r\n      this.flowIpRegionBlockForm.domain = t.domain;\r\n      this.flowIpRegionBlockForm.region_white_list = t.jsonToArr(t.blackCountryList);\r\n      if (t.flowIpRegionBlockForm.block_action != \"bot_check\") {\r\n        t.flowIpRegionBlockForm.action_value = \"\";\r\n      } else { \r\n        t.flowIpRegionBlockForm.action_value = t.action_value;\r\n      }\r\n      this.$refs[flowIpRegionBlockForm].validate((valid) => {\r\n        if (valid) {\r\n          t.loading = true;\r\n          JXAjax(\r\n            \"post\",\r\n            postUrl,\r\n            t.flowIpRegionBlockForm,\r\n            function (response) {\r\n              t.loading = false;\r\n              window.location.href = \"/#/flow-ip-region-block/\" + t.domain;\r\n            },\r\n            function () {\r\n              t.loading = false;\r\n            }\r\n          );\r\n        }\r\n      });\r\n    },\r\n    formatCountry() {\r\n      let countries = {\r\n        ABC: {},\r\n        DEF: {},\r\n        GHI: {},\r\n        JKL: {},\r\n        MN: {},\r\n        OPQ: {},\r\n        RST: {},\r\n        UVW: {},\r\n        XYZ: {}\r\n      };\r\n\r\n      let keys = Object.keys(countries);\r\n      let initial = '';\r\n      this.data.forEach((country, index) => {\r\n        initial = this.getInitial(country);\r\n\r\n        for (var i = 0; i < keys.length; i++) {\r\n          if (REGEXP[i].test(initial)) {\r\n            if (!countries[keys[i]][initial]) countries[keys[i]][initial] = [];\r\n            this.pushCountries(countries[keys[i]][initial], country);\r\n            break;\r\n          }\r\n        }\r\n      });\r\n      this.countries = countries;\r\n    },\r\n    // 根据语言获取国家首字母，用来进行国家分类\r\n    getInitial(country) {\r\n      let initial = '';\r\n      initial = country.cnSpell.substr(0, 1);\r\n      return initial;\r\n    },\r\n\r\n    // 根据语言向countries中push country\r\n    pushCountries(arr, country) {\r\n      if (this.checkAll) {\r\n        arr.push({\r\n          name: country.cnName,\r\n          code: country.code,\r\n          checked: true\r\n        });\r\n      } else {\r\n        arr.push({\r\n          name: country.cnName,\r\n          code: country.code,\r\n          checked: false\r\n        });\r\n      }\r\n    },\r\n\r\n    selectCountry(event, country) {\r\n      if (event == true) {\r\n        country.checked = true;\r\n        this.blackCountryList.push(country)\r\n      } else {\r\n        country.checked = false;\r\n        for (var i = 0; i < this.blackCountryList.length; i++) {\r\n          if (this.blackCountryList[i].code == country.code) {\r\n            this.blackCountryList.splice(i, 1);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (this.blackCountryList.length == this.data.length) {\r\n        this.checkAll = true\r\n      } else {\r\n        this.checkAll = false\r\n      }\r\n    },\r\n    handleClose(tag) {\r\n      let scrollTop = window.scrollY;\r\n      document.querySelector('.country-' + tag.code).click();\r\n      window.scrollTo(0, scrollTop)\r\n    },\r\n\r\n    handleAdd(tag) {\r\n      let scrollTop = window.scrollY;\r\n      document.querySelector('.country-' + tag.code).click();\r\n      window.scrollTo(0, scrollTop)\r\n    },\r\n\r\n    handleCheckAllChange(event) {\r\n      this.blackCountryList = [];\r\n      for (var i = 0; i < this.data.length; i++) {\r\n        var item = {};\r\n        item.code = this.data[i].code;\r\n        item.name = this.data[i].cnName;\r\n        this.selectCountry(event, item)\r\n      }\r\n      this.formatCountry();\r\n    },\r\n    jsonToArr(data) { \r\n      let t = this;\r\n      let arr = [];\r\n      data.forEach((country, index) => {\r\n        arr.push(country.code)\r\n      })\r\n      return arr;\r\n    },\r\n    arrToString(arr) {\r\n      let countriesString = ''\r\n      arr.forEach((item) => {\r\n        countriesString = countriesString + '|' + item.code;\r\n      });\r\n      countriesString = countriesString.substr(1);\r\n      return countriesString;\r\n    },\r\n    stringToArr(arr) {\r\n      let t = this;\r\n      let arrStr = arr || [];\r\n      this.data.forEach((country, index) => {\r\n        for (var i = 0; i < arrStr.length; i++) {\r\n          var item = {};\r\n          if (country.code == arrStr[i]) {\r\n            item.name = country.cnName;\r\n            item.code = country.code;\r\n            item.checked = true;\r\n            t.handleAdd(item)\r\n            break;\r\n          }\r\n        }\r\n      })\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.page-owasp-wrap {\r\n  max-width: 800px;\r\n  min-width: 400px;\r\n}\r\n\r\n.flow-ip-region-block-form  .el-select {\r\n  width: 100%;\r\n}\r\n.flow-ip-region-block-form .el-tag {\r\n  margin-right: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./flow-ip-region-block.vue?vue&type=template&id=5db34e5f\"\nimport script from \"./flow-ip-region-block.vue?vue&type=script&lang=js\"\nexport * from \"./flow-ip-region-block.vue?vue&type=script&lang=js\"\n\nimport \"./flow-ip-region-block.vue?vue&type=style&index=0&id=5db34e5f&lang=css\"\n\nimport exportComponent from \"D:\\\\work\\\\jxwaf-2023\\\\jxwaf-base-2023\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}