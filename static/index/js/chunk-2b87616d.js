(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b87616d"],{"107c":function(e,t,o){var n=o("d039");e.exports=n((function(){var e=RegExp("(?<a>b)","string".charAt(5));return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1276:function(e,t,o){"use strict";var n=o("d784"),c=o("44e7"),r=o("825a"),i=o("1d80"),a=o("4840"),l=o("8aa5"),s=o("50c4"),u=o("577e"),d=o("14c3"),p=o("9263"),b=o("9f7f"),m=o("d039"),f=b.UNSUPPORTED_Y,h=[].push,O=Math.min,j=4294967295,g=!m((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var o="ab".split(e);return 2!==o.length||"a"!==o[0]||"b"!==o[1]}));n("split",(function(e,t,o){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,o){var n=u(i(this)),r=void 0===o?j:o>>>0;if(0===r)return[];if(void 0===e)return[n];if(!c(e))return t.call(n,e,r);var a,l,s,d=[],b=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,f=new RegExp(e.source,b+"g");while(a=p.call(f,n)){if(l=f.lastIndex,l>m&&(d.push(n.slice(m,a.index)),a.length>1&&a.index<n.length&&h.apply(d,a.slice(1)),s=a[0].length,m=l,d.length>=r))break;f.lastIndex===a.index&&f.lastIndex++}return m===n.length?!s&&f.test("")||d.push(""):d.push(n.slice(m)),d.length>r?d.slice(0,r):d}:"0".split(void 0,0).length?function(e,o){return void 0===e&&0===o?[]:t.call(this,e,o)}:t,[function(t,o){var c=i(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,c,o):n.call(u(c),t,o)},function(e,c){var i=r(this),p=u(e),b=o(n,i,p,c,n!==t);if(b.done)return b.value;var m=a(i,RegExp),h=i.unicode,g=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(f?"g":"y"),V=new m(f?"^(?:"+i.source+")":i,g),x=void 0===c?j:c>>>0;if(0===x)return[];if(0===p.length)return null===d(V,p)?[p]:[];var _=0,k=0,v=[];while(k<p.length){V.lastIndex=f?0:k;var w,y=d(V,f?p.slice(k):p);if(null===y||(w=O(s(V.lastIndex+(f?k:0)),p.length))===_)k=l(p,k,h);else{if(v.push(p.slice(_,k)),v.length===x)return v;for(var C=1;C<=y.length-1;C++)if(v.push(y[C]),v.length===x)return v;k=_=w}}return v.push(p.slice(_)),v}]}),!g,f)},"14c3":function(e,t,o){var n=o("c6b6"),c=o("9263");e.exports=function(e,t){var o=e.exec;if("function"===typeof o){var r=o.call(e,t);if("object"!==typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return c.call(e,t)}},"1dde":function(e,t,o){var n=o("d039"),c=o("b622"),r=o("2d00"),i=c("species");e.exports=function(e){return r>=51||!n((function(){var t=[],o=t.constructor={};return o[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2532:function(e,t,o){"use strict";var n=o("23e7"),c=o("5a34"),r=o("1d80"),i=o("577e"),a=o("ab13");n({target:"String",proto:!0,forced:!a("includes")},{includes:function(e){return!!~i(r(this)).indexOf(i(c(e)),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,o){var n=o("861d"),c=o("c6b6"),r=o("b622"),i=r("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==c(e))}},"4de4":function(e,t,o){"use strict";var n=o("23e7"),c=o("b727").filter,r=o("1dde"),i=r("filter");n({target:"Array",proto:!0,forced:!i},{filter:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}})},"5a34":function(e,t,o){var n=o("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},8418:function(e,t,o){"use strict";var n=o("a04b"),c=o("9bf2"),r=o("5c6c");e.exports=function(e,t,o){var i=n(t);i in e?c.f(e,i,r(0,o)):e[i]=o}},"8aa5":function(e,t,o){"use strict";var n=o("6547").charAt;e.exports=function(e,t,o){return t+(o?n(e,t).length:1)}},9263:function(e,t,o){"use strict";var n=o("577e"),c=o("ad6d"),r=o("9f7f"),i=o("5692"),a=o("7c73"),l=o("69f3").get,s=o("fce3"),u=o("107c"),d=RegExp.prototype.exec,p=i("native-string-replace",String.prototype.replace),b=d,m=function(){var e=/a/,t=/b*/g;return d.call(e,"a"),d.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),f=r.UNSUPPORTED_Y||r.BROKEN_CARET,h=void 0!==/()??/.exec("")[1],O=m||h||f||s||u;O&&(b=function(e){var t,o,r,i,s,u,O,j=this,g=l(j),V=n(e),x=g.raw;if(x)return x.lastIndex=j.lastIndex,t=b.call(x,V),j.lastIndex=x.lastIndex,t;var _=g.groups,k=f&&j.sticky,v=c.call(j),w=j.source,y=0,C=V;if(k&&(v=v.replace("y",""),-1===v.indexOf("g")&&(v+="g"),C=V.slice(j.lastIndex),j.lastIndex>0&&(!j.multiline||j.multiline&&"\n"!==V.charAt(j.lastIndex-1))&&(w="(?: "+w+")",C=" "+C,y++),o=new RegExp("^(?:"+w+")",v)),h&&(o=new RegExp("^"+w+"$(?!\\s)",v)),m&&(r=j.lastIndex),i=d.call(k?o:j,C),k?i?(i.input=i.input.slice(y),i[0]=i[0].slice(y),i.index=j.lastIndex,j.lastIndex+=i[0].length):j.lastIndex=0:m&&i&&(j.lastIndex=j.global?i.index+i[0].length:r),h&&i&&i.length>1&&p.call(i[0],o,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i&&_)for(i.groups=u=a(null),s=0;s<_.length;s++)O=_[s],u[O[0]]=i[O[1]];return i}),e.exports=b},"9f7f":function(e,t,o){var n=o("d039"),c=function(e,t){return RegExp(e,t)};t.UNSUPPORTED_Y=n((function(){var e=c("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=c("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a15b:function(e,t,o){"use strict";var n=o("23e7"),c=o("44ad"),r=o("fc6a"),i=o("a640"),a=[].join,l=c!=Object,s=i("join",",");n({target:"Array",proto:!0,forced:l||!s},{join:function(e){return a.call(r(this),void 0===e?",":e)}})},a434:function(e,t,o){"use strict";var n=o("23e7"),c=o("23cb"),r=o("a691"),i=o("50c4"),a=o("7b0b"),l=o("65f0"),s=o("8418"),u=o("1dde"),d=u("splice"),p=Math.max,b=Math.min,m=9007199254740991,f="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var o,n,u,d,h,O,j=a(this),g=i(j.length),V=c(e,g),x=arguments.length;if(0===x?o=n=0:1===x?(o=0,n=g-V):(o=x-2,n=b(p(r(t),0),g-V)),g+o-n>m)throw TypeError(f);for(u=l(j,n),d=0;d<n;d++)h=V+d,h in j&&s(u,d,j[h]);if(u.length=n,o<n){for(d=V;d<g-n;d++)h=d+n,O=d+o,h in j?j[O]=j[h]:delete j[O];for(d=g;d>g-n+o;d--)delete j[d-1]}else if(o>n)for(d=g-n;d>V;d--)h=d+n-1,O=d+o-1,h in j?j[O]=j[h]:delete j[O];for(d=0;d<o;d++)j[d+V]=arguments[d+2];return j.length=g-n+o,u}})},a751:function(e,t,o){"use strict";o("c3dc")},ab13:function(e,t,o){var n=o("b622"),c=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(o){try{return t[c]=!1,"/./"[e](t)}catch(n){}}return!1}},ac1f:function(e,t,o){"use strict";var n=o("23e7"),c=o("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},ad6d:function(e,t,o){"use strict";var n=o("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},c3dc:function(e,t,o){},caad:function(e,t,o){"use strict";var n=o("23e7"),c=o("4d64").includes,r=o("44d2");n({target:"Array",proto:!0},{includes:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},d784:function(e,t,o){"use strict";o("ac1f");var n=o("6eeb"),c=o("9263"),r=o("d039"),i=o("b622"),a=o("9112"),l=i("species"),s=RegExp.prototype;e.exports=function(e,t,o,u){var d=i(e),p=!r((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),b=p&&!r((function(){var t=!1,o=/a/;return"split"===e&&(o={},o.constructor={},o.constructor[l]=function(){return o},o.flags="",o[d]=/./[d]),o.exec=function(){return t=!0,null},o[d](""),!t}));if(!p||!b||o){var m=/./[d],f=t(d,""[e],(function(e,t,o,n,r){var i=t.exec;return i===c||i===s.exec?p&&!r?{done:!0,value:m.call(t,o,n)}:{done:!0,value:e.call(o,t,n)}:{done:!1}}));n(String.prototype,e,f[0]),n(s,d,f[1])}u&&a(s[d],"sham",!0)}},ef74:function(e,t,o){"use strict";o.r(t);o("4de4"),o("caad"),o("2532");var n=o("7a23"),c={class:"domain-search-input"},r=Object(n["createTextVNode"])("添加网站"),i={class:"demo-block"},a={key:0},l={key:1},s=Object(n["createTextVNode"])(" 语义防护引擎： "),u={key:0},d=Object(n["createVNode"])("i",{class:"el-icon-circle-check icon-success"},null,-1),p=Object(n["createTextVNode"])("已开启 "),b={key:1},m=Object(n["createVNode"])("i",{class:"el-icon-circle-close icon-error"},null,-1),f=Object(n["createTextVNode"])("未开启 "),h=Object(n["createTextVNode"])(" Web防护规则： "),O={key:0},j=Object(n["createVNode"])("i",{class:"el-icon-circle-check icon-success"},null,-1),g=Object(n["createTextVNode"])("已开启 "),V={key:1},x=Object(n["createVNode"])("i",{class:"el-icon-circle-close icon-error"},null,-1),_=Object(n["createTextVNode"])("未开启 "),k=Object(n["createTextVNode"])(" 流量防护引擎： "),v={key:0},w=Object(n["createVNode"])("i",{class:"el-icon-circle-check icon-success"},null,-1),y=Object(n["createTextVNode"])("已开启 "),C={key:1},N=Object(n["createVNode"])("i",{class:"el-icon-circle-close icon-error"},null,-1),T=Object(n["createTextVNode"])("未开启 "),I=Object(n["createTextVNode"])(" 流量防护规则： "),F={key:0},B=Object(n["createVNode"])("i",{class:"el-icon-circle-check icon-success"},null,-1),L=Object(n["createTextVNode"])("已开启 "),S={key:1},P=Object(n["createVNode"])("i",{class:"el-icon-circle-close icon-error"},null,-1),D=Object(n["createTextVNode"])("未开启 "),E=Object(n["createTextVNode"])(" 网站名单管理： "),U={key:0},R=Object(n["createVNode"])("i",{class:"el-icon-circle-check icon-success"},null,-1),A=Object(n["createTextVNode"])("已开启 "),$={key:1},H=Object(n["createVNode"])("i",{class:"el-icon-circle-close icon-error"},null,-1),z=Object(n["createTextVNode"])("未开启 "),q=Object(n["createTextVNode"])("网站配置"),K=Object(n["createTextVNode"])("防护配置 "),M=Object(n["createVNode"])("p",null,"确定删除吗？",-1),Y={style:{"text-align":"right",margin:"0"}},J=Object(n["createTextVNode"])("取消"),W=Object(n["createTextVNode"])("确定 "),G=Object(n["createTextVNode"])("删除"),Q=Object(n["createVNode"])("span",null,"请先完成初使化",-1),X={class:"dialog-footer"},Z=Object(n["createTextVNode"])("初始化"),ee={key:2,class:"form-info-color"},te={key:0},oe=Object(n["createVNode"])("p",{class:"form-info-color"}," （开启后，http请求将显示为https，默认跳转到443端口） ",-1),ne=Object(n["createVNode"])("i",{class:"el-icon-plus"},null,-1),ce=Object(n["createVNode"])("p",{class:"form-info-color"}," （支持ip和域名，域名需要省略 https:// 或 http://） ",-1),re=Object(n["createTextVNode"])("http"),ie=Object(n["createTextVNode"])("https"),ae=Object(n["createTextVNode"])("取消"),le=Object(n["createTextVNode"])("确定");function se(e,t){var o=Object(n["resolveComponent"])("el-input"),se=Object(n["resolveComponent"])("el-button"),ue=Object(n["resolveComponent"])("el-row"),de=Object(n["resolveComponent"])("el-table-column"),pe=Object(n["resolveComponent"])("el-popover"),be=Object(n["resolveComponent"])("el-table"),me=Object(n["resolveComponent"])("el-col"),fe=Object(n["resolveComponent"])("el-dialog"),he=Object(n["resolveComponent"])("el-form-item"),Oe=Object(n["resolveComponent"])("el-checkbox"),je=Object(n["resolveComponent"])("el-checkbox-group"),ge=Object(n["resolveComponent"])("el-switch"),Ve=Object(n["resolveComponent"])("el-option"),xe=Object(n["resolveComponent"])("el-select"),_e=Object(n["resolveComponent"])("el-tab-pane"),ke=Object(n["resolveComponent"])("el-tabs"),ve=Object(n["resolveComponent"])("el-tag"),we=Object(n["resolveComponent"])("el-radio"),ye=Object(n["resolveComponent"])("el-form"),Ce=Object(n["resolveDirective"])("loading");return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(ue,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(me,{span:24},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(ue,{class:"text-align-right"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",c,[Object(n["createVNode"])(o,{placeholder:"请输入网站名进行搜索","prefix-icon":"el-icon-search",modelValue:e.domainSearch,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.domainSearch=t})},null,8,["modelValue"])]),Object(n["createVNode"])(se,{type:"primary",onClick:t[2]||(t[2]=function(t){return e.onClickCreateDomain()})},{default:Object(n["withCtx"])((function(){return[r]})),_:1})]})),_:1}),Object(n["createVNode"])("div",i,[Object(n["createVNode"])(be,{data:e.tableData.filter((function(t){return!e.domainSearch||t.domain.toLowerCase().includes(e.domainSearch.toLowerCase())})),style:{width:"100%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(de,{prop:"domain",label:"网站"}),Object(n["createVNode"])(de,{prop:"protocol",label:"协议"},{default:Object(n["withCtx"])((function(e){return["true"==e.row.http?(Object(n["openBlock"])(),Object(n["createBlock"])("p",a,"http")):Object(n["createCommentVNode"])("",!0),"true"==e.row.https?(Object(n["openBlock"])(),Object(n["createBlock"])("p",l,"https")):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])(de,{prop:"protection",label:"防护设置"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])("p",null,[s,"true"==e.row.web_engine_protection?(Object(n["openBlock"])(),Object(n["createBlock"])("span",u,[d,p])):Object(n["createCommentVNode"])("",!0),"false"==e.row.web_engine_protection?(Object(n["openBlock"])(),Object(n["createBlock"])("span",b,[m,f])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])("p",null,[h,"true"==e.row.web_rule_protection?(Object(n["openBlock"])(),Object(n["createBlock"])("span",O,[j,g])):Object(n["createCommentVNode"])("",!0),"false"==e.row.web_rule_protection?(Object(n["openBlock"])(),Object(n["createBlock"])("span",V,[x,_])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])("p",null,[k,"true"==e.row.flow_engine_protection?(Object(n["openBlock"])(),Object(n["createBlock"])("span",v,[w,y])):Object(n["createCommentVNode"])("",!0),"false"==e.row.flow_engine_protection?(Object(n["openBlock"])(),Object(n["createBlock"])("span",C,[N,T])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])("p",null,[I,"true"==e.row.flow_rule_protection?(Object(n["openBlock"])(),Object(n["createBlock"])("span",F,[B,L])):Object(n["createCommentVNode"])("",!0),"false"==e.row.flow_rule_protection?(Object(n["openBlock"])(),Object(n["createBlock"])("span",S,[P,D])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])("p",null,[E,"true"==e.row.name_list?(Object(n["openBlock"])(),Object(n["createBlock"])("span",U,[R,A])):Object(n["createCommentVNode"])("",!0),"false"==e.row.name_list?(Object(n["openBlock"])(),Object(n["createBlock"])("span",$,[H,z])):Object(n["createCommentVNode"])("",!0)])]})),_:1}),Object(n["createVNode"])(de,{label:"操作",align:"right"},{default:Object(n["withCtx"])((function(t){return[Object(n["createVNode"])(se,{size:"mini",onClick:function(o){return e.handleEdit(t.row)},class:"button-block",type:"text",loading:t.row.loading},{default:Object(n["withCtx"])((function(){return[q]})),_:2},1032,["onClick","loading"]),Object(n["createVNode"])(se,{size:"mini",onClick:function(o){return e.handleProtection(t.row)},class:"button-block",type:"text"},{default:Object(n["withCtx"])((function(){return[K]})),_:2},1032,["onClick"]),Object(n["createVNode"])(pe,{placement:"top",width:"160",modelValue:t.row.isVisiblePopover,"onUpdate:modelValue":function(e){return t.row.isVisiblePopover=e}},{reference:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(se,{type:"text",size:"mini",onClick:function(e){return t.row.isVisiblePopover=!0}},{default:Object(n["withCtx"])((function(){return[G]})),_:2},1032,["onClick"])]})),default:Object(n["withCtx"])((function(){return[M,Object(n["createVNode"])("div",Y,[Object(n["createVNode"])(se,{size:"mini",type:"text",onClick:function(e){return t.row.isVisiblePopover=!1}},{default:Object(n["withCtx"])((function(){return[J]})),_:2},1032,["onClick"]),Object(n["createVNode"])(se,{type:"primary",size:"mini",onClick:function(o){return e.handleDelete(t.row)},loading:e.loading},{default:Object(n["withCtx"])((function(){return[W]})),_:2},1032,["onClick","loading"])])]})),_:2},1032,["modelValue","onUpdate:modelValue"])]})),_:1})]})),_:1},8,["data"])])]})),_:1}),Object(n["createVNode"])(fe,{modelValue:e.dialogSysInitVisible,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.dialogSysInitVisible=t}),title:"初始化","close-on-click-modal":!1,width:"30%"},{footer:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("span",X,[Object(n["createVNode"])(se,{type:"primary",onClick:t[3]||(t[3]=function(t){return e.onClickSysInit()})},{default:Object(n["withCtx"])((function(){return[Z]})),_:1})])]})),default:Object(n["withCtx"])((function(){return[Q]})),_:1},8,["modelValue"]),Object(n["createVNode"])(fe,{title:e.domainTitle,modelValue:e.dialogDomainFormVisible,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.dialogDomainFormVisible=t}),width:"520px","close-on-click-modal":!1,onClosed:e.dialogClose},{footer:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(se,{onClick:t[17]||(t[17]=function(t){return e.dialogDomainFormVisible=!1})},{default:Object(n["withCtx"])((function(){return[ae]})),_:1}),Object(n["createVNode"])(se,{type:"primary",onClick:t[18]||(t[18]=function(t){return e.onClickDomainSubmit("domainForm")}),loading:e.loading},{default:Object(n["withCtx"])((function(){return[le]})),_:1},8,["loading"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(ye,{class:"form-tag-dialog",model:e.domainForm,size:"mini","label-position":"left","label-width":"130px",rules:e.rules,ref:"domainForm"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(he,{label:"网站",prop:"domain",key:"1"},{default:Object(n["withCtx"])((function(){return["new"==e.domainType?(Object(n["openBlock"])(),Object(n["createBlock"])(o,{key:0,modelValue:e.domainForm.domain,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.domainForm.domain=t}),placeholder:"支持通配符，且为小写，支持统配符，例如_*.jxwaf.com"},null,8,["modelValue"])):Object(n["createCommentVNode"])("",!0),"edit"==e.domainType?(Object(n["openBlock"])(),Object(n["createBlock"])(o,{key:1,modelValue:e.domainForm.domain,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.domainForm.domain=t}),disabled:"disabled"},null,8,["modelValue"])):Object(n["createCommentVNode"])("",!0),"new"==e.domainType?(Object(n["openBlock"])(),Object(n["createBlock"])("p",ee," （支持ip和域名，域名需要省略 https:// 或 http://） ")):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])(he,{label:"协议类型",prop:"checkListProtocol",key:"2"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(je,{modelValue:e.domainForm.checkListProtocol,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.domainForm.checkListProtocol=t})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Oe,{label:"HTTP",key:"HTTP"}),Object(n["createVNode"])(Oe,{label:"HTTPS",key:"HTTPS"})]})),_:1},8,["modelValue"])]})),_:1}),e.domainForm.checkListProtocol.indexOf("HTTPS")>-1?(Object(n["openBlock"])(),Object(n["createBlock"])("div",te,[Object(n["createVNode"])(he,{label:"https强制跳转",key:"4"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(ge,{modelValue:e.domainForm.redirect_https,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.domainForm.redirect_https=t}),"active-value":"true","inactive-value":"false"},null,8,["modelValue"]),oe]})),_:1}),Object(n["createVNode"])(ke,{type:"border-card",class:"domain-tabs",modelValue:e.selectTabsValue,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.selectTabsValue=t})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(_e,{label:"SSL证书管理",name:"0"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(he,{label:"SSL证书",key:"3"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(xe,{modelValue:e.domainForm.ssl_domain,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.domainForm.ssl_domain=t}),placeholder:"请选择或输入模糊搜索",filterable:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.sslOptions,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(Ve,{key:e.ssl_domain,label:e.ssl_domain,value:e.ssl_domain},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(n["createVNode"])(_e,{label:"手动输入",name:"1"},{default:Object(n["withCtx"])((function(){return["1"==e.selectTabsValue?(Object(n["openBlock"])(),Object(n["createBlock"])(he,{label:"公钥",prop:"public_key",key:"5"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(o,{modelValue:e.domainForm.public_key,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.domainForm.public_key=t}),placeholder:"需包含证书链",type:"textarea",rows:4},null,8,["modelValue"])]})),_:1})):Object(n["createCommentVNode"])("",!0),"1"==e.selectTabsValue?(Object(n["openBlock"])(),Object(n["createBlock"])(he,{label:"私钥",prop:"private_key",key:"6"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(o,{modelValue:e.domainForm.private_key,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.domainForm.private_key=t}),type:"textarea",rows:4},null,8,["modelValue"])]})),_:1})):Object(n["createCommentVNode"])("",!0)]})),_:1})]})),_:1},8,["modelValue"])])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(he,{label:"源站地址",key:"7"},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.sourceIpList,(function(t,o){return Object(n["openBlock"])(),Object(n["createBlock"])(ve,{key:o,closable:"","disable-transitions":!1,onClose:function(o){return e.handleCloseSourceIpList(t)}},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t),1)]})),_:2},1032,["onClose"])})),128)),e.sourceIpListVisible?(Object(n["openBlock"])(),Object(n["createBlock"])(o,{key:0,class:"input-new-tag node-ip-list",modelValue:e.sourceIpListValue,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.sourceIpListValue=t}),ref:"saveTagSourceIpList",size:"mini",onKeyup:Object(n["withKeys"])(e.handleSourceIpListConfirm,["enter"]),onBlur:e.handleSourceIpListConfirm},null,8,["modelValue","onKeyup","onBlur"])):(Object(n["openBlock"])(),Object(n["createBlock"])(se,{key:1,class:"button-new-tag",size:"small",onClick:e.showSourceIpList},{default:Object(n["withCtx"])((function(){return[ne]})),_:1},8,["onClick"])),ce]})),_:1}),Object(n["createVNode"])(he,{label:"源站端口",prop:"source_http_port",key:"8"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(o,{placeholder:"仅支持http",modelValue:e.domainForm.source_http_port,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.domainForm.source_http_port=t})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(he,{label:"回源协议",prop:"proxy_pass_https",key:"9"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(we,{modelValue:e.domainForm.proxy_pass_https,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.domainForm.proxy_pass_https=t}),label:"false"},{default:Object(n["withCtx"])((function(){return[re]})),_:1},8,["modelValue"]),Object(n["createVNode"])(we,{modelValue:e.domainForm.proxy_pass_https,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.domainForm.proxy_pass_https=t}),label:"true"},{default:Object(n["withCtx"])((function(){return[ie]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["title","modelValue","onClosed"])]})),_:1},512)),[[Ce,e.loadingPage,void 0,{fullscreen:!0,lock:!0}]])}o("a434"),o("a15b"),o("ac1f"),o("1276");var ue=o("362c"),de={mixins:[ue["b"]],data:function(){return{domainTitle:"添加规则",domainType:"new",domainSearch:"",loadingPage:!0,dialogDomainFormVisible:!1,loading:!1,dialogSysInitVisible:!1,domainForm:{source_http_port:"80",proxy_pass_https:"false",redirect_https:"false",checkListProtocol:[]},tableData:[],sourceIpList:[],sourceIpListVisible:!1,sourceIpListValue:"",flagTag:!0,sslOptions:[],selectTabsValue:"0"}},computed:{rules:function(){return{domain:[{required:!0,message:"请输入网站地址",trigger:["blur","change"]}],source_http_port:[{required:!0,message:"请输入后端服务器端口信息",trigger:["blur","change"]},{validator:ue["c"],trigger:["blur","change"]}],checkListProtocol:[{type:"array",required:!0,message:"请至少选择一项协议类型",trigger:"change"}],public_key:[{required:!0,message:"请输入公钥",trigger:"blur"}],private_key:[{required:!0,message:"请输入私钥",trigger:"blur"}]}}},mounted:function(){this.getData()},methods:{handleCloseSourceIpList:function(e){this.sourceIpList.splice(this.sourceIpList.indexOf(e),1)},showSourceIpList:function(){var e=this;this.sourceIpListVisible=!0,this.$nextTick((function(t){e.$refs.saveTagSourceIpList.$refs.input.focus()}))},handleSourceIpListConfirm:function(){var e=this,t=this.sourceIpListValue,o=/^(((https|http)?:\/)?\/)/;e.flagTag&&(e.flagTag=!1,t?o.test(t)?e.$message({showClose:!0,message:"请输入支持ip或域名，但需要省略 https:// 或 http:// ",type:"error"}):(e.sourceIpList.push(t),e.sourceIpListVisible=!1,e.sourceIpListValue=""):(e.sourceIpListVisible=!1,e.sourceIpListValue=""),setTimeout((function(){e.flagTag=!0}),50))},onClickSysInit:function(){this.loadingPage=!1,this.dialogSysInitVisible=!1,window.location.href="/#/group"},checkSysInit:function(){var e=this;Object(ue["a"])("get","/sys_init_check",{},(function(t){"sys_init_fail"==t.data.message?e.dialogSysInitVisible=!0:(e.loadingPage=!1,e.getData())}),(function(){e.loadingPage=!0}))},getData:function(){var e=this;Object(ue["a"])("get","/waf/waf_get_domain_list",{},(function(t){e.loadingPage=!1,e.tableData=t.data.message}),(function(){e.loadingPage=!1}))},getSSL:function(){var e=this;Object(ue["a"])("get","/waf/waf_get_sys_ssl_manage_list",{},(function(t){e.sslOptions=t.data.message}),(function(){}))},dialogClose:function(){this.domainForm={source_http_port:"80",redirect_https:"false",proxy_pass_https:"false",checkListProtocol:[]},this.selectTabsValue="0",this.sourceIpListVisible=!1,this.sourceIpListValue="",this.sourceIpList=[],this.$refs["domainForm"].resetFields()},onClickDomainSubmit:function(e){var t=this,o=t.domainForm.checkListProtocol,n="/waf/waf_create_domain";if("edit"==t.domainType&&(n="/waf/waf_edit_domain"),0==t.sourceIpList.length)return t.$message({message:"后端服务器ip/域名不能为空",type:"error"}),!1;if("0"==t.selectTabsValue){if(""==t.domainForm.ssl_domain)return t.$message({message:"请选择SSL证书",type:"error"}),!1;t.domainForm.ssl_source="ssl_manage",t.domainForm.public_key="",t.domainForm.private_key=""}else{if(""==t.domainForm.public_key||""==t.domainForm.private_key)return t.$message({message:"公钥/私钥不能为空",type:"error"}),!1;t.domainForm.ssl_source="custom",t.domainForm.ssl_domain=""}t.domainForm.source_ip=t.sourceIpList.join(","),t.domainForm.http=o.indexOf("HTTP")>-1?"true":"false",t.domainForm.https=o.indexOf("HTTPS")>-1?"true":"false",this.$refs[e].validate((function(e){e&&(t.loading=!0,Object(ue["a"])("post",n,t.domainForm,(function(e){t.loading=!1,t.dialogDomainFormVisible=!1,t.sourceIpListVisible=!1,t.sourceIpListValue="",t.sourceIpList=[],t.getData()}),(function(){t.loading=!1})))}))},onClickDefault:function(){window.location.href="/#/default"},onClickCreateDomain:function(){var e=this;e.domainTitle="添加规则",e.domainType="new",e.dialogDomainFormVisible=!0,e.getSSL()},handleEdit:function(e){var t=this;e.loading=!0,t.getSSL(),Object(ue["a"])("post","/waf/waf_get_domain",{domain:e.domain},(function(o){e.loading=!1;var n=o.data.message;t.domainForm.domain=n.domain,t.domainForm.private_key=n.private_key,t.domainForm.public_key=n.public_key,t.domainForm.redirect_https=n.redirect_https,t.domainForm.ssl_domain=n.ssl_domain,t.domainForm.proxy_pass_https=n.proxy_pass_https,t.domainForm.source_http_port=n.source_http_port,t.sourceIpList=n.source_ip?n.source_ip.split(","):[],t.domainForm.isVisiblePopover=!1,"true"==n.http&&t.domainForm.checkListProtocol.push("HTTP"),"true"==n.https&&t.domainForm.checkListProtocol.push("HTTPS"),""==n.ssl_domain?t.selectTabsValue="1":t.selectTabsValue="0",t.domainTitle="编辑网站",t.domainType="edit",t.dialogDomainFormVisible=!0}),(function(){e.loading=!1}),"no-message")},handleProtection:function(e){window.location.href="/#/protection/"+e.domain+"/single_rule"},handleDelete:function(e){var t=this;t.loading=!0,Object(ue["a"])("post","/waf/waf_del_domain",{domain:e.domain},(function(o){e.isVisiblePopover=!1,t.loading=!1,t.getData()}),(function(){t.loading=!1}))}}};o("a751");de.render=se;t["default"]=de},fce3:function(e,t,o){var n=o("d039");e.exports=n((function(){var e=RegExp(".","string".charAt(0));return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=chunk-2b87616d.js.map