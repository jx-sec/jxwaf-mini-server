{"version":3,"sources":["webpack:///./src/components/flow-engine-protection.vue","webpack:///./src/components/flow-engine-protection.vue?0814","webpack:///./src/components/flow-engine-protection.vue?2cbc"],"names":["class","type","justify","span","ruleType","href","domain","model","flowEngineForm","rules","ref","label-width","onChangeProtection","$event","high_freq_cc_check","active-text","inactive-text","active-value","inactive-value","header","label","prop","req_rate","placeholder","req_rate_block_mode","ruleAction","item","key","value","req_rate_block_mode_extra_parameter","optionsBotCheck","req_count","req_count_stat_time_period","req_count_block_mode","req_count_block_mode_extra_parameter","slow_cc_check","ip_count","ip_count_stat_time_period","ip_count_block_mode","ip_count_block_mode_extra_parameter","domain_rate","slow_cc_block_mode","slow_cc_block_mode_extra_parameter","emergency_mode_check","emergency_mode_block_mode","emergency_mode_block_mode_extra_parameter","onClickFlowEngineSubmit","loading","loadingPage","mixins","data","computed","eq_rate","required","message","trigger","validator","mounted","route","this","params","getData","methods","t","getUrl","oData","group_id","response","event","postUrl","$refs","validate","valid","render"],"mappings":"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","file":"static/index/js/chunk-911c2194.js","sourcesContent":["<template>\r\n  <div class=\"flow-engine-wrap\">\r\n    <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n      <el-col :span=\"24\">\r\n        <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n          <el-col :span=\"12\">\r\n            <h3>流量防护引擎配置</h3>\r\n          </el-col>\r\n          <el-col :span=\"12\" class=\"text-align-right\">\r\n            <a class=\"el-button el-button--primary is-plain\" v-if=\"ruleType == 'single_rule'\"\r\n              :href=\"'/#/protection/' + domain + '/' + ruleType\">返回</a>\r\n            <a class=\"el-button el-button--primary is-plain\" v-if=\"ruleType == 'group_rule'\"\r\n              :href=\"'/#/group-protection/' + domain \">返回</a>\r\n          </el-col>\r\n        </el-row>\r\n      </el-col>\r\n    </el-row>\r\n    <div class=\"margin-4x\"></div>\r\n    <el-row v-loading.fullscreen.lock=\"loadingPage\">\r\n      <el-col :span=\"24\">\r\n        <el-form :model=\"flowEngineForm\" :rules=\"rules\" ref=\"flowEngineForm\" label-width=\"200px\">\r\n          <el-divider class=\"first-divider\" />\r\n          <div class=\"protection-block\">\r\n            <div class=\"protection-item-right\">\r\n              <div class=\"protection-item-label\">高频CC攻击防护</div>\r\n              <el-switch @change=\"onChangeProtection($event)\" v-model=\"flowEngineForm.high_freq_cc_check\"\r\n                active-text=\"开启\" inactive-text=\"关闭\" active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n            </div>\r\n\r\n            <div class=\"flow-engine-form\" v-if=\"flowEngineForm.high_freq_cc_check == 'true'\">\r\n              <el-card class=\"box-card\">\r\n                <template #header>\r\n                  <span>IP请求频率检测</span>\r\n                </template>\r\n                <div>\r\n                  <el-form-item label=\"请求频率限制\" prop=\"req_rate\">\r\n                    <el-input v-model=\"flowEngineForm.req_rate\" placeholder=\"请输入\"></el-input>\r\n                  </el-form-item>\r\n\r\n                  <el-form-item label=\"执行动作\">\r\n                    <el-select v-model=\"flowEngineForm.req_rate_block_mode\" placeholder=\"请选择\">\r\n                      <el-option v-for=\"item in ruleAction\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n\r\n                  <el-form-item v-if=\"flowEngineForm.req_rate_block_mode == 'bot_check'\">\r\n                    <el-select v-model=\"flowEngineForm.req_rate_block_mode_extra_parameter\" placeholder=\"请选择\">\r\n                      <el-option v-for=\"item in optionsBotCheck\" :key=\"item.value\" :label=\"item.label\"\r\n                        :value=\"item.value\">\r\n                      </el-option>\r\n                    </el-select>\r\n                    <p class=\"form-info-color\">\r\n                      说明：标准模式无需人机交互\r\n                    </p>\r\n                  </el-form-item>\r\n\r\n                </div>\r\n              </el-card>\r\n              <div class=\"margin-4x\"></div>\r\n              <el-card class=\"box-card\">\r\n                <template #header>\r\n                  <span>IP请求次数检测</span>\r\n                </template>\r\n                <div>\r\n                  <el-form-item label=\"请求次数限制\" prop=\"req_rate\">\r\n                    <el-input v-model=\"flowEngineForm.req_count\" placeholder=\"请输入\"></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"统计时间（秒）\" prop=\"req_count_stat_time_period\">\r\n                    <el-input v-model=\"flowEngineForm.req_count_stat_time_period\" placeholder=\"请输入\"></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"执行动作\">\r\n                    <el-select v-model=\"flowEngineForm.req_count_block_mode\" placeholder=\"请选择\">\r\n                      <el-option v-for=\"item in ruleAction\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n\r\n                  <el-form-item v-if=\"flowEngineForm.req_count_block_mode == 'bot_check'\">\r\n                    <el-select v-model=\"flowEngineForm.req_count_block_mode_extra_parameter\" placeholder=\"请选择\">\r\n                      <el-option v-for=\"item in optionsBotCheck\" :key=\"item.value\" :label=\"item.label\"\r\n                        :value=\"item.value\">\r\n                      </el-option>\r\n                    </el-select>\r\n                    <p class=\"form-info-color\">\r\n                      说明：标准模式无需人机交互\r\n                    </p>\r\n                  </el-form-item>\r\n                </div>\r\n              </el-card>\r\n              <!-- <div class=\"flow-engine-btn\">\r\n                <el-button type=\"primary\" @click=\"onClickFlowEngineSubmit('flowEngineForm')\" :loading=\"loading\">保存\r\n                </el-button>\r\n              </div> -->\r\n            </div>\r\n          </div>\r\n          <el-divider />\r\n\r\n          <div class=\"protection-block\">\r\n            <div class=\"protection-item-right\">\r\n              <div class=\"protection-item-label\">慢速CC攻击防护</div>\r\n              <el-switch @change=\"onChangeProtection($event)\" v-model=\"flowEngineForm.slow_cc_check\" active-text=\"开启\"\r\n                inactive-text=\"关闭\" active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n            </div>\r\n            <div class=\"flow-engine-form\" v-if=\"flowEngineForm.slow_cc_check == 'true'\">\r\n              <el-card class=\"box-card\">\r\n                <template #header>\r\n                  <span>请求IP数量检测</span>\r\n                </template>\r\n                <div>\r\n                  <el-form-item label=\"请求IP数量限制\" prop=\"ip_count\">\r\n                    <el-input v-model=\"flowEngineForm.ip_count\" placeholder=\"请输入\"></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"统计时间（秒）\" prop=\"ip_count_stat_time_period\">\r\n                    <el-input v-model=\"flowEngineForm.ip_count_stat_time_period\" placeholder=\"请输入\"></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"执行动作\">\r\n                    <el-select v-model=\"flowEngineForm.ip_count_block_mode\" placeholder=\"请选择\">\r\n                      <el-option v-for=\"item in ruleAction\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n\r\n                  <el-form-item v-if=\"flowEngineForm.ip_count_block_mode == 'bot_check'\">\r\n                    <el-select v-model=\"flowEngineForm.ip_count_block_mode_extra_parameter\" placeholder=\"请选择\">\r\n                      <el-option v-for=\"item in optionsBotCheck\" :key=\"item.value\" :label=\"item.label\"\r\n                        :value=\"item.value\">\r\n                      </el-option>\r\n                    </el-select>\r\n                    <p class=\"form-info-color\">\r\n                      说明：标准模式无需人机交互\r\n                    </p>\r\n                  </el-form-item>\r\n                </div>\r\n              </el-card>\r\n              <div class=\"margin-4x\"></div>\r\n              <el-card class=\"box-card\">\r\n                <template #header>\r\n                  <span>回源保护机制</span>\r\n                </template>\r\n                <div>\r\n                  <el-form-item label=\"网站请求频率限制\" prop=\"domain_rate\">\r\n                    <el-input v-model=\"flowEngineForm.domain_rate\" placeholder=\"请输入\"></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"执行动作\">\r\n                    <el-select v-model=\"flowEngineForm.slow_cc_block_mode\" placeholder=\"请选择\">\r\n                      <el-option v-for=\"item in ruleAction\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n\r\n                  <el-form-item v-if=\"flowEngineForm.slow_cc_block_mode == 'bot_check'\">\r\n                    <el-select v-model=\"flowEngineForm.slow_cc_block_mode_extra_parameter\" placeholder=\"请选择\">\r\n                      <el-option v-for=\"item in optionsBotCheck\" :key=\"item.value\" :label=\"item.label\"\r\n                        :value=\"item.value\">\r\n                      </el-option>\r\n                    </el-select>\r\n                    <p class=\"form-info-color\">\r\n                      说明：标准模式无需人机交互\r\n                    </p>\r\n                  </el-form-item>\r\n                </div>\r\n              </el-card>\r\n              <!-- <div class=\"flow-engine-btn\">\r\n                <el-button type=\"primary\" @click=\"onClickFlowEngineSubmit('flowEngineForm')\" :loading=\"loading\">保存\r\n                </el-button>\r\n              </div> -->\r\n            </div>\r\n          </div>\r\n          <el-divider />\r\n          <div class=\"protection-block\">\r\n            <div class=\"protection-item-right\">\r\n              <div class=\"protection-item-label\">无差别紧急防护</div>\r\n              <el-switch @change=\"onChangeProtection($event)\" v-model=\"flowEngineForm.emergency_mode_check\"\r\n                active-text=\"开启\" inactive-text=\"关闭\" active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n            </div>\r\n            <div class=\"flow-engine-form\" v-if=\"flowEngineForm.emergency_mode_check == 'true'\">\r\n              <el-card class=\"box-card\">\r\n                <template #header>\r\n                  <span>请求IP数量检测</span>\r\n                </template>\r\n                <div>\r\n                  <el-form-item label=\"执行动作\">\r\n                    <el-select v-model=\"flowEngineForm.emergency_mode_block_mode\" placeholder=\"请选择\">\r\n                      <el-option v-for=\"item in ruleAction\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </el-form-item>\r\n\r\n                  <el-form-item v-if=\"flowEngineForm.emergency_mode_block_mode == 'bot_check'\">\r\n                    <el-select v-model=\"flowEngineForm.emergency_mode_block_mode_extra_parameter\" placeholder=\"请选择\">\r\n                      <el-option v-for=\"item in optionsBotCheck\" :key=\"item.value\" :label=\"item.label\"\r\n                        :value=\"item.value\">\r\n                      </el-option>\r\n                    </el-select>\r\n                    <p class=\"form-info-color\">\r\n                      说明：标准模式无需人机交互\r\n                    </p>\r\n                  </el-form-item>\r\n                </div>\r\n              </el-card>\r\n\r\n            </div>\r\n\r\n          </div>\r\n          <div class=\"flow-engine-btn\">\r\n            <el-button type=\"primary\" @click=\"onClickFlowEngineSubmit('flowEngineForm')\" :loading=\"loading\">保存\r\n            </el-button>\r\n          </div>\r\n        </el-form>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mixin, JXAjax, validatePositiveInt } from \"../assets/scripts/common\";\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  mixins: [mixin],\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      loadingPage: false,\r\n      domain: \"\",\r\n      ruleType: \"\",\r\n      flowEngineForm: {\r\n      },\r\n      ruleAction: [\r\n        { value: \"block\", label: \"阻断请求\" },\r\n        { value: \"reject_response\", label: \"拒绝响应\" },\r\n        { value: \"bot_check\", label: \"人机识别\" },\r\n        { value: \"watch\", label: \"观察模式\" },\r\n        \r\n      ],\r\n      optionsBotCheck: [\r\n        { value: \"standard\", label: \"标准\" },\r\n        { value: \"slipper\", label: \"滑块\" },\r\n        { value: \"image\", label: \"图片验证码\" },\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n    rules() {\r\n      return {\r\n        eq_rate: [\r\n          {required: true,message: '请输入',trigger: [\"blur\", \"change\"],},\r\n          {validator: validatePositiveInt,trigger: [\"blur\", \"change\"],},\r\n        ],\r\n        req_count: [\r\n          { required: true, message: '请输入', trigger: [\"blur\", \"change\"], },\r\n          { validator: validatePositiveInt, trigger: [\"blur\", \"change\"], },\r\n        ],\r\n        req_count_stat_time_period: [\r\n          { required: true, message: '请输入', trigger: [\"blur\", \"change\"], },\r\n          { validator: validatePositiveInt, trigger: [\"blur\", \"change\"], },\r\n        ],\r\n        ip_count: [\r\n          { required: true, message: '请输入', trigger: [\"blur\", \"change\"], },\r\n          { validator: validatePositiveInt, trigger: [\"blur\", \"change\"], },\r\n        ],\r\n        ip_count_stat_time_period: [\r\n          { required: true, message: '请输入', trigger: [\"blur\", \"change\"], },\r\n          { validator: validatePositiveInt, trigger: [\"blur\", \"change\"], },\r\n        ],\r\n        domain_rate: [\r\n          { required: true, message: '请输入', trigger: [\"blur\", \"change\"], },\r\n          { validator: validatePositiveInt, trigger: [\"blur\", \"change\"], },\r\n        ],\r\n\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    const route = useRoute()\r\n    this.ruleType = route.params.ruleType;\r\n    this.domain = route.params.domain;\r\n    this.getData();\r\n  },\r\n  methods: {\r\n    getData() {\r\n      var t = this;\r\n      var getUrl = \"/waf/waf_get_flow_engine_protection\";\r\n      var oData = { domain: t.domain };\r\n      if (t.ruleType == \"group_rule\") {\r\n        getUrl = \"/waf/waf_get_group_flow_engine_protection\";\r\n        oData = { group_id: t.domain }\r\n      }\r\n      JXAjax(\r\n        \"post\",\r\n        getUrl,\r\n        oData,\r\n        function (response) {\r\n          t.loadingPage = false;\r\n          t.flowEngineForm = response.data.message;\r\n          t.flowEngineForm.domain = t.domain;\r\n        },\r\n        function () {\r\n          t.loadingPage = false;\r\n        },\r\n        \"no-message\"\r\n      );\r\n    },\r\n    onChangeProtection(event) { \r\n      \r\n    },\r\n    onClickFlowEngineSubmit(flowEngineForm) { \r\n      var t = this;\r\n      var postUrl = \"/waf/waf_edit_flow_engine_protection\";\r\n      if (t.ruleType == \"group_rule\") {\r\n        postUrl = \"/waf/waf_edit_group_flow_engine_protection\";\r\n        this.flowEngineForm.group_id = t.domain;\r\n      } else {\r\n        this.flowEngineForm.domain = t.domain;\r\n      }\r\n      \r\n      this.$refs[flowEngineForm].validate((valid) => {\r\n        if (valid) {\r\n          t.loading = true;\r\n          JXAjax(\r\n            \"post\",\r\n            postUrl,\r\n            t.flowEngineForm,\r\n            function (response) {\r\n              t.loading = false;\r\n              t.getData();\r\n            },\r\n            function () {\r\n              t.loading = false;\r\n            }\r\n          );\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n\r\n\r\n\r\n.el-button.button-block {\r\n  display: block;\r\n  margin-left: 0px;\r\n  text-align: right;\r\n  width: 100%;\r\n}\r\n.flow-engine-wrap .protection-block {\r\n  display: block;\r\n  margin: 10px 10px 10px 10px;\r\n  font-size: 14px;\r\n}\r\n.protection-item-right {\r\n  display: flex;\r\n}\r\n.protection-item-label {\r\n  width: 200px;\r\n  line-height: 20px;\r\n  text-align: left;\r\n  padding: 0 12px 0 0;\r\n  -webkit-box-flex: 0;\r\n  -ms-flex: 0 0 auto;\r\n  flex: 0 0 auto;\r\n  -webkit-box-sizing: border-box;\r\n  box-sizing: border-box;\r\n  font-size: 14px;\r\n}\r\n\r\n.flow-engine-wrap {\r\n  max-width: 800px;\r\n  min-width: 400px;\r\n}\r\n.flow-engine-wrap .first-divider{\r\n  margin-top: 0px;\r\n}\r\n.flow-engine-form {\r\n  margin: 25px 0;\r\n}\r\n.flow-engine-btn {\r\n  text-align: right;\r\n  padding: 25px 20px;\r\n}\r\n</style>\r\n","import { render } from \"./flow-engine-protection.vue?vue&type=template&id=7d5b24ce\"\nimport script from \"./flow-engine-protection.vue?vue&type=script&lang=js\"\nexport * from \"./flow-engine-protection.vue?vue&type=script&lang=js\"\n\nimport \"./flow-engine-protection.vue?vue&type=style&index=0&lang=css\"\nscript.render = render\n\nexport default script","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./flow-engine-protection.vue?vue&type=style&index=0&lang=css\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./flow-engine-protection.vue?vue&type=style&index=0&lang=css\""],"sourceRoot":""}