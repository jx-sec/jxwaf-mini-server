{"version":3,"sources":["webpack:///./src/components/sys-flow-rule-protection.vue","webpack:///./src/components/sys-flow-rule-protection.vue?f7a0","webpack:///./src/components/sys-flow-rule-protection.vue?f227"],"names":["class","style","type","justify","span","handleTabClick","tabIndex","label","name","href","rule_uuid","data","tableData","prop","default","scope","row","waf_domain_count","waf_group_domain_count","align","size","handleEdit","placement","width","visible","isVisiblePopover","reference","handleDelete","loading","onClickCreateGroup","loadingCreateGroup","tableDataGroup","scopeGroup","rule_group_uuid","handleEditGroup","rule_count","handleDeleteGroup","loadingPage","title","groupTitle","dialogGroupFormVisible","close-on-click-modal","dialogClose","footer","onClickgroupSubmit","model","groupForm","label-position","label-width","rules","ref","key","rule_group_name","placeholder","rule_group_detail","rows","mixins","domain","ruleType","groupType","computed","required","message","trigger","validator","mounted","this","route","params","getData","getDataGroup","methods","t","rule_type","response","forEach","item","window","location","tab","length","index","$refs","resetFields","postUrl","validate","valid","render"],"mappings":"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","file":"static/index/js/chunk-e9fd3304.js","sourcesContent":["<template>\r\n  <div class=\"custom-wrap\">\r\n    <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n      <el-col :span=\"24\">\r\n        <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n          <el-col :span=\"12\">\r\n            <h3>流量防护规则管理</h3>\r\n          </el-col>\r\n          <el-col :span=\"12\" class=\"text-align-right\">\r\n\r\n          </el-col>\r\n        </el-row>\r\n      </el-col>\r\n    </el-row>\r\n    <div class=\"margin-4x\"></div>\r\n    <el-tabs v-loading.fullscreen.lock=\"loadingPage\" class=\"tabs-no-bottom\" @tab-click=\"handleTabClick\"\r\n      v-model=\"tabIndex\">\r\n      <el-tab-pane label=\"规则\" name=\"0\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-row class=\"text-align-right\">\r\n              <a class=\"el-button el-button--primary\"\r\n                :href=\"'/#/sys-flow-rule-protection-edit/' + rule_uuid+ '/single_rule/new'\">新建规则</a>\r\n            </el-row>\r\n            <div class=\" demo-block\">\r\n              <el-table :data=\"tableData\" style=\"width: 100%\">\r\n                <el-table-column prop=\"rule_name\" label=\"规则名称\"></el-table-column>\r\n\r\n                <el-table-column prop=\"rule_detail\" label=\"描述\"></el-table-column>\r\n                <el-table-column label=\"关联网站\">\r\n                  <template #default=\"scope\">\r\n                    <p>\r\n                      关联网站数量：{{scope.row.waf_domain_count}}\r\n                    </p>\r\n                    <p>\r\n                      网站分组关联数量：{{scope.row.waf_group_domain_count}} \r\n                    </p>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"update_time\" label=\"更新时间\"></el-table-column>\r\n\r\n                <el-table-column label=\"操作\" align=\"right\">\r\n                  <template #default=\"scope\">\r\n                    <el-button size=\"mini\" @click=\"handleEdit(scope.row)\" class=\"button-block\" type=\"text\">编辑\r\n                    </el-button>\r\n\r\n                    <el-popover placement=\"top\" width=\"160\" v-model:visible=\"scope.row.isVisiblePopover\">\r\n                      <p>确定删除吗？</p>\r\n                      <div style=\"text-align: right; margin: 0\">\r\n                        <el-button size=\"mini\" type=\"text\" @click=\"scope.row.isVisiblePopover = false\">取消</el-button>\r\n                        <el-button type=\"primary\" size=\"mini\" @click=\"handleDelete(scope.row)\" :loading=\"loading\">确定\r\n                        </el-button>\r\n                      </div>\r\n                      <template #reference>\r\n                        <el-button type=\"text\" size=\"mini\" @click=\"scope.row.isVisiblePopover = true\">删除</el-button>\r\n                      </template>\r\n                    </el-popover>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"规则组\" name=\"1\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-row class=\"text-align-right\">\r\n              <el-button type=\"primary\" @click=\"onClickCreateGroup()\" :loading=\"loadingCreateGroup\">新建规则组</el-button>\r\n            </el-row>\r\n            <div class=\"demo-block\">\r\n              <el-table :data=\"tableDataGroup\" style=\"width: 100%\">\r\n\r\n                <el-table-column prop=\"rule_group_name\" label=\"规则组名称\"></el-table-column>\r\n               \r\n                <el-table-column prop=\"rule_group_detail\" label=\"描述\"></el-table-column>\r\n                <el-table-column label=\"关联网站\">\r\n                  <template #default=\"scope\">\r\n                    <p>\r\n                      关联网站数量：{{scope.row.waf_domain_count}}\r\n                    </p>\r\n                    <p>\r\n                      网站分组关联数量：{{scope.row.waf_group_domain_count}} \r\n                    </p>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"rule_count\" label=\"规则数量\"></el-table-column>\r\n\r\n                <el-table-column label=\"操作\" align=\"right\">\r\n                  <template #default=\"scopeGroup\">\r\n                    <a class=\"el-button el-button--text el-button--mini button-block\"\r\n                      :href=\"'/#/group-rule/' + scopeGroup.row.rule_group_uuid + '/sys-flow-rule-protection'\">查看规则</a>\r\n                    <el-button size=\"mini\" @click=\"handleEditGroup(scopeGroup.row)\" class=\"button-block\" type=\"text\">编辑\r\n                    </el-button>\r\n                    <el-popover placement=\"top\" width=\"160\" v-model:visible=\"scopeGroup.row.isVisiblePopover\">\r\n                      <div v-if=\"scopeGroup.row.rule_count == 0\">\r\n                      <p>确定删除吗？</p>\r\n                      <div style=\"text-align: right; margin: 0\">\r\n                        <el-button size=\"mini\" type=\"text\" @click=\"scopeGroup.row.isVisiblePopover = false\">取消\r\n                        </el-button>\r\n                        <el-button type=\"primary\" size=\"mini\" @click=\"handleDeleteGroup(scopeGroup.row)\"\r\n                          :loading=\"loading\">\r\n                          确定\r\n                        </el-button>\r\n                      </div>\r\n                      </div>\r\n                      <div v-else>\r\n                        <p>请先删除规则组内规则</p>\r\n                        <div style=\"text-align: right; margin-top: 10px;\">\r\n                          <el-button type=\"primary\" size=\"mini\" @click=\"scopeGroup.row.isVisiblePopover = false\">好的\r\n                          </el-button>\r\n                        </div>\r\n                      </div>\r\n                      <template #reference>\r\n                        <el-button type=\"text\" size=\"mini\" @click=\"scopeGroup.row.isVisiblePopover = true\">删除\r\n                        </el-button>\r\n                      </template>\r\n                    </el-popover>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n\r\n    <el-dialog :title=\"groupTitle\" v-model=\"dialogGroupFormVisible\" width=\"520px\" :close-on-click-modal=\"false\"\r\n      @close=\"dialogClose\">\r\n      <el-form :model=\"groupForm\" size=\"mini\" label-position=\"left\" label-width=\"120px\" :rules=\"rules\" ref=\"groupForm\"\r\n        class=\"form-tag-dialog\">\r\n        <el-form-item label=\"规则组名称\" prop=\"rule_group_name\" key=\"1\">\r\n          <el-input v-model=\"groupForm.rule_group_name\" placeholder=\"请输入字母或数字，如group_1\"></el-input>\r\n          <p class=\"form-info-color\">\r\n            （请输入以字母开头，仅支持下划线“_”及中横线“-”两种特殊字符）\r\n          </p>\r\n        </el-form-item>\r\n        <el-form-item label=\"规则组描述\" key=\"2\">\r\n          <el-input v-model=\"groupForm.rule_group_detail\" placeholder=\"请输入规则组描述\" :rows=\"2\" type=\"textarea\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer class=\"dialog-footer\">\r\n        <el-button @click=\"dialogGroupFormVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"onClickgroupSubmit('groupForm')\" :loading=\"loading\">确定</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mixin, JXAjax,validateRuleName } from \"../assets/scripts/common\";\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  mixins: [mixin],\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      loadingPage: false,\r\n      loadingCreateGroup: false,\r\n      rule_uuid: 'new',\r\n      tableData: [],\r\n      tableDataGroup: [],\r\n      domain: \"\",\r\n      ruleType: \"single_rule\",\r\n      tabIndex: \"0\",\r\n      groupTitle: \"新建规则组\",\r\n      groupType: \"new\",\r\n      dialogGroupFormVisible: false,\r\n      groupForm: {\r\n        rule_group_name: \"\",\r\n        rule_group_detail: \"\"\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    rules() {\r\n      return {\r\n        rule_group_name: [\r\n          {\r\n            required: true,\r\n            message: \"请输入以字母开头的字符串，仅支持“_”及“-”两种特殊字符\",\r\n            trigger: [\"blur\", \"change\"],\r\n          },\r\n          {\r\n            validator: validateRuleName,\r\n            trigger: [\"blur\", \"change\"],\r\n          },\r\n        ],\r\n      };\r\n    },\r\n  },\r\n  mounted() {\r\n    this.loadingPage = false;\r\n    const route = useRoute()\r\n    this.ruleType = route.params.ruleType;\r\n    if (this.ruleType == \"single_rule\") {\r\n      this.tabIndex = \"0\";\r\n      this.getData();\r\n    } else { \r\n      this.tabIndex = \"1\";\r\n      this.getDataGroup();\r\n    }\r\n    \r\n    \r\n  },\r\n  methods: {\r\n    getData() {\r\n      var t = this;\r\n      JXAjax(\r\n        \"post\",\r\n        \"/waf/waf_get_sys_flow_rule_protection_list\",\r\n        { rule_type: 'single_rule'},\r\n        function (response) {\r\n          t.loadingPage = false;\r\n          t.tableData = response.data.message;\r\n          t.tableData.forEach(item => { \r\n            item.isVisiblePopover = false;\r\n          })\r\n        },\r\n        function () {\r\n          t.loadingPage = false;\r\n        },\r\n        \"no-message\"\r\n      );\r\n    },\r\n    onClickCreateGroup() { \r\n      var t = this;\r\n      t.groupTitle = \"新建规则组\";\r\n      t.groupType = \"new\";\r\n      t.dialogGroupFormVisible = true;\r\n    },\r\n    handleEdit(data) {\r\n      window.location.href = \"/#/sys-flow-rule-protection-edit/\" + data.rule_uuid + \"/single_rule/edit\";\r\n    },\r\n    handleTabClick(tab) { \r\n      if (this.tableDataGroup.length == 0 && tab.index == 1) { \r\n        this.getDataGroup();\r\n      }\r\n      if (this.tableData.length == 0 && tab.index == 0) { \r\n        this.getData();\r\n      }\r\n    },\r\n    getDataGroup() { \r\n      var t = this;\r\n      JXAjax(\r\n        \"post\",\r\n        \"/waf/waf_get_sys_flow_rule_protection_group_list\",\r\n        {},\r\n        function (response) {\r\n          t.loadingPage = false;\r\n          t.tableDataGroup = response.data.message;\r\n          t.tableDataGroup.forEach(item => {\r\n            item.isVisiblePopover = false;\r\n          })\r\n        },\r\n        function () {\r\n          t.loadingPage = false;\r\n        },\r\n        \"no-message\"\r\n      );\r\n    },\r\n    handleDelete(data) {\r\n      var t = this;\r\n      t.loading = true;\r\n\r\n      JXAjax(\r\n        \"post\",\r\n        \"/waf/waf_del_sys_flow_rule_protection\",\r\n        {\r\n          rule_uuid: data.rule_uuid\r\n        },\r\n        function (response) {\r\n          data.isVisiblePopover = false;\r\n          t.loading = false;\r\n          t.getData()\r\n        },\r\n        function () {\r\n          t.loading = false;\r\n        }\r\n      );\r\n    },\r\n    handleDeleteGroup(data) {\r\n      var t = this;\r\n      t.loading = true;\r\n\r\n      JXAjax(\r\n        \"post\",\r\n        \"/waf/waf_del_sys_flow_rule_protection_group\",\r\n        {\r\n          rule_group_uuid: data.rule_group_uuid\r\n        },\r\n        function (response) {\r\n          data.isVisiblePopover = false;\r\n          t.loading = false;\r\n          t.getDataGroup();\r\n        },\r\n        function () {\r\n          t.loading = false;\r\n        }\r\n      );\r\n    },\r\n\r\n    dialogClose() {\r\n      this.groupForm = {\r\n        rule_group_name: \"\",\r\n        rule_group_detail: \"\"\r\n      };\r\n      this.$refs[\"groupForm\"].resetFields();\r\n    },\r\n\r\n    onClickgroupSubmit(groupForm) {\r\n      var t = this;\r\n      var postUrl = \"/waf/waf_create_sys_flow_rule_protection_group\";\r\n      if (t.groupType == \"edit\") {\r\n        postUrl = \"/waf/waf_edit_sys_flow_rule_protection_group\";\r\n      }\r\n\r\n      this.$refs[groupForm].validate((valid) => {\r\n        if (valid) {\r\n          t.loading = true;\r\n          JXAjax(\r\n            \"post\",\r\n            postUrl,\r\n            t.groupForm,\r\n            function (response) {\r\n              t.loading = false;\r\n              t.dialogGroupFormVisible = false;\r\n              t.getDataGroup();\r\n            },\r\n            function () {\r\n              t.loading = false;\r\n            }\r\n          );\r\n        }\r\n      });\r\n    },\r\n    handleEditGroup(data) {\r\n      var t = this;\r\n      JXAjax(\r\n        \"post\",\r\n        \"/waf/waf_get_sys_flow_rule_protection_group\",\r\n        { rule_group_uuid: data.rule_group_uuid },\r\n        function (response) {\r\n          data.loading = false;\r\n          t.groupForm = response.data.message;\r\n          t.groupTitle = \"编辑规则组\";\r\n          t.groupType = \"edit\";\r\n          t.dialogGroupFormVisible = true;\r\n        },\r\n        function () {\r\n          data.loading = false;\r\n        },\r\n        \"no-message\"\r\n      );\r\n\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n\r\n.custom-wrap {\r\n  /* max-width: 800px;\r\n  min-width: 400px; */\r\n}\r\n.el-button.button-block {\r\n  display: block;\r\n  margin-left: 0px;\r\n  text-align: right;\r\n  width: 100%;\r\n}\r\n\r\n.custom-wrap .rule-matchs-content .match-box-title {\r\n  display: inline-block;\r\n  text-align: left;\r\n  font-size: 14px;\r\n  color: #909399;\r\n  padding: 0 5px;\r\n  box-sizing: border-box;\r\n}\r\n.custom-wrap .rule-matchs-content .match-box-title:before {\r\n  content: \"*\";\r\n  color: #f56c6c;\r\n  margin-right: 4px;\r\n}\r\n.custom-wrap .match-inline-block {\r\n  width: 192px;\r\n}\r\n.custom-wrap .match-inline-block-small {\r\n  width: 150px;\r\n}\r\n.tabs-no-bottom {\r\n\r\n}\r\n</style>\r\n","import { render } from \"./sys-flow-rule-protection.vue?vue&type=template&id=a067357e\"\nimport script from \"./sys-flow-rule-protection.vue?vue&type=script&lang=js\"\nexport * from \"./sys-flow-rule-protection.vue?vue&type=script&lang=js\"\n\nimport \"./sys-flow-rule-protection.vue?vue&type=style&index=0&lang=css\"\nscript.render = render\n\nexport default script","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sys-flow-rule-protection.vue?vue&type=style&index=0&lang=css\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sys-flow-rule-protection.vue?vue&type=style&index=0&lang=css\""],"sourceRoot":""}