{"version":3,"sources":["webpack:///./src/components/sys-abnormal-handle.vue","webpack:///./src/components/sys-abnormal-handle.vue?9026","webpack:///./src/components/sys-abnormal-handle.vue?d68d"],"names":["class","_createVNode","_createBlock","_hoisted_1","_component_el_row","_component_el_col","span","type","justify","_hoisted_2","_hoisted_3","_component_el_form","model","$data","abnormalForm","rules","$options","ref","label-width","label-position","_component_el_collapse","activeNames","$event","_component_el_collapse_item","title","name","_component_el_form_item","label","key","_component_el_switch","bypass_check","active-text","inactive-text","active-value","inactive-value","_hoisted_4","same_name_args_check","_hoisted_5","truncated_agrs_check","_hoisted_6","client_body_size_check","_hoisted_7","onChange","_cache","onClickDownloadRule","ssl_attack_check","_hoisted_8","prop","_component_el_input","ssl_attack_count","placeholder","ssl_attack_count_stat_time_period","_component_el_select","ssl_attack_block_name_list_uuid","filterable","_Fragment","_renderList","ruleOptions","item","_component_el_option","name_list_name","value","_hoisted_9","_component_el_button","onClick","onClickAbnormalSubmit","loading","loadingPage","mixins","mixin","data","computed","required","message","trigger","validator","validatePositiveInt","mounted","this","getData","methods","t","JXAjax","response","_ruleOptions","forEach","name_list_uuid","postUrl","$refs","validate","valid","__exports__","render"],"mappings":"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","file":"static/index/js/chunk-a277305e.f02377e2.js","sourcesContent":["<template>\r\n  <div class=\"sys-abnormal-handle-wrap\">\r\n    <el-row v-loading.fullscreen.lock=\"loadingPage\">\r\n      <el-col :span=\"24\">\r\n        <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n          <el-col :span=\"12\">\r\n            <h3>WAF异常处置配置</h3>\r\n          </el-col>\r\n          <el-col :span=\"12\" class=\"text-align-right\">\r\n\r\n          </el-col>\r\n        </el-row>\r\n        <div class=\"margin-4x\"></div>\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form :model=\"abnormalForm\" :rules=\"rules\" ref=\"abnormalForm\" label-width=\"250px\" label-position=\"left\">\r\n              <el-collapse v-model=\"activeNames\">\r\n                <el-collapse-item title=\"WAF绕过对抗\" name=\"1\">\r\n                  <el-form-item label=\"绕过对抗\" key=\"1\">\r\n                    <el-switch v-model=\"abnormalForm.bypass_check\"\r\n                      active-text=\"开启\" inactive-text=\"关闭\" active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n                  </el-form-item>\r\n                  <div v-if=\"abnormalForm.bypass_check == 'true'\">\r\n                    <el-form-item label=\"请求存在多个同名参数绕过\" key=\"2\">\r\n                      <el-switch v-model=\"abnormalForm.same_name_args_check\" active-text=\"开启\" inactive-text=\"关闭\"\r\n                        active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n                      <p class=\"form-info-color\">\r\n                        说明：当请求中存在多个同名参数时，WAF默认会取第一个参数名的值，这种情况是常见的WAF绕过手法，开启防护可以阻断这种异常请求\r\n                      </p>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"参数数量超过默认设置值\" key=\"3\">\r\n                      <el-switch v-model=\"abnormalForm.truncated_agrs_check\" active-text=\"开启\" inactive-text=\"关闭\"\r\n                        active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n                      <p class=\"form-info-color\">\r\n                        说明：默认情况下，WAF会解析200个参数，当超过默认值，后续参数将不会解析，开启防护可以阻断这种异常请求\r\n                      </p>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"请求body超过最大设置值\" key=\"4\">\r\n                      <el-switch v-model=\"abnormalForm.client_body_size_check\" active-text=\"开启\" inactive-text=\"关闭\"\r\n                        active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n                      <p class=\"form-info-color\">\r\n                        说明：获取body的最大值为100m,超过将导致waf无法获取body进行检测，开启可以阻断这种异常请求\r\n                      </p>\r\n                    </el-form-item>\r\n                  </div>\r\n                  \r\n                </el-collapse-item>\r\n                <el-collapse-item title=\"SSL连接数耗尽\" name=\"2\">\r\n                  <el-form-item label=\"SSL防护\" key=\"5\">\r\n                    <el-switch @change=\"onClickDownloadRule($event)\" v-model=\"abnormalForm.ssl_attack_check\"\r\n                      active-text=\"开启\" inactive-text=\"关闭\" active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n                  </el-form-item>\r\n                  <div v-if=\"abnormalForm.ssl_attack_check == 'true'\">\r\n                    <el-form-item label=\"异常连接数量统计\" key=\"6\" prop=\"ssl_attack_count\">\r\n                      <el-input v-model=\"abnormalForm.ssl_attack_count\" placeholder=\"请输入大于0的数字\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"统计时间（秒）\" key=\"7\" prop=\"ssl_attack_count_stat_time_period\">\r\n                      <el-input v-model=\"abnormalForm.ssl_attack_count_stat_time_period\" placeholder=\"请输入大于0的数字\">\r\n                      </el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"写入名单\" key=\"8\" prop=\"ssl_attack_block_name_list_uuid\">\r\n                      <el-select v-model=\"abnormalForm.ssl_attack_block_name_list_uuid\" placeholder=\"请选择或输入模糊搜索\"\r\n                        filterable>\r\n                        <el-option v-for=\"item in ruleOptions\" :key=\"item.ssl_attack_block_name_list_uuid\"\r\n                          :label=\"item.name_list_name\" :value=\"item.ssl_attack_block_name_list_uuid\">\r\n                        </el-option>\r\n                      </el-select>\r\n                    </el-form-item>\r\n                  </div>\r\n\r\n                </el-collapse-item>\r\n              </el-collapse>\r\n            </el-form>\r\n            <div class=\"margin-4x\"></div>\r\n            <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n              <el-col :span=\"24\">\r\n                <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n                  <el-col :span=\"12\">\r\n\r\n                  </el-col>\r\n                  <el-col :span=\"12\" class=\"text-align-right\">\r\n                    <el-button type=\"primary\" @click=\"onClickAbnormalSubmit('abnormalForm')\" :loading=\"loading\">保存\r\n                    </el-button>\r\n                  </el-col>\r\n                </el-row>\r\n              </el-col>\r\n            </el-row>\r\n          </el-col>\r\n        </el-row>\r\n      </el-col>\r\n\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mixin, JXAjax, validatePositiveInt } from \"../assets/scripts/common\";\r\nexport default {\r\n  mixins: [mixin],\r\n  data() {\r\n    return {\r\n      loading:false,\r\n      loadingPage: false,\r\n      activeNames: [\"1\", \"2\"],\r\n      abnormalForm: {},\r\n      ruleOptions: [],\r\n    };\r\n  },\r\n  computed: {\r\n    rules() {\r\n      return {\r\n        ssl_attack_count_stat_time_period: [\r\n          { required: true, message: '请输入大于0的数字', trigger: [\"blur\", \"change\"], },\r\n          { validator: validatePositiveInt, trigger: [\"blur\", \"change\"], },\r\n        ],\r\n        ssl_attack_count: [\r\n          { required: true, message: '请输入大于0的数字', trigger: [\"blur\", \"change\"], },\r\n          { validator: validatePositiveInt, trigger: [\"blur\", \"change\"], },\r\n        ],\r\n        \r\n        ssl_attack_block_name_list_uuid: [\r\n          {\r\n            required: true,\r\n            message: '请选择一个规则',\r\n            trigger: 'change',\r\n          },\r\n        ],\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.getData();\r\n  },\r\n  methods: {\r\n    \r\n    getData() {\r\n      var t = this;\r\n      JXAjax(\r\n        \"get\",\r\n        \"/waf/waf_get_sys_abnormal_handle\",\r\n        {},\r\n        function (response) {\r\n          t.loadingPage = false;\r\n          t.abnormalForm = response.data.message;\r\n          if (t.abnormalForm.ssl_attack_block_name_list_uuid == \"false\") { \r\n            t.abnormalForm.ssl_attack_block_name_list_uuid = \"\";\r\n          }\r\n          if (t.abnormalForm.ssl_attack_check == \"true\") { \r\n            t.onClickDownloadRule();\r\n          }\r\n        },\r\n        function () {\r\n          t.loadingPage = false;\r\n        }\r\n      );\r\n    },\r\n    onClickDownloadRule() {\r\n      var t = this;\r\n      if (t.abnormalForm.ssl_attack_check == \"true\") { \r\n        JXAjax(\r\n          \"post\",\r\n          \"/waf/waf_get_sys_name_list_list\",\r\n          {},\r\n          function (response) {\r\n            var _ruleOptions = response.data.message;\r\n            _ruleOptions.forEach(item => {\r\n              item.ssl_attack_block_name_list_uuid = item.name_list_uuid;\r\n            });\r\n            t.ruleOptions = _ruleOptions;\r\n            \r\n          },\r\n          function () {\r\n          },\r\n          \"no-message\"\r\n        );\r\n      }\r\n    },\r\n\r\n    onClickAbnormalSubmit(abnormalForm) {\r\n      var t = this;\r\n      t.loading = true;\r\n      var postUrl = \"/waf/waf_edit_sys_abnormal_handle\";\r\n      this.$refs[abnormalForm].validate((valid) => {\r\n        if (valid) {\r\n          t.loading = true;\r\n          JXAjax(\r\n            \"post\",\r\n            postUrl,\r\n            t.abnormalForm,\r\n            function (response) {\r\n              t.loading = false;\r\n              t.getData();\r\n            },\r\n            function () {\r\n              t.loading = false;\r\n            }\r\n          );\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n\r\n.sys-abnormal-handle-wrap {\r\n  max-width: 800px;\r\n  min-width: 400px;\r\n}\r\n.sys-abnormal-handle-wrap .el-collapse-item__header {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n}\r\n\r\n</style>\r\n","import { render } from \"./sys-abnormal-handle.vue?vue&type=template&id=49f57bca\"\nimport script from \"./sys-abnormal-handle.vue?vue&type=script&lang=js\"\nexport * from \"./sys-abnormal-handle.vue?vue&type=script&lang=js\"\n\nimport \"./sys-abnormal-handle.vue?vue&type=style&index=0&id=49f57bca&lang=css\"\n\nimport exportComponent from \"D:\\\\work\\\\jxwaf-mini\\\\jxwaf-mini-index\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sys-abnormal-handle.vue?vue&type=style&index=0&id=49f57bca&lang=css\""],"sourceRoot":""}