{"version":3,"sources":["webpack:///./src/components/sys-abnormal-handle.vue","webpack:///./src/components/sys-abnormal-handle.vue?d5d8","webpack:///./src/components/sys-abnormal-handle.vue?292a"],"names":["class","span","type","justify","model","abnormalForm","rules","ref","label-width","label-position","activeNames","title","name","label","key","bypass_check","active-text","inactive-text","active-value","inactive-value","same_name_args_check","truncated_agrs_check","client_body_size_check","onClickDownloadRule","$event","ssl_attack_check","prop","ssl_attack_count","placeholder","ssl_attack_count_stat_time_period","ssl_attack_block_name_list_uuid","filterable","ruleOptions","item","name_list_name","value","onClickAbnormalSubmit","loading","loadingPage","mixins","data","computed","required","message","trigger","validator","mounted","this","getData","methods","t","response","_ruleOptions","forEach","name_list_uuid","postUrl","$refs","validate","valid","render"],"mappings":"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","file":"static/index/js/chunk-2df8d8fd.js","sourcesContent":["<template>\r\n  <div class=\"sys-abnormal-handle-wrap\">\r\n    <el-row v-loading.fullscreen.lock=\"loadingPage\">\r\n      <el-col :span=\"24\">\r\n        <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n          <el-col :span=\"12\">\r\n            <h3>WAF异常处置配置</h3>\r\n          </el-col>\r\n          <el-col :span=\"12\" class=\"text-align-right\">\r\n\r\n          </el-col>\r\n        </el-row>\r\n        <div class=\"margin-4x\"></div>\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form :model=\"abnormalForm\" :rules=\"rules\" ref=\"abnormalForm\" label-width=\"250px\" label-position=\"left\">\r\n              <el-collapse v-model=\"activeNames\">\r\n                <el-collapse-item title=\"WAF绕过对抗\" name=\"1\">\r\n                  <el-form-item label=\"绕过对抗\" key=\"1\">\r\n                    <el-switch v-model=\"abnormalForm.bypass_check\"\r\n                      active-text=\"开启\" inactive-text=\"关闭\" active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n                  </el-form-item>\r\n                  <div v-if=\"abnormalForm.bypass_check == 'true'\">\r\n                    <el-form-item label=\"请求存在多个同名参数绕过\" key=\"2\">\r\n                      <el-switch v-model=\"abnormalForm.same_name_args_check\" active-text=\"开启\" inactive-text=\"关闭\"\r\n                        active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n                      <p class=\"form-info-color\">\r\n                        说明：当请求中存在多个同名参数时，WAF默认会取第一个参数名的值，这种情况是常见的WAF绕过手法，开启防护可以阻断这种异常请求\r\n                      </p>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"参数数量超过默认设置值\" key=\"3\">\r\n                      <el-switch v-model=\"abnormalForm.truncated_agrs_check\" active-text=\"开启\" inactive-text=\"关闭\"\r\n                        active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n                      <p class=\"form-info-color\">\r\n                        说明：默认情况下，WAF会解析200个参数，当超过默认值，后续参数将不会解析，开启防护可以阻断这种异常请求\r\n                      </p>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"请求body超过最大设置值\" key=\"4\">\r\n                      <el-switch v-model=\"abnormalForm.client_body_size_check\" active-text=\"开启\" inactive-text=\"关闭\"\r\n                        active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n                      <p class=\"form-info-color\">\r\n                        说明：获取body的最大值为100m,超过将导致waf无法获取body进行检测，开启可以阻断这种异常请求\r\n                      </p>\r\n                    </el-form-item>\r\n                  </div>\r\n                  \r\n                </el-collapse-item>\r\n                <el-collapse-item title=\"SSL连接数耗尽\" name=\"2\">\r\n                  <el-form-item label=\"SSL防护\" key=\"5\">\r\n                    <el-switch @change=\"onClickDownloadRule($event)\" v-model=\"abnormalForm.ssl_attack_check\"\r\n                      active-text=\"开启\" inactive-text=\"关闭\" active-value=\"true\" inactive-value=\"false\"></el-switch>\r\n                  </el-form-item>\r\n                  <div v-if=\"abnormalForm.ssl_attack_check == 'true'\">\r\n                    <el-form-item label=\"异常连接数量统计\" key=\"6\" prop=\"ssl_attack_count\">\r\n                      <el-input v-model=\"abnormalForm.ssl_attack_count\" placeholder=\"请输入大于0的数字\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"统计时间（秒）\" key=\"7\" prop=\"ssl_attack_count_stat_time_period\">\r\n                      <el-input v-model=\"abnormalForm.ssl_attack_count_stat_time_period\" placeholder=\"请输入大于0的数字\">\r\n                      </el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"写入名单\" key=\"8\" prop=\"ssl_attack_block_name_list_uuid\">\r\n                      <el-select v-model=\"abnormalForm.ssl_attack_block_name_list_uuid\" placeholder=\"请选择或输入模糊搜索\"\r\n                        filterable>\r\n                        <el-option v-for=\"item in ruleOptions\" :key=\"item.ssl_attack_block_name_list_uuid\"\r\n                          :label=\"item.name_list_name\" :value=\"item.ssl_attack_block_name_list_uuid\">\r\n                        </el-option>\r\n                      </el-select>\r\n                    </el-form-item>\r\n                  </div>\r\n\r\n                </el-collapse-item>\r\n              </el-collapse>\r\n            </el-form>\r\n            <div class=\"margin-4x\"></div>\r\n            <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n              <el-col :span=\"24\">\r\n                <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n                  <el-col :span=\"12\">\r\n\r\n                  </el-col>\r\n                  <el-col :span=\"12\" class=\"text-align-right\">\r\n                    <el-button type=\"primary\" @click=\"onClickAbnormalSubmit('abnormalForm')\" :loading=\"loading\">保存\r\n                    </el-button>\r\n                  </el-col>\r\n                </el-row>\r\n              </el-col>\r\n            </el-row>\r\n          </el-col>\r\n        </el-row>\r\n      </el-col>\r\n\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mixin, JXAjax, validatePositiveInt } from \"../assets/scripts/common\";\r\nexport default {\r\n  mixins: [mixin],\r\n  data() {\r\n    return {\r\n      loading:false,\r\n      loadingPage: false,\r\n      activeNames: [\"1\", \"2\"],\r\n      abnormalForm: {},\r\n      ruleOptions: [],\r\n    };\r\n  },\r\n  computed: {\r\n    rules() {\r\n      return {\r\n        ssl_attack_count_stat_time_period: [\r\n          { required: true, message: '请输入大于0的数字', trigger: [\"blur\", \"change\"], },\r\n          { validator: validatePositiveInt, trigger: [\"blur\", \"change\"], },\r\n        ],\r\n        ssl_attack_count: [\r\n          { required: true, message: '请输入大于0的数字', trigger: [\"blur\", \"change\"], },\r\n          { validator: validatePositiveInt, trigger: [\"blur\", \"change\"], },\r\n        ],\r\n        \r\n        ssl_attack_block_name_list_uuid: [\r\n          {\r\n            required: true,\r\n            message: '请选择一个规则',\r\n            trigger: 'change',\r\n          },\r\n        ],\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.getData();\r\n  },\r\n  methods: {\r\n    \r\n    getData() {\r\n      var t = this;\r\n      JXAjax(\r\n        \"get\",\r\n        \"/waf/waf_get_sys_abnormal_handle\",\r\n        {},\r\n        function (response) {\r\n          t.loadingPage = false;\r\n          t.abnormalForm = response.data.message;\r\n          if (t.abnormalForm.ssl_attack_block_name_list_uuid == \"false\") { \r\n            t.abnormalForm.ssl_attack_block_name_list_uuid = \"\";\r\n          }\r\n          if (t.abnormalForm.ssl_attack_check == \"true\") { \r\n            t.onClickDownloadRule();\r\n          }\r\n        },\r\n        function () {\r\n          t.loadingPage = false;\r\n        }\r\n      );\r\n    },\r\n    onClickDownloadRule() {\r\n      var t = this;\r\n      if (t.abnormalForm.ssl_attack_check == \"true\") { \r\n        JXAjax(\r\n          \"post\",\r\n          \"/waf/waf_get_sys_name_list_list\",\r\n          {},\r\n          function (response) {\r\n            var _ruleOptions = response.data.message;\r\n            _ruleOptions.forEach(item => {\r\n              item.ssl_attack_block_name_list_uuid = item.name_list_uuid;\r\n            });\r\n            t.ruleOptions = _ruleOptions;\r\n            \r\n          },\r\n          function () {\r\n          },\r\n          \"no-message\"\r\n        );\r\n      }\r\n    },\r\n\r\n    onClickAbnormalSubmit(abnormalForm) {\r\n      var t = this;\r\n      t.loading = true;\r\n      var postUrl = \"/waf/waf_edit_sys_abnormal_handle\";\r\n      this.$refs[abnormalForm].validate((valid) => {\r\n        if (valid) {\r\n          t.loading = true;\r\n          JXAjax(\r\n            \"post\",\r\n            postUrl,\r\n            t.abnormalForm,\r\n            function (response) {\r\n              t.loading = false;\r\n              t.getData();\r\n            },\r\n            function () {\r\n              t.loading = false;\r\n            }\r\n          );\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n\r\n.sys-abnormal-handle-wrap {\r\n  max-width: 800px;\r\n  min-width: 400px;\r\n}\r\n.sys-abnormal-handle-wrap .el-collapse-item__header {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n}\r\n\r\n</style>\r\n","import { render } from \"./sys-abnormal-handle.vue?vue&type=template&id=43cd1a40\"\nimport script from \"./sys-abnormal-handle.vue?vue&type=script&lang=js\"\nexport * from \"./sys-abnormal-handle.vue?vue&type=script&lang=js\"\n\nimport \"./sys-abnormal-handle.vue?vue&type=style&index=0&lang=css\"\nscript.render = render\n\nexport default script","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sys-abnormal-handle.vue?vue&type=style&index=0&lang=css\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sys-abnormal-handle.vue?vue&type=style&index=0&lang=css\""],"sourceRoot":""}