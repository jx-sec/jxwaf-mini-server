(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3feb1f36"],{"3c70":function(e,t,l){"use strict";l.r(t);var o=l("7a23");const a={class:"custom-edit-wrap"},c=Object(o["createTextVNode"])("网站防护"),r=Object(o["createTextVNode"])("防护配置"),i=Object(o["createTextVNode"])("IP黑名单"),n=Object(o["createTextVNode"])("新增"),d=Object(o["createTextVNode"])("编辑"),u=Object(o["createTextVNode"])("永久生效"),b=Object(o["createTextVNode"])("自定义"),p=Object(o["createVNode"])("p",{class:"form-info-color"}," 说明：标准模式无需人机交互 ",-1),m=Object(o["createTextVNode"])("保存 ");function f(e,t,l,f,j,s){const O=Object(o["resolveComponent"])("el-breadcrumb-item"),k=Object(o["resolveComponent"])("el-breadcrumb"),w=Object(o["resolveComponent"])("el-row"),_=Object(o["resolveComponent"])("el-input"),B=Object(o["resolveComponent"])("el-form-item"),h=Object(o["resolveComponent"])("el-radio"),V=Object(o["resolveComponent"])("el-option"),g=Object(o["resolveComponent"])("el-select"),v=Object(o["resolveComponent"])("el-form"),x=Object(o["resolveComponent"])("el-col"),C=Object(o["resolveComponent"])("el-button"),F=Object(o["resolveDirective"])("loading");return Object(o["openBlock"])(),Object(o["createBlock"])("div",a,[Object(o["createVNode"])(w,{class:"breadcrumb-style"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(k,{separator:"/"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(O,{to:{path:"/"}},{default:Object(o["withCtx"])(()=>[c]),_:1}),Object(o["createVNode"])(O,{to:{path:"/protection/"+j.domain}},{default:Object(o["withCtx"])(()=>[r]),_:1},8,["to"]),Object(o["createVNode"])(O,{to:{path:"/flow-black-ip/"+j.domain}},{default:Object(o["withCtx"])(()=>[i]),_:1},8,["to"]),"new"==j.uuid?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0},{default:Object(o["withCtx"])(()=>[n]),_:1})):(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:1},{default:Object(o["withCtx"])(()=>[d]),_:1}))]),_:1})]),_:1}),Object(o["createVNode"])(w,{class:"container-style"},{default:Object(o["withCtx"])(()=>[Object(o["withDirectives"])(Object(o["createVNode"])(x,{span:24},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(v,{class:"custom-edit-form",model:j.flowBlackIpForm,rules:s.rules,ref:"flowBlackIpForm","label-width":"180px"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])("div",null,[Object(o["createVNode"])(B,{label:"IP地址",prop:"ip"},{default:Object(o["withCtx"])(()=>["new"==j.uuid?(Object(o["openBlock"])(),Object(o["createBlock"])(_,{key:0,modelValue:j.flowBlackIpForm.ip,"onUpdate:modelValue":t[1]||(t[1]=e=>j.flowBlackIpForm.ip=e)},null,8,["modelValue"])):(Object(o["openBlock"])(),Object(o["createBlock"])(_,{key:1,modelValue:j.flowBlackIpForm.ip,"onUpdate:modelValue":t[2]||(t[2]=e=>j.flowBlackIpForm.ip=e),disabled:""},null,8,["modelValue"]))]),_:1}),Object(o["createVNode"])(B,{label:"描述"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(_,{modelValue:j.flowBlackIpForm.detail,"onUpdate:modelValue":t[3]||(t[3]=e=>j.flowBlackIpForm.detail=e)},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(B,{label:"过期时间（秒）",prop:"expire_time"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(h,{modelValue:j.flowBlackIpForm.ip_expire,"onUpdate:modelValue":t[4]||(t[4]=e=>j.flowBlackIpForm.ip_expire=e),label:"false"},{default:Object(o["withCtx"])(()=>[u]),_:1},8,["modelValue"]),Object(o["createVNode"])(h,{modelValue:j.flowBlackIpForm.ip_expire,"onUpdate:modelValue":t[5]||(t[5]=e=>j.flowBlackIpForm.ip_expire=e),label:"true"},{default:Object(o["withCtx"])(()=>[b]),_:1},8,["modelValue"]),"true"==j.flowBlackIpForm.ip_expire?(Object(o["openBlock"])(),Object(o["createBlock"])(_,{key:0,modelValue:j.flowBlackIpForm.expire_time,"onUpdate:modelValue":t[6]||(t[6]=e=>j.flowBlackIpForm.expire_time=e),placeholder:"请输入大于0的数字"},null,8,["modelValue"])):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(B,{label:"执行动作",prop:"block_action"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(g,{modelValue:j.flowBlackIpForm.block_action,"onUpdate:modelValue":t[7]||(t[7]=e=>j.flowBlackIpForm.block_action=e),placeholder:"请选择",onChange:t[8]||(t[8]=e=>s.onChangeRuleAction())},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(j.ruleAction,e=>(Object(o["openBlock"])(),Object(o["createBlock"])(V,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),"bot_check"==j.flowBlackIpForm.block_action?(Object(o["openBlock"])(),Object(o["createBlock"])(B,{key:0},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(g,{modelValue:j.action_value,"onUpdate:modelValue":t[9]||(t[9]=e=>j.action_value=e),placeholder:"请选择"},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(j.optionsBotCheck,e=>(Object(o["openBlock"])(),Object(o["createBlock"])(V,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),p]),_:1})):Object(o["createCommentVNode"])("",!0)])]),_:1},8,["model","rules"]),Object(o["createVNode"])(w,{type:"flex",class:"margin-border",justify:"space-between"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(x,{span:12},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])("a",{class:"el-button el-button--primary is-plain",href:"/#/flow-black-ip/"+j.domain},"返回",8,["href"])]),_:1}),Object(o["createVNode"])(x,{span:12,class:"text-align-right"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{type:"primary",onClick:t[10]||(t[10]=e=>s.onClickFlowBlackIpSubmit("flowBlackIpForm")),loading:j.loading},{default:Object(o["withCtx"])(()=>[m]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512),[[F,j.loadingPage,void 0,{fullscreen:!0,lock:!0}]])]),_:1})])}var j=l("362c"),s=l("6c02"),O={mixins:[j["c"]],data(){return{loading:!1,loadingPage:!1,domain:"",uuid:"new",flowBlackIpForm:{ip:"",ip_expire:"false",action_value:"",detail:""},type:"edit",ruleAction:[{value:"block",label:"阻断请求"},{value:"reject_response",label:"拒绝响应"},{value:"watch",label:"观察模式"},{value:"bot_check",label:"人机识别"}],optionsBotCheck:[{value:"standard",label:"标准"},{value:"slipper",label:"滑块"},{value:"image",label:"图片验证码"}],action_value:""}},computed:{rules(){return{ip:[{required:!0,message:"请输入规则名称",trigger:["blur","change"]},{validator:j["f"],trigger:["blur","change"]}],action_value:[{required:!0,message:"请选择匹配方式",trigger:"change"}],block_action:[{required:!0,message:"请选择执行动作",trigger:"change"}],expire_time:[{required:!0,message:"请输入大于0的数字",trigger:["blur","change"]},{validator:j["h"],trigger:["blur","change"]}]}}},mounted(){var e=this;const t=Object(s["c"])();e.uuid=t.params.uuid,e.domain=t.params.domain,e.loadingPage=!1,"new"!=e.uuid&&e.getData()},methods:{getData(){var e=this,t="/waf/waf_get_flow_black_ip",l={domain:e.domain,ip:e.uuid};Object(j["a"])("post",t,l,(function(t){e.loadingPage=!1,e.flowBlackIpForm=t.data.message,e.flowBlackIpForm.rule_name=e.uuid,e.action_value=e.flowBlackIpForm.action_value,"false"==e.flowBlackIpForm.ip_expire&&(e.flowBlackIpForm.expire_time="")}),(function(){e.loadingPage=!1}),"no-message")},onChangeRuleAction(){var e=this;e.action_value=""},onClickFlowBlackIpSubmit(e){var t=this;if("bot_check"==t.flowBlackIpForm.rule_action&&""==t.action_value)return t.$message({message:"请选择人机识别方式",type:"error"}),!1;t.flowBlackIpForm.domain=t.domain,t.flowBlackIpForm.action_value=t.action_value,"false"==t.flowBlackIpForm.ip_expire&&(t.flowBlackIpForm.expire_time=60);var l="/waf/waf_edit_flow_black_ip";"new"==t.uuid?l="/waf/waf_create_flow_black_ip":t.flowBlackIpForm.ip=t.uuid,this.$refs[e].validate(e=>{e&&(t.loading=!0,"false"==t.flowBlackIpForm.ip_expire&&(t.flowBlackIpForm.expire_time=0),Object(j["a"])("post",l,t.flowBlackIpForm,(function(e){t.loading=!1,window.location.href="/#/flow-black-ip/"+t.domain}),(function(){t.loading=!1})))})}}},k=(l("6985"),l("d959")),w=l.n(k);const _=w()(O,[["render",f]]);t["default"]=_},"686a":function(e,t,l){},6985:function(e,t,l){"use strict";l("686a")}}]);
//# sourceMappingURL=chunk-3feb1f36.440d6a79.js.map