{"version":3,"sources":["webpack:///./src/components/web-white-rule.vue","webpack:///./src/components/web-white-rule.vue?5f4c","webpack:///./src/components/web-white-rule.vue?b752"],"names":["class","_createVNode","style","_createBlock","_hoisted_1","_component_el_row","type","justify","_component_el_col","span","_hoisted_2","$data","ruleType","href","domain","_hoisted_3","_component_el_button","onClick","_cache","$event","$options","onClickChangeOrder","onClickDownloadRule","loading","loadingDownloadRule","_hoisted_6","_component_el_table","data","tableData","_component_el_table_column","prop","label","default","_withCtx","scope","row","rule_type","_hoisted_7","_hoisted_8","_component_el_switch","rule_status","onChange","onChangeRuleStatus","active-value","inactive-value","align","_component_el_popover","placement","width","visible","isVisiblePopover","reference","size","_hoisted_9","_hoisted_10","handleDelete","isShowOrder","circle","onClickChangeOrderSubmit","$index","title","orderLoading","_component_el_dialog","dialogDownloadRuleFormVisible","close-on-click-modal","onClosed","dialogCloseDownloadRule","footer","onClickDownloadRuleSubmit","_component_el_form","model","downloadRuleForm","label-position","label-width","rules","ref","_component_el_tabs","tab-position","onTabClick","handleTabClick","tabIndex","_component_el_tab_pane","name","_component_el_form_item","key","_component_el_select","rule_uuid","placeholder","filterable","_Fragment","_renderList","ruleOptions","item","_component_el_option","rule_name","value","ruleGroupOptions","rule_group_name","loadingPage","mixins","mixin","ruleBigMatchs","getRowKey","rowExpend","computed","required","message","trigger","mounted","route","useRoute","this","params","getData","methods","t","postUrl","oData","group_id","JXAjax","response","forEach","tab","length","getGroupRuleList","getRuleList","_ruleOptions","getDifference","_ruleGroupOptions","rule_group_uuid","arr1","arr2","newArr","flag","i","push","$refs","validate","valid","resetFields","index","operate","exchange_rule_uuid","__exports__","render"],"mappings":"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","file":"static/index/js/chunk-8d812804.3caad256.js","sourcesContent":["<template>\r\n  <div class=\"custom-wrap\">\r\n    <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n      <el-col :span=\"24\">\r\n        <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n          <el-col :span=\"12\">\r\n            <h3>Web白名单规则配置</h3>\r\n          </el-col>\r\n          <el-col :span=\"12\" class=\"text-align-right\">\r\n            <a v-if=\"ruleType == 'single_rule'\" class=\"el-button el-button--primary is-plain\"\r\n              :href=\"'/#/protection/' + domain + '/' + ruleType\">返回</a>\r\n            <a v-if=\"ruleType == 'group_rule'\" class=\"el-button el-button--primary is-plain\"\r\n              :href=\"'/#/group-protection/' + domain\">返回</a>\r\n          </el-col>\r\n        </el-row>\r\n      </el-col>\r\n    </el-row>\r\n    <div class=\"margin-4x\"></div>\r\n    <el-row v-loading.fullscreen.lock=\"loadingPage\">\r\n      <el-col :span=\"24\">\r\n        <el-row class=\"text-align-right\">\r\n          <el-button type=\"success\" @click=\"onClickChangeOrder()\">优先级调整</el-button>\r\n          <el-button type=\"primary\" @click=\"onClickDownloadRule()\" :loading=\"loadingDownloadRule\">加载规则</el-button>\r\n\r\n        </el-row>\r\n        <div class=\"demo-block\">\r\n          <el-table :data=\"tableData\" style=\"width: 100%\">\r\n            <el-table-column prop=\"rule_name\" label=\"名称\"></el-table-column>\r\n            <el-table-column prop=\"rule_detail\" label=\"描述\"></el-table-column>\r\n            <el-table-column prop=\"\" label=\"类型\">\r\n              <template #default=\"scope\">\r\n                <p v-if=\"scope.row.rule_type == 'group_rule'\">\r\n                  规则组\r\n                </p>\r\n                <p v-if=\"scope.row.rule_type == 'single_rule'\">\r\n                  规则\r\n                </p>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"rule_status\" label=\"状态\">\r\n              <template #default=\"scope\">\r\n                <el-switch v-model=\"scope.row.rule_status\" @change=\"onChangeRuleStatus(scope.row)\" active-value=\"true\"\r\n                  inactive-value=\"false\" />\r\n              </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"操作\" align=\"right\">\r\n              <template #default=\"scope\">\r\n                \r\n                <el-popover placement=\"top\" width=\"160\" v-model:visible=\"scope.row.isVisiblePopover\">\r\n                  <p>确定删除吗？</p>\r\n                  <div style=\"text-align: right; margin: 0\">\r\n                    <el-button size=\"mini\" type=\"text\" @click=\"scope.row.isVisiblePopover = false\">取消</el-button>\r\n                    <el-button type=\"primary\" size=\"mini\" @click=\"handleDelete(scope.row)\" :loading=\"loading\">确定\r\n                    </el-button>\r\n                  </div>\r\n                  <template #reference>\r\n                    <el-button type=\"text\" size=\"mini\" @click=\"scope.row.isVisiblePopover = true\">删除</el-button>\r\n                  </template>\r\n                </el-popover>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"优先级\" align=\"right\" v-if=\"!isShowOrder\">\r\n              <template #default=\"scope\">\r\n                <el-button type=\"success\" class=\"icon iconfont iconxiangshang\" circle\r\n                  @click=\"onClickChangeOrderSubmit(scope.$index, scope.row, 'up')\" title=\"上移\" :loading=\"orderLoading\" />\r\n                <el-button type=\"success\" class=\"icon iconfont iconxiangxia\" circle\r\n                  @click=\"onClickChangeOrderSubmit(scope.$index, scope.row, 'down')\" title=\"下移\"\r\n                  :loading=\"orderLoading\" />\r\n                <el-button type=\"success\" class=\"icon iconfont iconzhiding\" circle\r\n                  @click=\"onClickChangeOrderSubmit(scope.$index, scope.row, 'top')\" title=\"置顶\"\r\n                  :loading=\"orderLoading\" />\r\n              </template>\r\n            </el-table-column>\r\n\r\n          </el-table>\r\n        </div>\r\n      </el-col>\r\n\r\n      <el-dialog v-model=\"dialogDownloadRuleFormVisible\" title=\"加载\" :close-on-click-modal=\"false\" width=\"520px\"\r\n        @closed=\"dialogCloseDownloadRule\">\r\n\r\n        <el-form class=\"form-download-rule-dialog\" :model=\"downloadRuleForm\" label-position=\"left\" label-width=\"30px\"\r\n          :rules=\"rules\" ref=\"downloadRuleForm\">\r\n\r\n          <el-tabs tab-position=\"left\" style=\"height: 150px\" @tab-click=\"handleTabClick\" v-model=\"tabIndex\">\r\n            <el-tab-pane label=\"加载规则\" name=\"single_rule\">\r\n              <el-form-item label=\"\" key=\"1\">\r\n                <el-select v-model=\"downloadRuleForm.rule_uuid\" placeholder=\"请选择或输入模糊搜索\" filterable>\r\n                  <el-option v-for=\"item in ruleOptions\" :key=\"item.rule_uuid\" :label=\"item.rule_name\"\r\n                    :value=\"item.rule_uuid\">\r\n                  </el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-tab-pane>\r\n            <el-tab-pane label=\"加载规则组\" name=\"group_rule\">\r\n              <el-form-item label=\"\" key=\"2\">\r\n                <el-select v-model=\"downloadRuleForm.rule_uuid\" placeholder=\"请选择或输入模糊搜索\" filterable>\r\n                  <el-option v-for=\"item in ruleGroupOptions\" :key=\"item.rule_uuid\" :label=\"item.rule_group_name\"\r\n                    :value=\"item.rule_uuid\">\r\n                  </el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-tab-pane>\r\n          </el-tabs>\r\n\r\n        </el-form>\r\n        <template #footer class=\"dialog-footer\">\r\n          <el-button @click=\"dialogDownloadRuleFormVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"onClickDownloadRuleSubmit('downloadRuleForm')\" :loading=\"loading\">确定\r\n          </el-button>\r\n        </template>\r\n      </el-dialog>\r\n    </el-row>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mixin, JXAjax } from \"../assets/scripts/common\";\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  mixins: [mixin],\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      loadingPage: false,\r\n      isShowOrder: true,\r\n      orderLoading: false,\r\n      tableData: [],\r\n      domain: \"\",\r\n      ruleType: \"\",\r\n      dialogDownloadRuleFormVisible: false,\r\n      loadingDownloadRule: false,\r\n      downloadRuleForm: [],\r\n      ruleOptions: [],\r\n      ruleGroupOptions: [],\r\n\r\n      tabIndex: \"single_rule\",\r\n\r\n      ruleBigMatchs: [],\r\n      getRowKey(row) { \r\n        return row.rule_uuid;\r\n      },\r\n      rowExpend:[],\r\n    };\r\n  },\r\n  computed: {\r\n    rules() {\r\n      return {\r\n        rule_uuid: [\r\n          {\r\n            required: true,\r\n            message: '请选择一个规则',\r\n            trigger: 'change',\r\n          },\r\n        ],\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    const route = useRoute()\r\n    this.ruleType = route.params.ruleType;\r\n    this.domain = route.params.domain;\r\n    this.getData();\r\n  },\r\n  methods: {\r\n    getData() {\r\n      var t = this;\r\n      var postUrl = \"/waf/waf_get_web_white_rule_list\";\r\n      var oData = { domain: t.domain };\r\n      if (t.ruleType == \"group_rule\") {\r\n        postUrl = \"/waf/waf_get_group_web_white_rule_list\";\r\n        oData = { group_id: t.domain }\r\n      }\r\n      JXAjax(\r\n        \"post\",\r\n        postUrl,\r\n        oData,\r\n        function (response) {\r\n          t.loadingPage = false;\r\n          t.tableData = response.data.message;\r\n          t.tableData.forEach(item => {\r\n            item.isVisiblePopover = false;\r\n          })\r\n        },\r\n        function () {\r\n          t.loadingPage = false;\r\n        },\r\n        \"no-message\"\r\n      );\r\n    },\r\n    handleTabClick(tab) {\r\n      var t = this;\r\n      t.downloadRuleForm.rule_uuid = \"\";\r\n      if (t.ruleGroupOptions.length == 0 && t.tabIndex == \"group_rule\") {\r\n        t.getGroupRuleList();\r\n      }\r\n      if (t.ruleOptions.length == 0 && t.tabIndex == \"single_rule\") {\r\n        t.getRuleList();\r\n      }\r\n    },\r\n    onClickDownloadRule() {\r\n      var t = this;\r\n      t.dialogDownloadRuleFormVisible = true;\r\n      if (t.tabIndex == \"single_rule\") {\r\n        t.getRuleList();\r\n      } else {\r\n        t.getGroupRuleList();\r\n      }\r\n    },\r\n    getRuleList() {\r\n      var t = this;\r\n      t.loadingDownloadRule = true;\r\n      JXAjax(\r\n        \"post\",\r\n        \"/waf/waf_get_sys_web_white_rule_list\",\r\n        { rule_type: \"single_rule\" },\r\n        function (response) {\r\n          t.loadingDownloadRule = false;\r\n          var _ruleOptions = response.data.message;\r\n          t.ruleOptions = t.getDifference(t.tableData, _ruleOptions)\r\n        },\r\n        function () {\r\n          t.loadingDownloadRule = false;\r\n        },\r\n        \"no-message\"\r\n      );\r\n    },\r\n    getGroupRuleList() {\r\n      var t = this;\r\n      JXAjax(\r\n        \"post\",\r\n        \"/waf/waf_get_sys_web_white_rule_group_list\",\r\n        {},\r\n        function (response) {\r\n          t.loadingDownloadRule = false;\r\n          var _ruleGroupOptions = response.data.message;\r\n          _ruleGroupOptions.forEach(item => {\r\n            item.rule_uuid = item.rule_group_uuid;\r\n          })\r\n          t.ruleGroupOptions = t.getDifference(t.tableData, _ruleGroupOptions)\r\n        },\r\n        function () {\r\n          t.loadingDownloadRule = false;\r\n        },\r\n        \"no-message\"\r\n      );\r\n    },\r\n\r\n    getDifference(arr1, arr2) {\r\n      var newArr = [];\r\n      arr2.forEach(item => {\r\n        var flag = true;\r\n        arr1.forEach(i => {\r\n          if (i.rule_uuid == item.rule_uuid) {\r\n            flag = false\r\n          }\r\n        })\r\n        if (flag) {\r\n          newArr.push(item)\r\n        }\r\n      })\r\n      return newArr;\r\n    },\r\n    onClickDownloadRuleSubmit(downloadRuleForm) { \r\n      var t = this;\r\n      var postUrl = \"/waf/waf_load_web_white_rule\";\r\n      var oData = {};\r\n      if (t.ruleType == \"single_rule\") {\r\n        oData = { rule_uuid: t.downloadRuleForm.rule_uuid, domain: t.domain, rule_type: \"single_rule\" };\r\n        if (t.tabIndex == \"group_rule\") {\r\n          oData = { rule_uuid: t.downloadRuleForm.rule_uuid, domain: t.domain, rule_type: \"group_rule\" };\r\n        }\r\n      } else {\r\n        postUrl = \"/waf/waf_load_group_web_white_rule\";\r\n        oData = { rule_uuid: t.downloadRuleForm.rule_uuid, group_id: t.domain, rule_type: \"single_rule\" };\r\n        if (t.tabIndex == \"group_rule\") {\r\n          oData = { rule_uuid: t.downloadRuleForm.rule_uuid, group_id: t.domain, rule_type: \"group_rule\" };\r\n        }\r\n      }\r\n      this.$refs[downloadRuleForm].validate((valid) => {\r\n        if (valid) {\r\n          t.loading = true;\r\n          JXAjax(\r\n            \"post\",\r\n            postUrl,\r\n            oData,\r\n            function (response) {\r\n              t.loading = false;\r\n              t.dialogDownloadRuleFormVisible = false;\r\n              t.getData();\r\n            },\r\n            function () {\r\n              t.loading = false;\r\n            }\r\n          );\r\n        }\r\n      });\r\n    },\r\n    dialogCloseDownloadRule() {\r\n      this.downloadRuleForm = [];\r\n      this.$refs[\"downloadRuleForm\"].resetFields();\r\n    },\r\n\r\n\r\n    handleDelete(data) {\r\n      var t = this;\r\n      t.loading = true;\r\n      var postUrl = \"/waf/waf_del_web_white_rule\";\r\n      var oData = {\r\n        domain: t.domain,\r\n        rule_uuid: data.rule_uuid\r\n      };\r\n      if (t.ruleType == \"group_rule\") {\r\n        postUrl = \"/waf/waf_del_group_web_white_rule\";\r\n        oData = {\r\n          group_id: t.domain,\r\n          rule_uuid: data.rule_uuid\r\n        };\r\n      }\r\n      JXAjax(\r\n        \"post\",\r\n        postUrl,\r\n        oData,\r\n        function (response) {\r\n          data.isVisiblePopover = false;\r\n          t.loading = false;\r\n          t.getData();\r\n        },\r\n        function () {\r\n          t.loading = false;\r\n        }\r\n      );\r\n    },\r\n    onClickChangeOrder() { \r\n      var t = this;\r\n      t.isShowOrder = !t.isShowOrder;\r\n    },\r\n    onClickChangeOrderSubmit(index, value, operate) { \r\n      var t = this;\r\n      \r\n      var oData = {\r\n        rule_uuid: value.rule_uuid,\r\n      };\r\n      if (index > 0) { \r\n        if (operate == \"top\") {\r\n          oData.type = \"top\";\r\n        }\r\n        if (operate == \"up\") {\r\n          oData.type = \"exchange\";\r\n          oData.exchange_rule_uuid = t.tableData[index - 1].rule_uuid;\r\n        }\r\n      }\r\n\r\n      if (index < t.tableData.length - 1) { \r\n        if (operate == \"down\") {\r\n          oData.type = \"exchange\";\r\n          oData.exchange_rule_uuid = t.tableData[index + 1].rule_uuid;\r\n        }\r\n      }\r\n      var postUrl = \"/waf/waf_exchange_web_white_rule_priority\";\r\n\r\n      if (t.ruleType == \"group_rule\") {\r\n        postUrl = \"/waf/waf_exchange_group_web_white_rule_priority\";\r\n        oData.group_id = t.domain;\r\n      } else { \r\n        oData.domain = t.domain;\r\n      }\r\n\r\n      if (oData.type == \"top\" || oData.type == \"exchange\") { \r\n        t.orderLoading = true;  \r\n        JXAjax(\r\n          \"post\",\r\n          postUrl,\r\n          oData,\r\n          function (response) {\r\n            t.orderLoading = false;\r\n            t.getData();\r\n          },\r\n          function () {\r\n            t.orderLoading = false;\r\n          },\r\n          \"no-message\"\r\n        );\r\n      }\r\n      \r\n    },\r\n    onChangeRuleStatus(value) { \r\n      var t = this;\r\n      var oData = {\r\n        domain: t.domain,\r\n        rule_uuid: value.rule_uuid,\r\n        rule_status: value.rule_status\r\n      }\r\n      var postUrl = \"/waf/waf_edit_web_white_rule\";\r\n      if (t.ruleType == \"group_rule\") {\r\n        postUrl = \"/waf/waf_edit_group_web_white_rule\";\r\n        oData = {\r\n          group_id: t.domain,\r\n          rule_uuid: value.rule_uuid,\r\n          rule_status: value.rule_status\r\n        }\r\n      }\r\n      JXAjax(\r\n        \"post\",\r\n        postUrl,\r\n        oData,\r\n        function (response) {\r\n          t.getData();\r\n        },\r\n        function () {\r\n        },\r\n        \"no-message\"\r\n      );\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style>\r\n\r\n\r\n.custom-wrap {\r\n  /* max-width: 800px;\r\n  min-width: 400px; */\r\n}\r\n.el-button.button-block {\r\n  display: block;\r\n  margin-left: 0px;\r\n  text-align: right;\r\n  width: 100%;\r\n}\r\n\r\n.custom-wrap .rule-matchs-content .match-box-title {\r\n  display: inline-block;\r\n  text-align: left;\r\n  font-size: 14px;\r\n  color: #909399;\r\n  padding: 0 5px;\r\n  box-sizing: border-box;\r\n}\r\n.custom-wrap .rule-matchs-content .match-box-title:before {\r\n  content: \"*\";\r\n  color: #f56c6c;\r\n  margin-right: 4px;\r\n}\r\n.custom-wrap .match-inline-block {\r\n  width: 192px;\r\n}\r\n.custom-wrap .match-inline-block-small {\r\n  width: 150px;\r\n}\r\n.box-card-rule {\r\n  margin-bottom: 22px;\r\n  border: 1px solid #409eff;\r\n}\r\n.box-card-rule .card-item {\r\n  border-bottom: 1px solid #e0e3e9;\r\n  margin-bottom: 20px;\r\n}\r\n</style>\r\n","import { render } from \"./web-white-rule.vue?vue&type=template&id=9ba83588\"\nimport script from \"./web-white-rule.vue?vue&type=script&lang=js\"\nexport * from \"./web-white-rule.vue?vue&type=script&lang=js\"\n\nimport \"./web-white-rule.vue?vue&type=style&index=0&id=9ba83588&lang=css\"\n\nimport exportComponent from \"D:\\\\work\\\\jxwaf-mini\\\\jxwaf-mini-index\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./web-white-rule.vue?vue&type=style&index=0&id=9ba83588&lang=css\""],"sourceRoot":""}