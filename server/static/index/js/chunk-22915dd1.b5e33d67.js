(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22915dd1"],{"1dde":function(e,t,n){var r=n("d039"),o=n("b622"),i=n("2d00"),a=o("species");e.exports=function(e){return i>=51||!r((function(){var t=[],n=t.constructor={};return n[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2532:function(e,t,n){"use strict";var r=n("23e7"),o=n("5a34"),i=n("1d80"),a=n("577e"),c=n("ab13");r({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~a(i(this)).indexOf(a(o(e)),arguments.length>1?arguments[1]:void 0)}})},4291:function(e,t,n){},"4de4":function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").filter,i=n("1dde"),a=i("filter");r({target:"Array",proto:!0,forced:!a},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"5a34":function(e,t,n){var r=n("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},7952:function(e,t,n){"use strict";n.r(t);n("4de4"),n("caad"),n("2532"),n("b0c0");var r=n("7a23"),o=Object(r["createVNode"])("h3",null,"自定义响应配置",-1),i={class:"domain-search-input"},a=Object(r["createTextVNode"])("新增"),c={class:"demo-block"},l={key:0},u=Object(r["createVNode"])("i",{class:"el-icon-circle-check icon-success"},null,-1),d=Object(r["createTextVNode"])("已开启 "),s={key:1},b=Object(r["createVNode"])("i",{class:"el-icon-circle-close icon-error"},null,-1),f=Object(r["createTextVNode"])("已关闭 "),m=Object(r["createTextVNode"])("编辑"),h=Object(r["createVNode"])("p",null,"确定删除吗？",-1),O={style:{"text-align":"right",margin:"0"}},j=Object(r["createTextVNode"])("取消"),p=Object(r["createTextVNode"])("确定 "),_=Object(r["createTextVNode"])("删除"),V={key:0},y={class:"match_key_title"},g={class:"match-box-content"},C=Object(r["createTextVNode"])("删除"),v=Object(r["createTextVNode"])("新增"),w=Object(r["createTextVNode"])("无响应内容"),x=Object(r["createTextVNode"])("HTML响应内容"),N=Object(r["createTextVNode"])("取消"),k=Object(r["createTextVNode"])("确定");function F(e,t){var n=Object(r["resolveComponent"])("el-col"),F=Object(r["resolveComponent"])("el-row"),T=Object(r["resolveComponent"])("el-divider"),M=Object(r["resolveComponent"])("el-input"),B=Object(r["resolveComponent"])("el-button"),U=Object(r["resolveComponent"])("el-table-column"),I=Object(r["resolveComponent"])("el-popover"),D=Object(r["resolveComponent"])("el-table"),S=Object(r["resolveComponent"])("el-form-item"),P=Object(r["resolveComponent"])("el-switch"),z=Object(r["resolveComponent"])("el-radio"),E=Object(r["resolveComponent"])("el-radio-group"),H=Object(r["resolveComponent"])("el-form"),J=Object(r["resolveComponent"])("el-dialog");return Object(r["openBlock"])(),Object(r["createBlock"])(F,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(n,{span:24},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(F,{type:"flex",class:"row-bg",justify:"space-between"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(n,{span:24},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(F,{type:"flex",class:"row-bg",justify:"space-between"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(n,{span:12},{default:Object(r["withCtx"])((function(){return[o]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(T),Object(r["createVNode"])(F,{class:"text-align-right"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",i,[Object(r["createVNode"])(M,{placeholder:"请输入名称进行搜索","prefix-icon":"el-icon-search",modelValue:e.domainSearch,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.domainSearch=t})},null,8,["modelValue"])]),Object(r["createVNode"])(B,{type:"primary",onClick:t[2]||(t[2]=function(t){return e.onClickCreateIdentity()})},{default:Object(r["withCtx"])((function(){return[a]})),_:1})]})),_:1}),Object(r["createVNode"])("div",c,[Object(r["createVNode"])(D,{data:e.tableData.filter((function(t){return!e.domainSearch||t.name.toLowerCase().includes(e.domainSearch.toLowerCase())})),style:{width:"100%"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(U,{prop:"name",label:"名称"}),Object(r["createVNode"])(U,{prop:"detail",label:"详情"}),Object(r["createVNode"])(U,{prop:"status",label:"自定义响应头"},{default:Object(r["withCtx"])((function(e){return["true"==e.row.set_return_header_status?(Object(r["openBlock"])(),Object(r["createBlock"])("span",l,[u,d])):Object(r["createCommentVNode"])("",!0),"false"==e.row.set_return_header_status?(Object(r["openBlock"])(),Object(r["createBlock"])("span",s,[b,f])):Object(r["createCommentVNode"])("",!0)]})),_:1}),Object(r["createVNode"])(U,{label:"操作",align:"right"},{default:Object(r["withCtx"])((function(t){return[Object(r["createVNode"])(B,{size:"mini",onClick:function(n){return e.handleEdit(t.row)},class:"button-block",type:"text",loading:t.row.loading},{default:Object(r["withCtx"])((function(){return[m]})),_:2},1032,["onClick","loading"]),Object(r["createVNode"])(I,{placement:"top",width:"160",visible:t.row.isVisiblePopover,"onUpdate:visible":function(e){return t.row.isVisiblePopover=e}},{reference:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(B,{type:"text",size:"mini",onClick:function(e){return t.row.isVisiblePopover=!0}},{default:Object(r["withCtx"])((function(){return[_]})),_:2},1032,["onClick"])]})),default:Object(r["withCtx"])((function(){return[h,Object(r["createVNode"])("div",O,[Object(r["createVNode"])(B,{size:"mini",type:"text",onClick:function(e){return t.row.isVisiblePopover=!1}},{default:Object(r["withCtx"])((function(){return[j]})),_:2},1032,["onClick"]),Object(r["createVNode"])(B,{type:"primary",size:"mini",onClick:function(n){return e.handleDelete(t.row)},loading:e.loading},{default:Object(r["withCtx"])((function(){return[p]})),_:2},1032,["onClick","loading"])])]})),_:2},1032,["visible","onUpdate:visible"])]})),_:1})]})),_:1},8,["data"])])]})),_:1}),Object(r["createVNode"])(J,{title:e.domainTitle,modelValue:e.dialogIdentityFormVisible,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.dialogIdentityFormVisible=t}),width:"520px","close-on-click-modal":!1,onClosed:e.dialogClose},{footer:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(B,{onClick:t[11]||(t[11]=function(t){return e.dialogIdentityFormVisible=!1})},{default:Object(r["withCtx"])((function(){return[N]})),_:1}),Object(r["createVNode"])(B,{type:"primary",onClick:t[12]||(t[12]=function(t){return e.onClickIdentitySubmit("identityForm")}),loading:e.loading},{default:Object(r["withCtx"])((function(){return[k]})),_:1},8,["loading"])]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(H,{class:"form-tag-dialog identity-edit-form ",model:e.identityForm,size:"mini","label-position":"left","label-width":"130px",rules:e.rules,ref:"identityForm"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(S,{label:"名称",prop:"name",key:"1"},{default:Object(r["withCtx"])((function(){return["new"==e.domainType?(Object(r["openBlock"])(),Object(r["createBlock"])(M,{key:0,modelValue:e.identityForm.name,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.identityForm.name=t}),placeholder:"请输入字母开头，只包含字母、数字、下划线“_”、中横线“-”"},null,8,["modelValue"])):Object(r["createCommentVNode"])("",!0),"edit"==e.domainType?(Object(r["openBlock"])(),Object(r["createBlock"])(M,{key:1,modelValue:e.identityForm.name,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.identityForm.name=t}),disabled:"disabled"},null,8,["modelValue"])):Object(r["createCommentVNode"])("",!0)]})),_:1}),Object(r["createVNode"])(S,{label:"详情",key:"2"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(M,{modelValue:e.identityForm.detail,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.identityForm.detail=t}),placeholder:"请输入详情"},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(S,{label:"自定义header头",key:"3"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(P,{modelValue:e.identityForm.set_return_header_status,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.identityForm.set_return_header_status=t}),"active-value":"true","inactive-value":"false"},null,8,["modelValue"])]})),_:1}),"true"==e.identityForm.set_return_header_status?(Object(r["openBlock"])(),Object(r["createBlock"])("div",V,[Object(r["createVNode"])(S,{label:"响应头配置",class:"longer-cascader"},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.ruleConfigMatchs,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"match-box",key:"matchs"+n},[Object(r["createVNode"])("div",y,[Object(r["createVNode"])(M,{modelValue:t.key,"onUpdate:modelValue":function(e){return t.key=e},placeholder:"key"},null,8,["modelValue","onUpdate:modelValue"])]),Object(r["createVNode"])("div",g,[Object(r["createVNode"])(M,{modelValue:t.value,"onUpdate:modelValue":function(e){return t.value=e},placeholder:"value"},null,8,["modelValue","onUpdate:modelValue"])]),Object(r["createVNode"])(B,{onClick:Object(r["withModifiers"])((function(n){return e.removeConfigMatchs(t,e.bigIndex)}),["prevent"])},{default:Object(r["withCtx"])((function(){return[C]})),_:2},1032,["onClick"])])})),128)),Object(r["createVNode"])(B,{onClick:t[7]||(t[7]=function(t){return e.addConfigMatchs(e.bigIndex)}),plain:"",type:"primary",class:"button-new"},{default:Object(r["withCtx"])((function(){return[v]})),_:1})]})),_:1})])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(S,{label:"HTTP响应码",key:"4",prop:"return_code"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(M,{modelValue:e.identityForm.return_code,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.identityForm.return_code=t}),placeholder:"请输入"},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(S,{label:"HTTP响应内容",key:"5"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(E,{modelValue:e.return_html,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.return_html=t})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(z,{label:0},{default:Object(r["withCtx"])((function(){return[w]})),_:1}),Object(r["createVNode"])(z,{label:1},{default:Object(r["withCtx"])((function(){return[x]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["withDirectives"])(Object(r["createVNode"])(S,{key:"6"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(M,{modelValue:e.identityForm.return_html,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.identityForm.return_html=t}),type:"textarea",autosize:{minRows:10}},null,8,["modelValue"])]})),_:1},512),[[r["vShow"],1==e.return_html]])]})),_:1},8,["model","rules"])]})),_:1},8,["title","modelValue","onClosed"])]})),_:1})}n("159b"),n("a434");var T=n("362c"),M={mixins:[T["b"]],data:function(){return{domainTitle:"新增",domainType:"new",domainSearch:"",dialogIdentityFormVisible:!1,loading:!1,identityForm:{name:"",detail:"",set_return_header_status:"false",set_return_header_value:"",return_code:"200",return_html:""},return_html:0,tableData:[],ruleConfigMatchs:[{key:"",value:""}]}},computed:{rules:function(){return{name:[{required:!0,message:"请输入字母开头，只包含字母、数字、下划线“_”、中横线“-”",trigger:["blur","change"]},{validator:T["h"],trigger:["blur","change"]}],return_code:[{required:!0,message:"请输入HTTP响应码",trigger:["blur","change"]},{validator:T["g"],trigger:["blur","change"]}]}}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;Object(T["a"])("get","/waf/waf_get_sys_custom_response_list",{},(function(t){e.tableData=t.data.message,e.tableData.forEach((function(e){e.isVisiblePopover=!1}))}),(function(){}))},dialogClose:function(){this.identityForm={name:"",detail:"",set_return_header_status:"false",set_return_header_value:"",return_code:"200",return_html:""},this.return_html=0,this.ruleConfigMatchs=[{key:"",value:""}],this.$refs["identityForm"].resetFields()},onClickIdentitySubmit:function(e){var t=this,n="/waf/waf_create_sys_custom_response";if("edit"==t.domainType&&(n="/waf/waf_edit_sys_custom_response"),0==t.return_html&&(t.identityForm.return_html=""),"true"==t.identityForm.set_return_header_status&&0==t.ruleConfigMatchs.length)return t.$message({message:"请对自定义header头进行配置",type:"error"}),!1;t.identityForm.set_return_header_value=JSON.stringify(t.ruleConfigMatchs),this.$refs[e].validate((function(e){e&&(t.loading=!0,Object(T["a"])("post",n,t.identityForm,(function(e){t.loading=!1,t.dialogIdentityFormVisible=!1,t.getData()}),(function(){t.loading=!1})))}))},onClickCreateIdentity:function(){var e=this;e.domainTitle="新增",e.domainType="new",e.dialogIdentityFormVisible=!0},handleEdit:function(e){var t=this;e.loading=!0,Object(T["a"])("post","/waf/waf_get_sys_custom_response",{name:e.name},(function(n){e.loading=!1;var r=n.data.message;if(t.identityForm.name=r.name,t.identityForm.detail=r.detail,t.identityForm.set_return_header_status=r.set_return_header_status,t.identityForm.set_return_header_value=r.set_return_header_value,t.identityForm.return_code=r.return_code,t.identityForm.return_html=r.return_html,""==t.identityForm.return_html?t.return_html=0:t.return_html=1,"true"==t.identityForm.set_return_header_status){var o=JSON.parse(t.identityForm.set_return_header_value),i=[];for(var a in o){var c=o[a];i.push({key:c.key,value:c.value})}t.ruleConfigMatchs=i}t.domainTitle="编辑",t.domainType="edit",t.dialogIdentityFormVisible=!0}),(function(){e.loading=!1}),"no-message")},handleDelete:function(e){var t=this;t.loading=!0,Object(T["a"])("post","/waf/waf_del_sys_custom_response",{name:e.name},(function(n){e.isVisiblePopover=!1,t.loading=!1,t.getData()}),(function(){t.loading=!1}))},removeConfigMatchs:function(e){var t=this.ruleConfigMatchs.indexOf(e);t>0&&this.ruleConfigMatchs.splice(t,1)},addConfigMatchs:function(){this.ruleConfigMatchs.push({key:"",value:""})}}};n("bf35");M.render=F;t["default"]=M},8418:function(e,t,n){"use strict";var r=n("a04b"),o=n("9bf2"),i=n("5c6c");e.exports=function(e,t,n){var a=r(t);a in e?o.f(e,a,i(0,n)):e[a]=n}},a434:function(e,t,n){"use strict";var r=n("23e7"),o=n("23cb"),i=n("a691"),a=n("50c4"),c=n("7b0b"),l=n("65f0"),u=n("8418"),d=n("1dde"),s=d("splice"),b=Math.max,f=Math.min,m=9007199254740991,h="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!s},{splice:function(e,t){var n,r,d,s,O,j,p=c(this),_=a(p.length),V=o(e,_),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=_-V):(n=y-2,r=f(b(i(t),0),_-V)),_+n-r>m)throw TypeError(h);for(d=l(p,r),s=0;s<r;s++)O=V+s,O in p&&u(d,s,p[O]);if(d.length=r,n<r){for(s=V;s<_-r;s++)O=s+r,j=s+n,O in p?p[j]=p[O]:delete p[j];for(s=_;s>_-r+n;s--)delete p[s-1]}else if(n>r)for(s=_-r;s>V;s--)O=s+r-1,j=s+n-1,O in p?p[j]=p[O]:delete p[j];for(s=0;s<n;s++)p[s+V]=arguments[s+2];return p.length=_-r+n,d}})},ab13:function(e,t,n){var r=n("b622"),o=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[o]=!1,"/./"[e](t)}catch(r){}}return!1}},bf35:function(e,t,n){"use strict";n("4291")},caad:function(e,t,n){"use strict";var r=n("23e7"),o=n("4d64").includes,i=n("44d2");r({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")}}]);
//# sourceMappingURL=chunk-22915dd1.b5e33d67.js.map