(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f396e0d2"],{"256d":function(e,t,o){"use strict";o("a7c3")},2667:function(e,t,o){"use strict";o.r(t);var l=o("7a23");const a={class:"custom-wrap"},i=Object(l["createVNode"])("h3",null,"全局组件管理",-1),n=Object(l["createVNode"])("div",{class:"margin-4x"},null,-1),c=Object(l["createTextVNode"])("优先级调整"),d=Object(l["createTextVNode"])("加载组件"),r={class:"demo-block"},u=Object(l["createVNode"])("p",null,"确定删除吗？",-1),s={style:{"text-align":"right",margin:"0"}},b=Object(l["createTextVNode"])("取消"),g=Object(l["createTextVNode"])("确定 "),w=Object(l["createTextVNode"])("删除"),p=Object(l["createTextVNode"])("取消"),O=Object(l["createTextVNode"])("确定 ");function j(e,t,o,j,m,h){const f=Object(l["resolveComponent"])("el-col"),C=Object(l["resolveComponent"])("el-row"),V=Object(l["resolveComponent"])("el-button"),x=Object(l["resolveComponent"])("el-table-column"),_=Object(l["resolveComponent"])("el-switch"),v=Object(l["resolveComponent"])("el-popover"),k=Object(l["resolveComponent"])("el-table"),N=Object(l["resolveComponent"])("el-option"),D=Object(l["resolveComponent"])("el-select"),y=Object(l["resolveComponent"])("el-form-item"),R=Object(l["resolveComponent"])("el-form"),S=Object(l["resolveComponent"])("el-dialog"),F=Object(l["resolveDirective"])("loading");return Object(l["openBlock"])(),Object(l["createBlock"])("div",a,[Object(l["createVNode"])(C,{type:"flex",class:"row-bg",justify:"space-between"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(f,{span:24},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(C,{type:"flex",class:"row-bg",justify:"space-between"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(f,{span:12},{default:Object(l["withCtx"])(()=>[i]),_:1})]),_:1})]),_:1})]),_:1}),n,Object(l["withDirectives"])(Object(l["createVNode"])(C,null,{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(f,{span:24},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(C,{class:"text-align-right"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(V,{type:"success",onClick:t[1]||(t[1]=e=>h.onClickChangeOrder())},{default:Object(l["withCtx"])(()=>[c]),_:1}),Object(l["createVNode"])(V,{type:"primary",onClick:t[2]||(t[2]=e=>h.onClickDownloadRule()),loading:m.loadingDownloadRule},{default:Object(l["withCtx"])(()=>[d]),_:1},8,["loading"])]),_:1}),Object(l["createVNode"])("div",r,[Object(l["createVNode"])(k,{data:m.tableData,style:{width:"100%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(x,{prop:"name",label:"组件名称"}),Object(l["createVNode"])(x,{prop:"conf",label:"组件配置"}),Object(l["createVNode"])(x,{prop:"status",label:"组件状态"},{default:Object(l["withCtx"])(e=>[Object(l["createVNode"])(_,{modelValue:e.row.status,"onUpdate:modelValue":t=>e.row.status=t,onChange:t=>h.onChangeRuleStatus(e.row),"active-value":"true","inactive-value":"false"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),Object(l["createVNode"])(x,{label:"操作",align:"right"},{default:Object(l["withCtx"])(e=>[Object(l["createVNode"])(v,{placement:"top",width:"160",visible:e.row.isVisiblePopover,"onUpdate:visible":t=>e.row.isVisiblePopover=t},{reference:Object(l["withCtx"])(()=>[Object(l["createVNode"])(V,{type:"text",size:"mini",onClick:t=>e.row.isVisiblePopover=!0},{default:Object(l["withCtx"])(()=>[w]),_:2},1032,["onClick"])]),default:Object(l["withCtx"])(()=>[u,Object(l["createVNode"])("div",s,[Object(l["createVNode"])(V,{size:"mini",type:"text",onClick:t=>e.row.isVisiblePopover=!1},{default:Object(l["withCtx"])(()=>[b]),_:2},1032,["onClick"]),Object(l["createVNode"])(V,{type:"primary",size:"mini",onClick:t=>h.handleDelete(e.row),loading:m.loading},{default:Object(l["withCtx"])(()=>[g]),_:2},1032,["onClick","loading"])])]),_:2},1032,["visible","onUpdate:visible"])]),_:1}),m.isShowOrder?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createBlock"])(x,{key:0,label:"优先级",align:"right"},{default:Object(l["withCtx"])(e=>[Object(l["createVNode"])(V,{type:"success",class:"icon iconfont iconxiangshang",circle:"",onClick:t=>h.onClickChangeOrderSubmit(e.$index,e.row,"up"),title:"上移",loading:m.orderLoading},null,8,["onClick","loading"]),Object(l["createVNode"])(V,{type:"success",class:"icon iconfont iconxiangxia",circle:"",onClick:t=>h.onClickChangeOrderSubmit(e.$index,e.row,"down"),title:"下移",loading:m.orderLoading},null,8,["onClick","loading"]),Object(l["createVNode"])(V,{type:"success",class:"icon iconfont iconzhiding",circle:"",onClick:t=>h.onClickChangeOrderSubmit(e.$index,e.row,"top"),title:"置顶",loading:m.orderLoading},null,8,["onClick","loading"])]),_:1}))]),_:1},8,["data"])])]),_:1}),Object(l["createVNode"])(S,{modelValue:m.dialogDownloadRuleFormVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>m.dialogDownloadRuleFormVisible=e),title:"加载","close-on-click-modal":!1,width:"520px",onClosed:h.dialogCloseDownloadRule},{footer:Object(l["withCtx"])(()=>[Object(l["createVNode"])(V,{onClick:t[4]||(t[4]=e=>m.dialogDownloadRuleFormVisible=!1)},{default:Object(l["withCtx"])(()=>[p]),_:1}),Object(l["createVNode"])(V,{type:"primary",onClick:t[5]||(t[5]=e=>h.onClickDownloadRuleSubmit("downloadRuleForm")),loading:m.loading},{default:Object(l["withCtx"])(()=>[O]),_:1},8,["loading"])]),default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(R,{class:"form-download-rule-dialog",model:m.downloadRuleForm,"label-position":"left","label-width":"130px",rules:h.rules,ref:"downloadRuleForm"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(y,{label:"加载组件",key:"1",prop:"uuid"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(D,{modelValue:m.downloadRuleForm.uuid,"onUpdate:modelValue":t[3]||(t[3]=e=>m.downloadRuleForm.uuid=e),placeholder:"请选择或输入模糊搜索",filterable:""},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createBlock"])(l["Fragment"],null,Object(l["renderList"])(m.ruleOptions,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(N,{key:e.uuid,label:e.name,value:e.uuid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","onClosed"])]),_:1},512),[[F,m.loadingPage,void 0,{fullscreen:!0,lock:!0}]])])}var m=o("362c"),h={mixins:[m["b"]],data(){return{loading:!1,loadingPage:!1,isShowOrder:!0,orderLoading:!1,tableData:[],dialogDownloadRuleFormVisible:!1,loadingDownloadRule:!1,downloadRuleForm:[],ruleOptions:[],jsontest:""}},computed:{rules(){return{uuid:[{required:!0,message:"请选择一个规则",trigger:"change"}]}}},mounted(){this.getData();let e={name:"JSON中国",url:"http://www.json.org.cn",page:88,isNonProfit:!0,address:{street:"浙大路38号.",city:"浙江杭州",country:"中国"},links:[{name:"Google",url:"http://www.google.com"},{name:"Baidu",url:"http://www.baidu.com"},{name:"SoSo",url:"http://www.SoSo.com"}]};this.jsontest=JSON.stringify(e,null,2),console.log(this.jsontest)},methods:{getData(){var e=this,t="/waf/waf_get_global_component_protection_list",o={};Object(m["a"])("post",t,o,(function(t){e.loadingPage=!1,e.tableData=t.data.message,e.tableData.forEach(e=>{e.isVisiblePopover=!1})}),(function(){e.loadingPage=!1}),"no-message")},onClickDownloadRule(){var e=this;e.loadingDownloadRule=!0,e.dialogDownloadRuleFormVisible=!0,Object(m["a"])("post","/waf/waf_get_sys_component_protection_list",{},(function(t){e.loadingDownloadRule=!1;var o=t.data.message;e.ruleOptions=e.getDifference(e.tableData,o)}),(function(){e.loadingDownloadRule=!1}),"no-message")},getDifference(e,t){var o=[];return t.forEach(t=>{var l=!0;e.forEach(e=>{e.uuid==t.uuid&&(l=!1)}),l&&o.push(t)}),o},onClickDownloadRuleSubmit(e){var t=this,o="/waf/waf_load_global_component_protection",l={uuid:t.downloadRuleForm.uuid};this.$refs[e].validate(e=>{e&&(t.loading=!0,Object(m["a"])("post",o,l,(function(e){t.loading=!1,t.dialogDownloadRuleFormVisible=!1,t.getData()}),(function(){t.loading=!1})))})},dialogCloseDownloadRule(){this.downloadRuleForm=[],this.$refs["downloadRuleForm"].resetFields()},handleDelete(e){var t=this;t.loading=!0;var o="/waf/waf_del_global_component_protection",l={uuid:e.uuid};Object(m["a"])("post",o,l,(function(o){e.isVisiblePopover=!1,t.loading=!1,t.getData()}),(function(){t.loading=!1}))},onClickChangeOrder(){var e=this;e.isShowOrder=!e.isShowOrder},onClickChangeOrderSubmit(e,t,o){var l=this,a={uuid:t.uuid};e>0&&("top"==o&&(a.type="top"),"up"==o&&(a.type="exchange",a.exchange_uuid=l.tableData[e-1].uuid)),e<l.tableData.length-1&&"down"==o&&(a.type="exchange",a.exchange_uuid=l.tableData[e+1].uuid);var i="/waf/waf_edit_global_component_protection_conf";"top"!=a.type&&"exchange"!=a.type||(l.orderLoading=!0,Object(m["a"])("post",i,a,(function(e){l.orderLoading=!1,l.getData()}),(function(){l.orderLoading=!1}),"no-message"))},onChangeRuleStatus(e){var t=this,o={uuid:e.uuid,status:e.status},l="/waf/waf_edit_global_component_protection_status";Object(m["a"])("post",l,o,(function(e){t.getData()}),(function(){}),"no-message")}}},f=(o("256d"),o("d959")),C=o.n(f);const V=C()(h,[["render",j]]);t["default"]=V},a7c3:function(e,t,o){}}]);
//# sourceMappingURL=chunk-f396e0d2.a13beeda.js.map