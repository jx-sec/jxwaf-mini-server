(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43c2cb36"],{"3cff":function(e,t,l){"use strict";l("eec6")},e7fd:function(e,t,l){"use strict";l.r(t);var a=l("7a23");const o=Object(a["createTextVNode"])("系统配置"),c=Object(a["createTextVNode"])("SSL证书管理"),i={class:"data-search-input"},s=Object(a["createTextVNode"])("添加SSL证书"),r={class:"demo-block"},d={key:0},n={key:1},b=Object(a["createTextVNode"])("编辑"),u=Object(a["createVNode"])("p",null,"确定删除吗？",-1),m={style:{"text-align":"right",margin:"0"}},p=Object(a["createTextVNode"])("取消"),j=Object(a["createTextVNode"])("确定 "),O=Object(a["createTextVNode"])("删除"),h=Object(a["createTextVNode"])("点击上传公钥文件"),g=Object(a["createTextVNode"])("点击上传私钥文件"),V=Object(a["createTextVNode"])("取消"),C=Object(a["createTextVNode"])("确定");function f(e,t,l,f,w,_){const x=Object(a["resolveComponent"])("el-breadcrumb-item"),y=Object(a["resolveComponent"])("el-breadcrumb"),N=Object(a["resolveComponent"])("el-row"),k=Object(a["resolveComponent"])("el-input"),v=Object(a["resolveComponent"])("el-button"),F=Object(a["resolveComponent"])("el-table-column"),S=Object(a["resolveComponent"])("el-popover"),T=Object(a["resolveComponent"])("el-table"),P=Object(a["resolveComponent"])("el-col"),D=Object(a["resolveComponent"])("el-form-item"),B=Object(a["resolveComponent"])("el-upload"),L=Object(a["resolveComponent"])("el-form"),U=Object(a["resolveComponent"])("el-dialog"),E=Object(a["resolveDirective"])("loading");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(N,{class:"breadcrumb-style"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(y,{separator:"/"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(x,{to:{path:"/ssl-manage"}},{default:Object(a["withCtx"])(()=>[o]),_:1}),Object(a["createVNode"])(x,null,{default:Object(a["withCtx"])(()=>[c]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(N,{class:"container-style"},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])(P,{span:24},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(N,{class:"text-align-right"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])("div",i,[Object(a["createVNode"])(k,{placeholder:"请输入证书域名进行搜索","prefix-icon":"el-icon-search",modelValue:w.dataSearch,"onUpdate:modelValue":t[1]||(t[1]=e=>w.dataSearch=e)},null,8,["modelValue"]),Object(a["createVNode"])(v,{icon:"el-icon-search",onClick:_.onChangeSearch,class:"search-icon-btn"},null,8,["onClick"])]),Object(a["createVNode"])(v,{type:"primary",onClick:t[2]||(t[2]=e=>_.onClickCreateSSL())},{default:Object(a["withCtx"])(()=>[s]),_:1})]),_:1}),Object(a["createVNode"])("div",r,[Object(a["createVNode"])(T,{data:w.tableData.filter(e=>!w.dataSearch||e.ssl_domain.toLowerCase().includes(w.dataSearch.toLowerCase())),style:{width:"100%"}},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(F,{prop:"ssl_domain",label:"SSL证书域名"}),Object(a["createVNode"])(F,{prop:"detail",label:"描述"}),Object(a["createVNode"])(F,{label:"状态"},{default:Object(a["withCtx"])(e=>["true"==e.row.status?(Object(a["openBlock"])(),Object(a["createBlock"])("p",d,"已加载")):Object(a["createCommentVNode"])("",!0),"false"==e.row.status?(Object(a["openBlock"])(),Object(a["createBlock"])("p",n,"未加载")):Object(a["createCommentVNode"])("",!0)]),_:1}),Object(a["createVNode"])(F,{prop:"update_time",label:"更新时间"}),Object(a["createVNode"])(F,{label:"操作",align:"right"},{default:Object(a["withCtx"])(e=>[Object(a["createVNode"])(v,{size:"mini",onClick:t=>_.handleEdit(e.row),class:"button-block",type:"text"},{default:Object(a["withCtx"])(()=>[b]),_:2},1032,["onClick"]),Object(a["createVNode"])(S,{placement:"top",width:"160",visible:e.row.isVisiblePopover,"onUpdate:visible":t=>e.row.isVisiblePopover=t},{reference:Object(a["withCtx"])(()=>[Object(a["createVNode"])(v,{type:"text",size:"mini",onClick:t=>e.row.isVisiblePopover=!0},{default:Object(a["withCtx"])(()=>[O]),_:2},1032,["onClick"])]),default:Object(a["withCtx"])(()=>[u,Object(a["createVNode"])("div",m,[Object(a["createVNode"])(v,{size:"mini",type:"text",onClick:t=>e.row.isVisiblePopover=!1},{default:Object(a["withCtx"])(()=>[p]),_:2},1032,["onClick"]),Object(a["createVNode"])(v,{type:"primary",size:"mini",onClick:t=>_.handleDelete(e.row),loading:w.loading},{default:Object(a["withCtx"])(()=>[j]),_:2},1032,["onClick","loading"])])]),_:2},1032,["visible","onUpdate:visible"])]),_:1})]),_:1},8,["data"])])]),_:1},512),[[E,w.loadingPage,void 0,{fullscreen:!0,lock:!0}]])]),_:1}),Object(a["createVNode"])(U,{title:w.sslTitle,modelValue:w.dialogSslFormVisible,"onUpdate:modelValue":t[10]||(t[10]=e=>w.dialogSslFormVisible=e),width:"520px","close-on-click-modal":!1,onClose:_.dialogClose},{footer:Object(a["withCtx"])(()=>[Object(a["createVNode"])(v,{onClick:t[8]||(t[8]=e=>w.dialogSslFormVisible=!1)},{default:Object(a["withCtx"])(()=>[V]),_:1}),Object(a["createVNode"])(v,{type:"primary",onClick:t[9]||(t[9]=e=>_.onClicksslSubmit("sslForm")),loading:w.loading},{default:Object(a["withCtx"])(()=>[C]),_:1},8,["loading"])]),default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(L,{class:"form-tag-dialog",model:w.sslForm,size:"mini","label-position":"left","label-width":"130px",rules:_.rules,ref:"sslForm"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(D,{label:"SSL证书域名",prop:"ssl_domain",key:"1"},{default:Object(a["withCtx"])(()=>["new"==w.sslType?(Object(a["openBlock"])(),Object(a["createBlock"])(k,{key:0,modelValue:w.sslForm.ssl_domain,"onUpdate:modelValue":t[3]||(t[3]=e=>w.sslForm.ssl_domain=e),placeholder:"支持通配符，且为小写，例如 www.jxwaf.com"},null,8,["modelValue"])):Object(a["createCommentVNode"])("",!0),"edit"==w.sslType?(Object(a["openBlock"])(),Object(a["createBlock"])(k,{key:1,modelValue:w.sslForm.ssl_domain,"onUpdate:modelValue":t[4]||(t[4]=e=>w.sslForm.ssl_domain=e),disabled:"disabled"},null,8,["modelValue"])):Object(a["createCommentVNode"])("",!0)]),_:1}),Object(a["createVNode"])(D,{label:"描述",key:"2"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(k,{modelValue:w.sslForm.detail,"onUpdate:modelValue":t[5]||(t[5]=e=>w.sslForm.detail=e),placeholder:"SSL证书详情描述"},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(D,{label:"公钥",prop:"public_key",key:"3"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(k,{modelValue:w.sslForm.public_key,"onUpdate:modelValue":t[6]||(t[6]=e=>w.sslForm.public_key=e),placeholder:"需包含证书链",type:"textarea",rows:4},null,8,["modelValue"]),Object(a["createVNode"])(B,{ref:"uploadCrt",action:"",class:"upload-ssl",limit:1,"auto-upload":!1,"on-exceed":_.handleExceedCrt,"on-change":_.changeCrt},{trigger:Object(a["withCtx"])(()=>[Object(a["createVNode"])(v,{type:"primary",plain:""},{default:Object(a["withCtx"])(()=>[h]),_:1})]),default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(v,{class:"ml-3",type:"success",style:{display:"none"}})]),_:1},8,["on-exceed","on-change"])]),_:1}),Object(a["createVNode"])(D,{label:"私钥",prop:"private_key",key:"4"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(k,{modelValue:w.sslForm.private_key,"onUpdate:modelValue":t[7]||(t[7]=e=>w.sslForm.private_key=e),type:"textarea",rows:4},null,8,["modelValue"]),Object(a["createVNode"])(B,{ref:"uploadKey",action:"",class:"upload-ssl",limit:1,"auto-upload":!1,"on-exceed":_.handleExceedKey,"on-change":_.changeKey},{trigger:Object(a["withCtx"])(()=>[Object(a["createVNode"])(v,{type:"primary",plain:""},{default:Object(a["withCtx"])(()=>[g]),_:1})]),default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(v,{class:"ml-3",type:"success",style:{display:"none"}})]),_:1},8,["on-exceed","on-change"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"])])}var w=l("362c"),_={mixins:[w["c"]],data(){return{sslTitle:"添加证书",sslType:"new",dataSearch:"",loadingPage:!1,dialogSslFormVisible:!1,loading:!1,sslForm:{detail:"",ssl_domain:"",private_key:"",public_key:""},tableData:[]}},computed:{rules(){return{ssl_domain:[{required:!0,message:"请输入证书名",trigger:["blur","change"]}],public_key:[{required:!0,message:"请输入公钥",trigger:"blur"}],private_key:[{required:!0,message:"请输入私钥",trigger:"blur"}]}}},mounted(){this.getData()},methods:{getData(){var e=this;Object(w["a"])("get","/waf/waf_get_ssl_manage_list",{},(function(t){e.loadingPage=!1,e.tableData=t.data.message,e.tableData.forEach(e=>{e.isVisiblePopover=!1})}),(function(){e.loadingPage=!1}))},onChangeSearch(){var e=this;e.loadingPage=!0,setTimeout((function(){e.loadingPage=!1}),300)},dialogClose(){this.sslForm={detail:"",ssl_domain:"",public_key:"",private_key:""},this.$refs["sslForm"].resetFields()},onClicksslSubmit(e){var t=this,l="/waf/waf_create_ssl_manage";"edit"==t.sslType&&(l="/waf/waf_edit_ssl_manage"),this.$refs[e].validate(e=>{e&&(t.loading=!0,Object(w["a"])("post",l,t.sslForm,(function(e){t.loading=!1,t.dialogSslFormVisible=!1,t.getData()}),(function(){t.loading=!1})))})},onClickCreateSSL(){var e=this;e.sslTitle="添加证书",e.sslType="new",e.dialogSslFormVisible=!0},handleEdit(e){var t=this;t.loadingPage=!0;var l="/waf/waf_get_ssl_manage",a={ssl_domain:e.ssl_domain};t.sslTitle="编辑证书",t.sslType="edit",t.dialogSslFormVisible=!0,Object(w["a"])("post",l,a,(function(e){t.loadingPage=!1,t.sslForm=e.data.message}),(function(){t.loadingPage=!1}),"no-message")},handleDelete(e){var t=this;t.loading=!0,Object(w["a"])("post","/waf/waf_del_ssl_manage",{ssl_domain:e.ssl_domain},(function(l){e.isVisiblePopover=!1,t.loading=!1,t.getData()}),(function(){t.loading=!1}))},handleExceedCrt(e,t){let l=this,a=e[0];l.$refs.uploadCrt.clearFiles(),setTimeout((function(){l.$refs.uploadCrt.handleStart(a)}),1e3)},changeCrt(e,t){let l=t[0],a=this,o=new FileReader;o.readAsText(l.raw),o.onload=e=>{const t=e.target.result;a.sslForm.public_key=t}},handleExceedKey(e,t){let l=this,a=e[0];l.$refs.uploadKey.clearFiles(),setTimeout((function(){l.$refs.uploadKey.handleStart(a)}),1e3)},changeKey(e,t){let l=t[0],a=this,o=new FileReader;o.readAsText(l.raw),o.onload=e=>{const t=e.target.result;a.sslForm.private_key=t}}}},x=(l("3cff"),l("d959")),y=l.n(x);const N=y()(_,[["render",f]]);t["default"]=N},eec6:function(e,t,l){}}]);
//# sourceMappingURL=chunk-43c2cb36.24ddcf96.js.map