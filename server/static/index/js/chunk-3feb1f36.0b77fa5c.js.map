{"version":3,"sources":["webpack:///./src/components/flow-black-ip-edit.vue","webpack:///./src/components/flow-black-ip-edit.vue?3e24","webpack:///./src/components/flow-black-ip-edit.vue?12bf"],"names":["class","_createVNode","_createBlock","_hoisted_1","_component_el_row","_component_el_breadcrumb","separator","_component_el_breadcrumb_item","to","path","$data","domain","uuid","key","_component_el_col","span","_component_el_form","model","flowBlackIpForm","rules","$options","ref","label-width","_component_el_form_item","label","prop","_component_el_input","ip","$event","disabled","detail","_component_el_radio","ip_expire","expire_time","placeholder","_component_el_select","block_action","onChange","_cache","onChangeRuleAction","_Fragment","_renderList","ruleAction","item","_component_el_option","value","action_value","optionsBotCheck","_hoisted_9","type","justify","href","_component_el_button","onClick","onClickFlowBlackIpSubmit","loading","loadingPage","mixins","mixin","data","computed","required","message","trigger","validator","validateIP","validatePositiveInt","mounted","t","this","route","useRoute","params","getData","methods","postUrl","oData","JXAjax","response","rule_name","rule_action","$message","$refs","validate","valid","window","location","__exports__","render"],"mappings":"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","file":"static/index/js/chunk-3feb1f36.0b77fa5c.js","sourcesContent":["<template>\r\n  <div class=\"custom-edit-wrap\">\r\n    <el-row class=\"breadcrumb-style\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item :to=\"{ path: '/' }\">网站防护</el-breadcrumb-item>\r\n        <el-breadcrumb-item :to=\"{ path: '/protection/' + domain }\">防护配置</el-breadcrumb-item>\r\n        <el-breadcrumb-item :to=\"{ path: '/flow-black-ip/' + domain }\">IP黑名单</el-breadcrumb-item>\r\n        <el-breadcrumb-item v-if=\"uuid == 'new'\">新增</el-breadcrumb-item>\r\n        <el-breadcrumb-item v-else>编辑</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </el-row>\r\n    <el-row class=\"container-style\">\r\n      <el-col :span=\"24\" v-loading.fullscreen.lock=\"loadingPage\">\r\n        <el-form class=\"custom-edit-form\" :model=\"flowBlackIpForm\" :rules=\"rules\" ref=\"flowBlackIpForm\"\r\n          label-width=\"180px\">\r\n          <div>\r\n            <el-form-item label=\"IP地址\" prop=\"ip\">\r\n              <el-input v-if=\"uuid == 'new'\" v-model=\"flowBlackIpForm.ip\">\r\n              </el-input>\r\n              <el-input v-else v-model=\"flowBlackIpForm.ip\" disabled> </el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"描述\">\r\n              <el-input v-model=\"flowBlackIpForm.detail\"> </el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"过期时间（秒）\" prop=\"expire_time\">\r\n              <el-radio v-model=\"flowBlackIpForm.ip_expire\" label=\"false\">永久生效</el-radio>\r\n              <el-radio v-model=\"flowBlackIpForm.ip_expire\" label=\"true\">自定义</el-radio>\r\n              <el-input v-model=\"flowBlackIpForm.expire_time\" placeholder=\"请输入大于0的数字\"\r\n                v-if=\"flowBlackIpForm.ip_expire == 'true'\">\r\n              </el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"执行动作\" prop=\"block_action\">\r\n              <el-select v-model=\"flowBlackIpForm.block_action\" placeholder=\"请选择\" @change=\"onChangeRuleAction()\">\r\n                <el-option v-for=\"item in ruleAction\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n\r\n            <el-form-item v-if=\"flowBlackIpForm.block_action == 'bot_check'\">\r\n              <el-select v-model=\"action_value\" placeholder=\"请选择\">\r\n                <el-option v-for=\"item in optionsBotCheck\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n                </el-option>\r\n              </el-select>\r\n              <p class=\"form-info-color\">\r\n                说明：标准模式无需人机交互\r\n              </p>\r\n            </el-form-item>\r\n          </div>\r\n        </el-form>\r\n        <el-row type=\"flex\" class=\"margin-border\" justify=\"space-between\">\r\n          <el-col :span=\"12\">\r\n            <a class=\"el-button el-button--primary is-plain\" :href=\"'/#/flow-black-ip/' + domain\">返回</a>\r\n          </el-col>\r\n          <el-col :span=\"12\" class=\"text-align-right\">\r\n            <el-button type=\"primary\" @click=\"onClickFlowBlackIpSubmit('flowBlackIpForm')\" :loading=\"loading\">保存\r\n            </el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-col>\r\n    </el-row>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mixin, JXAjax, validateIP, validatePositiveInt } from \"../assets/scripts/common\";\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  mixins: [mixin],\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      loadingPage: false,\r\n      domain:'',\r\n      uuid: 'new',\r\n      flowBlackIpForm: {\r\n        ip: \"\",\r\n        ip_expire: 'false',\r\n        action_value: \"\",\r\n        detail: \"\",\r\n      },\r\n      type: 'edit',\r\n      ruleAction: [\r\n        { value: \"block\", label: \"阻断请求\" },\r\n        { value: \"reject_response\", label: \"拒绝响应\" },\r\n        { value: \"watch\", label: \"观察模式\" },\r\n        { value: \"bot_check\", label: \"人机识别\" },\r\n        \r\n      ],\r\n      optionsBotCheck: [\r\n        { value: \"standard\", label: \"标准\" },\r\n        { value: \"slipper\", label: \"滑块\" },\r\n        { value: \"image\", label: \"图片验证码\" },\r\n      ],\r\n      action_value: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    rules() {\r\n      return {\r\n        ip: [\r\n          {\r\n            required: true,\r\n            message: '请输入规则名称',\r\n            trigger: [\"blur\", \"change\"],\r\n          },\r\n          {\r\n            validator: validateIP,\r\n            trigger: [\"blur\", \"change\"],\r\n          },\r\n        ],\r\n        action_value: [\r\n          { \r\n            required: true, message: '请选择匹配方式', trigger: 'change' \r\n          }\r\n        ],\r\n        block_action: [\r\n          {\r\n            required: true,\r\n            message: '请选择执行动作',\r\n            trigger: 'change' \r\n          },\r\n        ], \r\n        expire_time: [\r\n          {\r\n            required: true,\r\n            message: '请输入大于0的数字',\r\n            trigger: [\"blur\", \"change\"],\r\n          },\r\n          {\r\n            validator: validatePositiveInt,\r\n            trigger: [\"blur\", \"change\"],\r\n          },\r\n        ],\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    var t = this;\r\n    const route = useRoute()\r\n    t.uuid = route.params.uuid;\r\n    t.domain = route.params.domain;\r\n    t.loadingPage = false\r\n    if (t.uuid != \"new\") { \r\n      t.getData();\r\n    }\r\n  },\r\n  methods: {\r\n    getData() {\r\n      var t = this;\r\n      var postUrl = \"/waf/waf_get_flow_black_ip\";\r\n      var oData = { domain: t.domain, ip: t.uuid };\r\n      JXAjax(\r\n        \"post\",\r\n        postUrl,\r\n        oData,\r\n        function (response) {\r\n          t.loadingPage = false;\r\n          t.flowBlackIpForm = response.data.message;\r\n          t.flowBlackIpForm.rule_name = t.uuid;\r\n          t.action_value = t.flowBlackIpForm.action_value;\r\n          if (t.flowBlackIpForm.ip_expire == \"false\") {\r\n            t.flowBlackIpForm.expire_time = \"\"\r\n          }\r\n         },\r\n        function () {\r\n          t.loadingPage = false;\r\n        },\r\n        \"no-message\"\r\n      );\r\n      \r\n    },\r\n    onChangeRuleAction() {\r\n      var t = this;\r\n      t.action_value = \"\";\r\n    },\r\n    onClickFlowBlackIpSubmit(flowBlackIpForm) {\r\n      var t = this;      \r\n      if (t.flowBlackIpForm.rule_action == \"bot_check\" && t.action_value == \"\") {\r\n        t.$message({\r\n          message: '请选择人机识别方式',\r\n          type: \"error\",\r\n        });\r\n        return false;\r\n      }\r\n      t.flowBlackIpForm.domain = t.domain;\r\n      t.flowBlackIpForm.action_value = t.action_value;\r\n      if (t.flowBlackIpForm.ip_expire == \"false\") { \r\n        t.flowBlackIpForm.expire_time = 60\r\n      }\r\n      var postUrl = \"/waf/waf_edit_flow_black_ip\";\r\n      if (t.uuid == 'new') {\r\n        postUrl = \"/waf/waf_create_flow_black_ip\";\r\n      } else {\r\n        t.flowBlackIpForm.ip = t.uuid;\r\n      }  \r\n      this.$refs[flowBlackIpForm].validate((valid) => {\r\n        if (valid) {\r\n          t.loading = true;\r\n          if (t.flowBlackIpForm.ip_expire == \"false\") {\r\n            t.flowBlackIpForm.expire_time = 0\r\n          }\r\n          JXAjax(\r\n            \"post\",\r\n            postUrl,\r\n            t.flowBlackIpForm,\r\n            function (response) {\r\n              t.loading = false;\r\n              window.location.href = '/#/flow-black-ip/' + t.domain;\r\n              \r\n            },\r\n            function () {\r\n              t.loading = false;\r\n            }\r\n          );\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.custom-edit-wrap {\r\n  max-width: 800px;\r\n  min-width: 400px;\r\n}\r\n.custom-edit-wrap .match-inline-block {\r\n  width: 192px;\r\n}\r\n.custom-edit-form .el-checkbox + .el-checkbox {\r\n  margin-left: 0px;\r\n  margin-right: 30px;\r\n}\r\n.custom-edit-form .el-checkbox {\r\n  margin-left: 0px;\r\n  margin-right: 30px;\r\n}\r\n.custom-edit-form .el-select {\r\n  width: 100%;\r\n}\r\n.custom-edit-form .match-box {\r\n  \r\n  display: inline-block;\r\n  margin-bottom: 10px;\r\n}\r\n.custom-edit-form .el-button {\r\n  margin-left: 10px;\r\n}\r\n\r\n.custom-edit-form .match-box-content {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n.custom-edit-form .match_key_cascader {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n.custom-edit-form .match_key_input {\r\n  position: absolute;\r\n  display: inline-block;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n}\r\n.custom-edit-form .rule-level-box .el-form-item__content {\r\n  margin-left: 10px;\r\n}\r\n.box-card-rule {\r\n  margin-bottom: 22px;\r\n  border: 1px solid #409eff;\r\n}\r\n.box-card-rule .card-item {\r\n  border-bottom: 1px solid #e0e3e9;\r\n  margin-bottom: 20px;\r\n}\r\n.box-card-rule .card-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n}\r\n.box-card-rule .card-item-bottom {\r\n  text-align: right;\r\n  margin-bottom: 20px;\r\n}\r\n</style>\r\n","import { render } from \"./flow-black-ip-edit.vue?vue&type=template&id=7cd053b3\"\nimport script from \"./flow-black-ip-edit.vue?vue&type=script&lang=js\"\nexport * from \"./flow-black-ip-edit.vue?vue&type=script&lang=js\"\n\nimport \"./flow-black-ip-edit.vue?vue&type=style&index=0&id=7cd053b3&lang=css\"\n\nimport exportComponent from \"D:\\\\work\\\\jxwaf-2023\\\\jxwaf-base-2023\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./flow-black-ip-edit.vue?vue&type=style&index=0&id=7cd053b3&lang=css\""],"sourceRoot":""}