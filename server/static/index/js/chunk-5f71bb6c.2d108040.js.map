{"version":3,"sources":["webpack:///./src/components/conf-backup-load.vue?080c","webpack:///./src/components/conf-backup-load.vue","webpack:///./src/components/conf-backup-load.vue?1c66"],"names":["class","_createVNode","style","_createBlock","_hoisted_1","_component_el_row","_component_el_breadcrumb","separator","_component_el_breadcrumb_item","to","path","_component_el_col","span","_component_el_radio_group","$data","radioType","$event","size","_component_el_radio_button","label","value","_component_el_form","model","loadForm","rules","$options","ref","label-position","_component_el_form_item","key","prop","_component_el_input","json","type","autosize","minRows","justify","_component_el_button","onClick","_cache","onClickLoadSubmit","loading","_component_el_card","shadow","plain","onClickBackupSubmit","loadingPage","_component_el_dialog","dialogVisibleInfo","title","width","close-on-click-modal","footer","_withCtx","_hoisted_9","loadingInfo","onClickInfoConfirm","_hoisted_6","_hoisted_7","_hoisted_8","mixins","mixin","data","computed","required","message","trigger","mounted","methods","t","this","$refs","validate","valid","postUrl","axios","url","method","responseType","then","response","fileURL","window","URL","createObjectURL","Blob","fileLink","document","createElement","href","setAttribute","body","appendChild","click","postData","JXAjax","__exports__","render"],"mappings":"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","file":"static/index/js/chunk-5f71bb6c.2d108040.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./conf-backup-load.vue?vue&type=style&index=0&id=61275a69&lang=css\"","<template>\r\n  <div class=\"sys-abnormal-handle-wrap\">\r\n    <el-row class=\"breadcrumb-style\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item :to=\"{ path: '/conf-backup-load' }\">系统配置</el-breadcrumb-item>\r\n        <el-breadcrumb-item>配置备份&加载</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </el-row>\r\n    <el-row class=\"container-style\">\r\n      <el-col :span=\"24\" v-loading.fullscreen.lock=\"loadingPage\">\r\n        <el-radio-group v-model=\"radioType\" size=\"large\">\r\n          <el-radio-button label=\"备份\" value=\"backup\" style=\"margin-right: 0px;\" />\r\n          <el-radio-button label=\"加载\" value=\"load\" />\r\n        </el-radio-group>\r\n        <div v-show=\"radioType == '加载'\">\r\n          <el-form :model=\"loadForm\" :rules=\"rules\" ref=\"loadForm\" label-position=\"top\">\r\n            <el-form-item label=\"请以JSON格式输入配置\" key=\"1\" prop=\"json\">\r\n              <el-input v-model=\"loadForm.json\" type=\"textarea\" :autosize=\"{ minRows: 10 }\" />\r\n            </el-form-item>\r\n          </el-form>\r\n          <el-row type=\"flex\" class=\"margin-border\" justify=\"space-between\">\r\n            <el-col :span=\"12\"> </el-col>\r\n            <el-col :span=\"12\" class=\"text-align-right\">\r\n              <el-button type=\"primary\" @click=\"onClickLoadSubmit('loadForm')\" :loading=\"loading\">加载\r\n              </el-button>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n        <div v-show=\"radioType == '备份'\">\r\n          <el-card style=\"text-align: center;padding: 40px; margin: 15px 0;\" shadow=\"hover\">\r\n            <el-button type=\"success\" plain @click=\"onClickBackupSubmit()\" :loading=\"loading\" style=\"\">点击按钮进行备份\r\n            </el-button>\r\n          </el-card>\r\n        </div>\r\n      </el-col>\r\n    </el-row>\r\n    <el-dialog v-model=\"dialogVisibleInfo\" title=\"提示\" width=\"580px\" :close-on-click-modal=\"false\">\r\n      <p style=\"color: #e6a23c;\">加载操作将删除当前系统配置，请谨慎操作！</p>\r\n      <p class=\"margin-2x\"></p>\r\n      <p style=\"color: #e6a23c;\">建议先备份再进行加载操作！</p>\r\n      <template #footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisibleInfo = false; loadingInfo = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"onClickInfoConfirm()\" :loadingInfo=\"loadingInfo\">\r\n            执行加载操作\r\n          </el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mixin, JXAjax } from \"../assets/scripts/common\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  mixins: [mixin],\r\n  data() {\r\n    return {\r\n      loading:false,\r\n      loadingPage: false,\r\n      loadForm: {json:\"\"},\r\n      radioType:\"备份\",\r\n      dialogVisibleInfo: false,\r\n      loadingInfo: false,\r\n    };\r\n  },\r\n  computed: {\r\n    rules() {\r\n      return {\r\n        json: [\r\n          { required: true, message: '请输入', trigger: [\"blur\", \"change\"], },\r\n        ],\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    //备份是backup,下载到本地，不需要传参\r\n    //加载是load，上传json保存到服务器，需要传json\r\n  },\r\n  methods: {\r\n    onClickLoadSubmit(loadForm) {\r\n      var t = this;\r\n      t.loading = true;\r\n      this.$refs[loadForm].validate((valid) => {\r\n        t.loading = false;\r\n        if (valid) {\r\n          t.dialogVisibleInfo = true;\r\n        }\r\n      });\r\n    },\r\n    onClickBackupSubmit() {\r\n      var t = this;\r\n      t.loading = true;\r\n      var postUrl = \"/waf/waf_conf_backup\";\r\n      t.loading = true;\r\n      axios({\r\n        url: postUrl,\r\n        method: 'GET',\r\n        responseType: 'blob',\r\n      }).then((response) => {\r\n        var fileURL = window.URL.createObjectURL(new Blob([response.data]));\r\n        var fileLink = document.createElement('a');\r\n\r\n        fileLink.href = fileURL;\r\n        fileLink.setAttribute('download', 'backup_data.json');\r\n        document.body.appendChild(fileLink);\r\n\r\n        fileLink.click();\r\n        t.loading = false;\r\n      });\r\n    },\r\n    onClickInfoConfirm() { \r\n      var t = this;\r\n      var postUrl = \"/waf/waf_conf_load\";\r\n      var postData = t.loadForm.json;\r\n      t.loadingInfo = true;\r\n      JXAjax(\r\n        \"post\",\r\n        postUrl,\r\n        postData,\r\n        function (response) {\r\n          t.dialogVisibleInfo = false;\r\n          t.loadingInfo = false;\r\n        },\r\n        function () {\r\n          t.loadingInfo = false;\r\n        }\r\n      );\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n\r\n.sys-abnormal-handle-wrap {\r\n  max-width: 800px;\r\n  min-width: 400px;\r\n}\r\n</style>\r\n","import { render } from \"./conf-backup-load.vue?vue&type=template&id=61275a69\"\nimport script from \"./conf-backup-load.vue?vue&type=script&lang=js\"\nexport * from \"./conf-backup-load.vue?vue&type=script&lang=js\"\n\nimport \"./conf-backup-load.vue?vue&type=style&index=0&id=61275a69&lang=css\"\n\nimport exportComponent from \"D:\\\\work\\\\jxwaf-2023\\\\jxwaf-base-2023\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}