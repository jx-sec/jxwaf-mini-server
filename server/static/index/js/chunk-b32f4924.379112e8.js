(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b32f4924"],{7005:function(e,t,a){"use strict";a.r(t);var c=a("7a23"),i=a("9d64"),o=a.n(i);const l=Object(c["createTextVNode"])("运营中心"),s=Object(c["createTextVNode"])("数据统计"),r={class:"query-time-container statistics"},d={class:"statistics-container"},n={class:"left-content"},b=Object(c["createVNode"])("div",{class:"content"},[Object(c["createVNode"])("p",null,[Object(c["createVNode"])("i",{class:"el-icon-s-custom"}),Object(c["createTextVNode"])("用户")])],-1),j={class:"progress-text"},O={class:"text-box"},m={class:"item"},u=Object(c["createVNode"])("div",{class:"title"},"请求次数",-1),p={class:"detail"},V={class:"item"},g=Object(c["createVNode"])("div",{class:"title"},"请求IP数量",-1),N={class:"detail"},v={class:"item"},_=Object(c["createVNode"])("div",{class:"title"},"请求成功次数",-1),h={class:"detail"},D={class:"item"},w=Object(c["createVNode"])("div",{class:"title"},"请求4xx失败次数",-1),x={class:"detail"},f={class:"item"},T=Object(c["createVNode"])("div",{class:"title"},"请求5xx失败次数",-1),S={class:"detail"},C={class:"item"},y=Object(c["createVNode"])("div",{class:"title"},"请求平均耗时",-1),k={class:"detail"},q={class:"item"},P=Object(c["createVNode"])("div",{class:"title"},"请求耗时中位数",-1),z={class:"detail"},L={class:"middle-content"},U=Object(c["createVNode"])("div",{class:"progress-left"},[Object(c["createVNode"])("div",{class:"progress-item"},[Object(c["createVNode"])("div",{class:"line-box"},[Object(c["createVNode"])("div",{class:"line line-1"}),Object(c["createVNode"])("i",{class:"el-icon-arrow-right arrow-1"})])])],-1),B={class:"middle-box"},M=Object(c["createVNode"])("div",{class:"content"},[Object(c["createVNode"])("p",{class:"jxwaf-box"},[Object(c["createVNode"])("i",{class:"jxwaf-icon"},[Object(c["createVNode"])("img",{src:o.a,alt:"logo"})]),Object(c["createTextVNode"])("WAF ")])],-1),I={class:"progress-text"},R={class:"text-box"},A={class:"item"},F=Object(c["createVNode"])("div",{class:"title"},"攻击次数",-1),H={class:"detail"},E={class:"item"},J=Object(c["createVNode"])("div",{class:"title"},"拦截次数",-1),$={class:"detail"},W={class:"item"},G=Object(c["createVNode"])("div",{class:"title"},"攻击IP数量",-1),K={class:"detail"},Q={class:"item"},X=Object(c["createVNode"])("div",{class:"title"},"拦截IP数量",-1),Y={class:"detail"},Z=Object(c["createVNode"])("div",{class:"progress-right"},[Object(c["createVNode"])("div",{class:"progress-item"},[Object(c["createVNode"])("div",{class:"line-box"},[Object(c["createVNode"])("div",{class:"line line-2"}),Object(c["createVNode"])("i",{class:"el-icon-arrow-right arrow-2"})])])],-1),ee={class:"right-content"},te=Object(c["createVNode"])("div",{class:"content"},[Object(c["createVNode"])("p",null,[Object(c["createVNode"])("i",{class:"el-icon-s-platform"}),Object(c["createTextVNode"])("业务服务器")])],-1),ae={class:"progress-text"},ce={class:"text-box"},ie={class:"item"},oe=Object(c["createVNode"])("div",{class:"title"},"回源次数",-1),le={class:"detail"},se={class:"item"},re=Object(c["createVNode"])("div",{class:"title"},"回源IP数",-1),de={class:"detail"},ne={class:"item"},be=Object(c["createVNode"])("div",{class:"title"},"回源成功次数",-1),je={class:"detail"},Oe={class:"item"},me=Object(c["createVNode"])("div",{class:"title"},"回源4xx失败次数",-1),ue={class:"detail"},pe={class:"item"},Ve=Object(c["createVNode"])("div",{class:"title"},"回源5xx失败次数",-1),ge={class:"detail"},Ne={class:"item"},ve=Object(c["createVNode"])("div",{class:"title"},"回源平均耗时",-1),_e={class:"detail"},he={class:"item"},De=Object(c["createVNode"])("div",{class:"title"},"回源耗时中位数",-1),we={class:"detail"},xe=Object(c["createVNode"])("div",{style:{padding:"15px 0 0 0","border-top":"1px solid #ebeef5",color:"#4e5969"}},[Object(c["createVNode"])("p",null,"业务服务器请求情况")],-1),fe={class:"demo-block"},Te=Object(c["createVNode"])("span",{class:"col-item-protection-title"},"请求次数：",-1),Se=Object(c["createVNode"])("span",{class:"col-item-protection-title"},"请求IP数量：",-1),Ce=Object(c["createVNode"])("span",{class:"col-item-protection-title"},"请求成功次数：",-1),ye=Object(c["createVNode"])("span",{class:"col-item-protection-title"},"请求4xx失败次数：",-1),ke=Object(c["createVNode"])("span",{class:"col-item-protection-title"},"请求5xx失败次数：",-1),qe=Object(c["createVNode"])("span",{class:"col-item-protection-title"},"请求平均耗时：",-1),Pe=Object(c["createVNode"])("span",{class:"col-item-protection-title"},"请求耗时中位数：",-1),ze=Object(c["createVNode"])("span",{class:"col-item-protection-title"},"请求最长耗时：",-1),Le=Object(c["createVNode"])("span",{class:"col-item-protection-title"},"请求最短耗时：",-1);function Ue(e,t,a,i,o,Ue){const Be=Object(c["resolveComponent"])("el-breadcrumb-item"),Me=Object(c["resolveComponent"])("el-breadcrumb"),Ie=Object(c["resolveComponent"])("el-row"),Re=Object(c["resolveComponent"])("el-option"),Ae=Object(c["resolveComponent"])("el-select"),Fe=Object(c["resolveComponent"])("el-date-picker"),He=Object(c["resolveComponent"])("el-button"),Ee=Object(c["resolveComponent"])("el-table-column"),Je=Object(c["resolveComponent"])("el-tag"),$e=Object(c["resolveComponent"])("el-table"),We=Object(c["resolveComponent"])("el-col"),Ge=Object(c["resolveDirective"])("loading");return Object(c["openBlock"])(),Object(c["createBlock"])("div",null,[Object(c["createVNode"])(Ie,{class:"breadcrumb-style"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Me,{separator:"/"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Be,{to:{path:"/soc-statistics"}},{default:Object(c["withCtx"])(()=>[l]),_:1}),Object(c["createVNode"])(Be,null,{default:Object(c["withCtx"])(()=>[s]),_:1})]),_:1})]),_:1}),Object(c["createVNode"])(Ie,{class:"container-style"},{default:Object(c["withCtx"])(()=>[Object(c["withDirectives"])(Object(c["createVNode"])(We,{span:24},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])("div",r,[Object(c["createVNode"])(Ae,{modelValue:o.domain,"onUpdate:modelValue":t[1]||(t[1]=e=>o.domain=e),placeholder:"请选择",onChange:Ue.onChangeDomain,size:"small",style:{"margin-right":"10px"}},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(o.domainList,e=>(Object(c["openBlock"])(),Object(c["createBlock"])(Re,{key:e.domain,label:e.domain,value:e.domain},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),Object(c["withDirectives"])(Object(c["createVNode"])(Ae,{modelValue:o.valueTime,"onUpdate:modelValue":t[2]||(t[2]=e=>o.valueTime=e),placeholder:"Select",onChange:Ue.onChangeSelectTime,size:"small"},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(o.optionTime,e=>(Object(c["openBlock"])(),Object(c["createBlock"])(Re,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),[[c["vShow"],o.isShowSelectTime]]),Object(c["withDirectives"])(Object(c["createVNode"])("div",null,[Object(c["createVNode"])(Fe,{modelValue:o.pickerTime,"onUpdate:modelValue":t[3]||(t[3]=e=>o.pickerTime=e),type:"datetimerange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",onChange:Ue.changeTimeline,size:"small"},null,8,["modelValue","onChange"])],512),[[c["vShow"],!o.isShowSelectTime]]),Object(c["createVNode"])(He,{icon:"el-icon-search",onClick:Ue.onChangeSearch,class:"search-icon-btn",size:"small"},null,8,["onClick"])]),Object(c["createVNode"])("div",d,[Object(c["createVNode"])(Ie,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])("div",n,[b,Object(c["createVNode"])("div",j,[Object(c["createVNode"])("div",O,[Object(c["createVNode"])("div",m,[u,Object(c["createVNode"])("div",p,Object(c["toDisplayString"])(o.tableData.total_requests),1)]),Object(c["createVNode"])("div",V,[g,Object(c["createVNode"])("div",N,Object(c["toDisplayString"])(o.tableData.unique_ips),1)]),Object(c["createVNode"])("div",v,[_,Object(c["createVNode"])("div",h,Object(c["toDisplayString"])(o.tableData.successful_requests),1)]),Object(c["createVNode"])("div",D,[w,Object(c["createVNode"])("div",x,Object(c["toDisplayString"])(o.tableData.error_4xx_requests),1)]),Object(c["createVNode"])("div",f,[T,Object(c["createVNode"])("div",S,Object(c["toDisplayString"])(o.tableData.error_5xx_requests),1)]),Object(c["createVNode"])("div",C,[y,Object(c["createVNode"])("div",k,Object(c["toDisplayString"])(o.tableData.avg_request_time_ms),1)]),Object(c["createVNode"])("div",q,[P,Object(c["createVNode"])("div",z,Object(c["toDisplayString"])(o.tableData.median_request_time_ms),1)])])])]),Object(c["createVNode"])("div",L,[U,Object(c["createVNode"])("div",B,[M,Object(c["createVNode"])("div",I,[Object(c["createVNode"])("div",R,[Object(c["createVNode"])("div",A,[F,Object(c["createVNode"])("div",H,Object(c["toDisplayString"])(o.tableData.attack_attempts),1)]),Object(c["createVNode"])("div",E,[J,Object(c["createVNode"])("div",$,Object(c["toDisplayString"])(o.tableData.intercepted_attempts),1)]),Object(c["createVNode"])("div",W,[G,Object(c["createVNode"])("div",K,Object(c["toDisplayString"])(o.tableData.unique_ips_attack),1)]),Object(c["createVNode"])("div",Q,[X,Object(c["createVNode"])("div",Y,Object(c["toDisplayString"])(o.tableData.unique_ips_intercepted),1)])])])]),Z]),Object(c["createVNode"])("div",ee,[te,Object(c["createVNode"])("div",ae,[Object(c["createVNode"])("div",ce,[Object(c["createVNode"])("div",ie,[oe,Object(c["createVNode"])("div",le,Object(c["toDisplayString"])(o.tableData.total_upstream_requests),1)]),Object(c["createVNode"])("div",se,[re,Object(c["createVNode"])("div",de,Object(c["toDisplayString"])(o.tableData.upstream_unique_ips),1)]),Object(c["createVNode"])("div",ne,[be,Object(c["createVNode"])("div",je,Object(c["toDisplayString"])(o.tableData.successful_upstream_requests),1)]),Object(c["createVNode"])("div",Oe,[me,Object(c["createVNode"])("div",ue,Object(c["toDisplayString"])(o.tableData.error_4xx_upstream_requests),1)]),Object(c["createVNode"])("div",pe,[Ve,Object(c["createVNode"])("div",ge,Object(c["toDisplayString"])(o.tableData.error_5xx_upstream_requests),1)]),Object(c["createVNode"])("div",Ne,[ve,Object(c["createVNode"])("div",_e,Object(c["toDisplayString"])(o.tableData.avg_upstream_time_ms),1)]),Object(c["createVNode"])("div",he,[De,Object(c["createVNode"])("div",we,Object(c["toDisplayString"])(o.tableData.median_upstream_time_ms),1)])])])])]),_:1})]),xe,Object(c["createVNode"])("div",fe,[Object(c["createVNode"])($e,{data:o.tableDataDetail,style:{width:"100%"}},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Ee,{prop:"Host",label:"网站"}),Object(c["createVNode"])(Ee,{prop:"UpstreamAddr",label:"业务服务器"}),Object(c["createVNode"])(Ee,{label:"回源请求状态"},{default:Object(c["withCtx"])(e=>[Object(c["createVNode"])("p",null,[Te,Object(c["createVNode"])(Je,{size:"small"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.row.TotalRequests),1)]),_:2},1024)]),Object(c["createVNode"])("p",null,[Se,Object(c["createVNode"])(Je,{size:"small"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.row.UniqueSrcIPs),1)]),_:2},1024)]),Object(c["createVNode"])("p",null,[Ce,Object(c["createVNode"])(Je,{size:"small"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.row.SuccessfulRequests),1)]),_:2},1024)]),Object(c["createVNode"])("p",null,[ye,Object(c["createVNode"])(Je,{size:"small"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.row.Error4xxRequests),1)]),_:2},1024)]),Object(c["createVNode"])("p",null,[ke,Object(c["createVNode"])(Je,{size:"small"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.row.Error5xxRequests),1)]),_:2},1024)])]),_:1}),Object(c["createVNode"])(Ee,{label:"回源请求耗时"},{default:Object(c["withCtx"])(e=>[Object(c["createVNode"])("p",null,[qe,Object(c["createVNode"])(Je,{size:"small"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.row.AvgUpstreamTimeMs),1)]),_:2},1024)]),Object(c["createVNode"])("p",null,[Pe,Object(c["createVNode"])(Je,{size:"small"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.row.MedianUpstreamTimeMs),1)]),_:2},1024)]),Object(c["createVNode"])("p",null,[ze,Object(c["createVNode"])(Je,{size:"small"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.row.MaxUpstreamTimeMs),1)]),_:2},1024)]),Object(c["createVNode"])("p",null,[Le,Object(c["createVNode"])(Je,{size:"small"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.row.MinUpstreamTimeMs),1)]),_:2},1024)])]),_:1})]),_:1},8,["data"])])]),_:1},512),[[Ge,o.loadingPage,void 0,{fullscreen:!0,lock:!0}]])]),_:1})])}var Be=a("362c"),Me={mixins:[Be["c"]],data(){return{dataSearch:"",loadingPage:!1,loading:!1,tableData:{},tableDataDetail:[],isShowSelectTime:!0,valueTime:"1w",domainList:[],domain:"",hasDomain:!1,pickerTime:[],optionTime:[{value:"1h",label:"1小时"},{value:"1d",label:"24小时"},{value:"1w",label:"7天"},{value:"1m",label:"30天"},{value:"default",label:"自定义"}]}},computed:{rules(){return{}}},mounted(){this.getdomainListData(),this.onChangeSelectTime(),this.getDataConf()},methods:{getdomainListData(){var e=this;Object(Be["a"])("get","/waf/waf_get_domain_list",{},(function(t){e.loadingPage=!1,e.domainList=t.data.message,e.domainList.unshift({domain:"全部"}),e.domain=e.domainList[0].domain}),(function(){e.loadingPage=!1}))},getDataConf(){var e=this;Object(Be["a"])("post","/waf/waf_get_sys_report_conf_conf",{},(function(t){e.loadingPage=!1,e.logSource=t.data.message.report_conf,"false"==e.logSource?e.$message({duration:0,showClose:!0,message:"日志查询功能未配置，<a href='/#/sys-report-conf' class='error-message-btn'>点击前往配置</a>",type:"warning",dangerouslyUseHTMLString:!0}):e.getDataConfLog()}),(function(){e.loadingPage=!1}),"no-message")},getDataConfLog(){var e=this;Object(Be["a"])("post","/waf/waf_get_sys_log_conf",{},(function(t){e.loadingPage=!1,e.log_all=t.data.message.log_all,e.log_conf_remote=t.data.message.log_conf_remote,"true"==e.log_all&&"true"==e.log_conf_remote?(e.getData(),e.getDataDetail()):e.$message({duration:0,showClose:!0,message:"日志传输功能未开启全流量日志记录，<a href='/#/sys-log-conf' class='error-message-btn'>点击前往配置</a>",type:"warning",dangerouslyUseHTMLString:!0})}),(function(){e.loadingPage=!1}),"no-message")},getData(){var e=this,t="/soc/soc_query_request_statistics",a={from_time:Object(Be["b"])(e.pickerTime[0]),to_time:Object(Be["b"])(e.pickerTime[1])};e.hasDomain&&(t="/soc/soc_query_domain_request_statistics",a.domain=e.domain),Object(Be["a"])("post",t,a,(function(t){e.loadingPage=!1,e.tableData=t.data.message}),(function(){e.loadingPage=!1}),"no-message")},getDataDetail(){var e=this,t="/soc/soc_query_request_statistics_detail",a={from_time:Object(Be["b"])(e.pickerTime[0]),to_time:Object(Be["b"])(e.pickerTime[1])};e.hasDomain&&(t="/soc/soc_query_domain_request_statistics_detail",a.domain=e.domain),Object(Be["a"])("post",t,a,(function(t){e.loadingPage=!1,e.tableDataDetail=t.data.message}),(function(){e.loadingPage=!1}),"no-message")},onChangeSelectTime(){var e=this;"default"==e.valueTime?(e.isShowSelectTime=!1,e.pickerTime=[new Date((new Date).getTime()-864e5),new Date]):(e.isShowSelectTime=!0,"1h"==e.valueTime&&(e.pickerTime=[new Date((new Date).getTime()-36e5),new Date]),"1d"==e.valueTime&&(e.pickerTime=[new Date((new Date).getTime()-864e5),new Date]),"1w"==e.valueTime&&(e.pickerTime=[new Date((new Date).getTime()-6048e5),new Date]),"1m"==e.valueTime&&(e.pickerTime=[new Date((new Date).getTime()-2592e6),new Date]))},changeTimeline(e){var t=this;null==e?(t.isShowSelectTime=!0,t.valueTime="1w"):t.isShowSelectTime=!1},onChangeSearch(){this.onChangeSelectTime(),this.getData(),this.getDataDetail()},onChangeDomain(e){this.hasDomain="全部"!=e,this.onChangeSearch()}}},Ie=(a("7775"),a("d959")),Re=a.n(Ie);const Ae=Re()(Me,[["render",Ue]]);t["default"]=Ae},7775:function(e,t,a){"use strict";a("85d8")},"85d8":function(e,t,a){},"9d64":function(e,t,a){e.exports=a.p+"static/index/img/logo.87ab72a5.png"}}]);
//# sourceMappingURL=chunk-b32f4924.379112e8.js.map