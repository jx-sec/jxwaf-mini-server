{"version":3,"sources":["webpack:///./src/components/flow-deny-page.vue","webpack:///./src/components/flow-deny-page.vue?8777","webpack:///./src/components/flow-deny-page.vue?931d"],"names":["class","type","justify","span","ruleType","href","domain","model","flowDenyPageForm","label-width","rules","ref","label","prop","key","owasp_code","placeholder","radioContent","owasp_html","autosize","onClickFlowDenyPageSubmit","loading","mixins","data","validateCode","rule","value","callback","Error","computed","required","message","trigger","validator","this","mounted","route","params","getData","methods","t","postUrl","oData","group_id","response","webDenyPageForm","$refs","validate","valid","render"],"mappings":"mKACOA,MAAM,sB,EAKD,yBAAiB,UAAb,YAAQ,G,EAiBZ,yBAA6B,OAAxBA,MAAM,aAAW,S,+BAOK,S,+BACA,Y,EAU/B,yBAA6B,OAAxBA,MAAM,aAAW,S,+BAYsF,O,mfApDlH,yBA6DM,MA7DN,EA6DM,CA5DJ,yBAcS,GAdDC,KAAK,OAAOD,MAAM,SAASE,QAAQ,iB,+BACzC,iBAYS,CAZT,yBAYS,GAZAC,KAAM,IAAE,C,8BACf,iBAUS,CAVT,yBAUS,GAVDF,KAAK,OAAOD,MAAM,SAASE,QAAQ,iB,+BACzC,iBAES,CAFT,yBAES,GAFAC,KAAM,IAAE,C,8BACf,iBAAiB,CAAjB,M,MAEF,yBAKS,GALAA,KAAM,GAAIH,MAAM,oB,+BACvB,iBACsC,CAAtB,cAAR,EAAAI,U,yBADR,yBACsC,K,MADnCJ,MAAM,wCAAyCK,KAAI,uBAA2B,EAAAC,QACjD,KAAE,c,yBAClC,yBACe,K,MADZN,MAAM,wCAAyCK,KAAI,iBAAqB,EAAAC,OAAM,IAAS,EAAAF,UACjF,KAAE,iB,oCAKnB,yBAAc,GACd,yBA0CS,Q,8BAzCP,iBAwCS,CAxCT,yBAwCS,GAxCAD,KAAM,IAAE,C,8BAEf,iBAkBU,CAlBV,yBAkBU,GAlBDH,MAAM,YAAU,C,8BACvB,iBAgBM,CAhBN,yBAgBM,YAfJ,EACA,yBAaU,GAbAO,MAAO,EAAAC,iBAAkBC,cAAY,QAASC,MAAO,EAAAA,MAAOC,IAAI,oB,+BACxE,iBAEe,CAFf,yBAEe,GAFDC,MAAM,UAAUC,KAAK,aAAaC,IAAI,K,+BAClD,iBAAwF,CAAxF,yBAAwF,G,WAArE,EAAAN,iBAAiBO,W,qDAAjB,EAAAP,iBAAiBO,WAAU,IAAEC,YAAY,kB,iCAE9D,yBAKe,GALDJ,MAAM,QAAM,C,8BACxB,iBAGiB,CAHjB,yBAGiB,G,WAHQ,EAAAK,a,qDAAA,EAAAA,aAAY,K,+BACnC,iBAAqC,CAArC,yBAAqC,GAA1BL,MAAO,GAAC,C,8BAAE,iBAAK,C,YAC1B,yBAAwC,GAA7BA,MAAO,GAAC,C,8BAAE,iBAAQ,C,6EAGjC,yBAEe,Q,8BADb,iBAA8F,CAA9F,yBAA8F,G,WAA3E,EAAAJ,iBAAiBU,W,qDAAjB,EAAAV,iBAAiBU,WAAU,IAAEjB,KAAK,WAAYkB,SAAU,c,kDAD3C,GAAZ,EAAAF,oB,sCAO5B,EACA,yBAgBS,GAhBDhB,KAAK,OAAOD,MAAM,SAASE,QAAQ,iB,+BACzC,iBAcS,CAdT,yBAcS,GAdAC,KAAM,IAAE,C,8BACf,iBAYS,CAZT,yBAYS,GAZDF,KAAK,OAAOD,MAAM,SAASE,QAAQ,iB,+BACzC,iBAMS,CANT,yBAMS,GANAC,KAAM,IAAE,C,8BACf,iBACsC,CAAtB,cAAR,EAAAC,U,yBADR,yBACsC,K,MADnCJ,MAAM,wCAAyCK,KAAI,uBAA2B,EAAAC,QACjD,KAAE,c,yBAClC,yBACe,K,MADZN,MAAM,wCAAyCK,KAAI,iBAAqB,EAAAC,OAAM,IAAS,EAAAF,UACjF,KAAE,iB,MAGb,yBAGS,GAHAD,KAAM,GAAIH,MAAM,oB,+BACvB,iBACY,CADZ,yBACY,GADDC,KAAK,UAAW,QAAK,+BAAE,EAAAmB,0BAAyB,sBAAuBC,QAAS,EAAAA,S,+BAAS,iBACpG,C,oHAcD,GACbC,OAAQ,CAAC,QACTC,KAFa,WAGX,MAAO,CACLC,aAAc,SAACC,EAAMC,EAAOC,GACtBD,EAAQ,KAAOA,EAAQ,IACzBC,EAAS,IAAIC,MAAM,mBAEnBD,KAGJN,SAAS,EACTf,OAAQ,GACRF,SAAU,cACVI,iBAAkB,CAChBO,WAAY,IACZG,WAAW,IAEbD,aAAc,IAGlBY,SAAU,CACRnB,MADQ,WAEN,MAAO,CACLK,WAAY,CACV,CACEe,UAAU,EACVC,QAAS,iBACTC,QAAS,CAAC,OAAQ,WAEpB,CAAEC,UAAWC,KAAKV,aAAcQ,QAAS,YAKjDG,QAnCa,WAoCX,IAAMC,EAAQ,iBACdF,KAAK9B,SAAWgC,EAAMC,OAAOjC,SAC7B8B,KAAK5B,OAAS8B,EAAMC,OAAO/B,OAC3B4B,KAAKI,WAEPC,QAAS,CACPD,QADO,WAEL,IAAIE,EAAIN,KACJO,EAAU,8BACVC,EAAQ,CAAEpC,OAAQkC,EAAElC,QACN,cAAdkC,EAAEpC,WACJqC,EAAU,oCACVC,EAAQ,CAAEC,SAAUH,EAAElC,SAExB,eACE,OACAmC,EACAC,GACA,SAAUE,GAERJ,EAAEhC,iBAAmBoC,EAASrB,KAAKQ,QAC/BS,EAAEhC,iBAAiBU,WACrBsB,EAAEvB,aAAe,EAEjBuB,EAAEvB,aAAe,KAGrB,cAGA,eAIJG,0BA7BO,SA6BmBZ,GACxB,IAAIgC,EAAIN,KACJO,EAAU,+BACI,cAAdD,EAAEpC,UACJqC,EAAU,qCACVD,EAAEK,gBAAgBF,SAAWH,EAAElC,QAE/BkC,EAAEK,gBAAgBvC,OAASkC,EAAElC,OAE/B4B,KAAKY,MAAMtC,GAAkBuC,UAAS,SAACC,GACjCA,IACFR,EAAEnB,SAAU,EACZ,eACE,OACAoB,EACAD,EAAEhC,kBACF,SAAUoC,GACRJ,EAAEnB,SAAU,EACZmB,EAAEF,aAEJ,WACEE,EAAEnB,SAAU,Y,UC1J1B,EAAO4B,OAASA,EAED,gB,kCCPf","file":"static/index/js/chunk-353fedec.js","sourcesContent":["<template>\r\n  <div class=\"web-deny-page-wrap\">\r\n    <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n      <el-col :span=\"24\">\r\n        <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n          <el-col :span=\"12\">\r\n            <h3>流量攻击拦截页面</h3>\r\n          </el-col>\r\n          <el-col :span=\"12\" class=\"text-align-right\">\r\n            <a class=\"el-button el-button--primary is-plain\" :href=\"'/#/group-protection/' + domain\"\r\n              v-if=\"ruleType=='group_rule'\">返回</a>\r\n            <a class=\"el-button el-button--primary is-plain\" :href=\"'/#/protection/' + domain + '/' + ruleType\"\r\n              v-else>返回</a>\r\n          </el-col>\r\n        </el-row>\r\n      </el-col>\r\n    </el-row>\r\n    <el-divider />\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n\r\n        <el-card class=\"box-card\">\r\n          <div>\r\n            <div class=\"margin-4x\"></div>\r\n            <el-form :model=\"flowDenyPageForm\" label-width=\"120px\" :rules=\"rules\" ref=\"flowDenyPageForm\">\r\n              <el-form-item label=\"HTTP响应码\" prop=\"owasp_code\" key=\"1\">\r\n                <el-input v-model=\"flowDenyPageForm.owasp_code\" placeholder=\"请输入100~600的响应码\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"响应内容\">\r\n                <el-radio-group v-model=\"radioContent\">\r\n                  <el-radio :label=\"0\">无响应内容</el-radio>\r\n                  <el-radio :label=\"1\">HTML响应内容</el-radio>\r\n                </el-radio-group>\r\n              </el-form-item>\r\n              <el-form-item v-show=\"radioContent == 1\">\r\n                <el-input v-model=\"flowDenyPageForm.owasp_html\" type=\"textarea\" :autosize=\"{ minRows: 10 }\" />\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n        </el-card>\r\n\r\n        <div class=\"margin-4x\"></div>\r\n        <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n          <el-col :span=\"24\">\r\n            <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n              <el-col :span=\"12\">\r\n                <a class=\"el-button el-button--primary is-plain\" :href=\"'/#/group-protection/' + domain\"\r\n                  v-if=\"ruleType=='group_rule'\">返回</a>\r\n                <a class=\"el-button el-button--primary is-plain\" :href=\"'/#/protection/' + domain + '/' + ruleType\"\r\n                  v-else>返回</a>\r\n\r\n              </el-col>\r\n              <el-col :span=\"12\" class=\"text-align-right\">\r\n                <el-button type=\"primary\" @click=\"onClickFlowDenyPageSubmit('flowDenyPageForm')\" :loading=\"loading\">保存\r\n                </el-button>\r\n              </el-col>\r\n            </el-row>\r\n          </el-col>\r\n        </el-row>\r\n      </el-col>\r\n    </el-row>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport { mixin, JXAjax } from \"../assets/scripts/common\";\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  mixins: [mixin],\r\n  data() {\r\n    return {\r\n      validateCode: (rule, value, callback) => {\r\n        if (value < 100 || value > 600) {\r\n          callback(new Error(\"请输入100~600的响应码\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      },\r\n      loading: false,\r\n      domain: \"\",\r\n      ruleType: \"single_rule\",\r\n      flowDenyPageForm: {\r\n        owasp_code: 403,\r\n        owasp_html:\"\"\r\n      },\r\n      radioContent: 0\r\n    };\r\n  },\r\n  computed: {\r\n    rules() {\r\n      return {\r\n        owasp_code: [\r\n          {\r\n            required: true,\r\n            message: \"请输入100~600的响应码\",\r\n            trigger: [\"blur\", \"change\"],\r\n          },\r\n          { validator: this.validateCode, trigger: \"blur\" },\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    const route = useRoute()\r\n    this.ruleType = route.params.ruleType;\r\n    this.domain = route.params.domain;\r\n    this.getData();\r\n  },\r\n  methods: {\r\n    getData() {\r\n      var t = this;\r\n      var postUrl = \"/waf/waf_get_flow_deny_page\";\r\n      var oData = { domain: t.domain };\r\n      if (t.ruleType == \"group_rule\") {\r\n        postUrl = \"/waf/waf_get_group_flow_deny_page\"\r\n        oData = { group_id: t.domain }\r\n      }\r\n      JXAjax(\r\n        \"post\",\r\n        postUrl,\r\n        oData,\r\n        function (response) {\r\n\r\n          t.flowDenyPageForm = response.data.message;\r\n          if (t.flowDenyPageForm.owasp_html) {\r\n            t.radioContent = 1;\r\n          } else { \r\n            t.radioContent = 0;\r\n          }\r\n        },\r\n        function () {\r\n  \r\n        },\r\n        \"no-message\"\r\n      );\r\n    },\r\n\r\n    onClickFlowDenyPageSubmit(flowDenyPageForm) {\r\n      var t = this;\r\n      var postUrl = \"/waf/waf_edit_flow_deny_page\";\r\n      if (t.ruleType == \"group_rule\") {\r\n        postUrl = \"/waf/waf_edit_group_flow_deny_page\"\r\n        t.webDenyPageForm.group_id = t.domain;\r\n      } else {\r\n        t.webDenyPageForm.domain = t.domain;\r\n      }\r\n      this.$refs[flowDenyPageForm].validate((valid) => {\r\n        if (valid) {\r\n          t.loading = true;\r\n          JXAjax(\r\n            \"post\",\r\n            postUrl,\r\n            t.flowDenyPageForm,\r\n            function (response) {\r\n              t.loading = false;\r\n              t.getData();\r\n            },\r\n            function () {\r\n              t.loading = false;\r\n            }\r\n          );\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.web-deny-page-wrap {\r\n  max-width: 800px;\r\n  min-width: 400px;\r\n}\r\n\r\n.template-img-box img {\r\n  display: block;\r\n  width: 100%;\r\n}\r\n\r\n.template-img-box {\r\n  border: 1px solid #ccc;\r\n  width: 200px;\r\n}\r\n\r\n.template-radio {\r\n  position: relative;\r\n  margin: 0 20px 40px 0 !important;\r\n}\r\n\r\n.template-radio .el-radio__input {\r\n  position: absolute;\r\n  bottom: -25px;\r\n  left: 45%;\r\n\r\n}\r\n\r\n#template-show {\r\n  border: 1px solid #ccc;\r\n  width: 100%;\r\n  height: 300px;\r\n  font-size: 12px;\r\n}\r\n</style>\r\n","import { render } from \"./flow-deny-page.vue?vue&type=template&id=0c0fa186\"\nimport script from \"./flow-deny-page.vue?vue&type=script&lang=js\"\nexport * from \"./flow-deny-page.vue?vue&type=script&lang=js\"\n\nimport \"./flow-deny-page.vue?vue&type=style&index=0&lang=css\"\nscript.render = render\n\nexport default script","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./flow-deny-page.vue?vue&type=style&index=0&lang=css\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./flow-deny-page.vue?vue&type=style&index=0&lang=css\""],"sourceRoot":""}